!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=54)}([function(e,t,n){"use strict";function i(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]]);return n}function r(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,i){t(n,i,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{u(i.next(e))}catch(e){r(e)}}function a(e){try{u(i.throw(e))}catch(e){r(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})}function c(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,r=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function p(e,t,n){function i(e){return function(t){return new Promise(function(n,i){p.push([e,t,n,i]),o()})}}function o(){!d&&p.length&&r((d=p.shift())[0],d[1])}function r(e,t){try{s(g[e](t))}catch(e){l(d[3],e)}}function s(e){e.done?l(d[2],e):"yield"===e.value[0]?l(d[2],{value:e.value[1],done:!1}):Promise.resolve(e.value[1]).then("delegate"===e.value[0]?a:u,c)}function a(e){s(e.done?e:{value:["yield",e.value],done:!1})}function u(e){r("next",e)}function c(e){r("throw",e)}function l(e,t){d=void 0,e(t),o()}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,f,g=n.apply(e,t||[]),p=[];return f={next:i("next"),throw:i("throw"),return:i("return")},f[Symbol.asyncIterator]=function(){return this},f}function h(e){function t(t,n){return function(i){return{value:["delegate",(e[t]||n).call(e,i)],done:!1}}}var n={next:t("next"),throw:t("throw",function(e){throw e}),return:t("return",function(e){return{value:e,done:!0}})};return e=m(e),n[Symbol.iterator]=function(){return this},n}function m(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof d?d(e):e[Symbol.iterator]()}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=i,n.d(t,"__assign",function(){return b}),t.__rest=o,t.__decorate=r,t.__param=s,t.__metadata=a,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=d,t.__read=f,t.__spread=g,t.__asyncGenerator=p,t.__asyncDelegator=h,t.__asyncValues=m;var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},b=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},function(e,t,n){var i,o;!function(r,s){"use strict";i=s,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o)}(0,function(){"use strict";function e(e){return typeof console!==a&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):s)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==a&&(i.call(this,t,n),this[e].apply(this,arguments))}}function i(e,t){for(var n=0;n<u.length;n++){var i=u[n];this[i]=n<e?s:this.methodFactory(i,e,t)}}function o(t,i,o){return e(t)||n.apply(this,arguments)}function r(e,t,n){function r(e){var t=(u[e]||"silent").toUpperCase();try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}function s(){var e;try{e=window.localStorage[d]}catch(e){}if(typeof e===a)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(d)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}var c,l=this,d="loglevel";e&&(d+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||o,l.getLevel=function(){return c},l.setLevel=function(t,n){if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(c=t,n!==!1&&r(t),i.call(l,t,e),typeof console===a&&t<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(e){s()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var f=s();null==f&&(f=null==t?"WARN":t),l.setLevel(f,!1)}var s=function(){},a="undefined",u=["trace","debug","info","warn","error"],c=new r,l={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new r(e,c.getLevel(),c.methodFactory)),t};var d=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=d),c},c})},function(e,t,n){"use strict";function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return F.default.isBrowser()&&(Y||(Y=document.createElement("textarea"))),Y?(Y.innerHTML=e,Y.value):e}function r(){if(void 0===window.Promise)return!1;if(""===j.name&&""===j.version)var e=j._detect(navigator.userAgent);else var e=j;var t=navigator.userAgent||"";return!(!e.safari&&void 0===navigator.serviceWorker)&&(!(e.ios||e.ipod||e.iphone||e.ipad)&&(!e.msedge&&!e.msie&&(!(t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1)&&(!navigator.appVersion.match(/ wv/)&&(!(e.firefox&&Number(e.version)<48&&(e.mobile||e.tablet))&&(!!(e.firefox&&Number(e.version)>=44)||(!!(e.safari&&Number(e.version)>=7.1)||(!!(e.samsungBrowser&&Number(e.version)>=4)||(!!((e.chrome||e.chromium)&&Number(e.version)>=42)||(!!(e.yandexbrowser&&Number(e.version)>=15.12)||(!!(e.opera&&(e.mobile||e.tablet)&&Number(e.version)>=37||e.opera&&Number(e.version)>=42)||!!e.vivaldi)))))))))))}function s(e){var t=document.querySelectorAll(e);if(t.length>0)for(var n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])}function a(){return new Promise(function(e,t){OneSignal.initialized?e():OneSignal.once(OneSignal.EVENTS.SDK_INITIALIZED,e)})}function u(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?"[Function]":t},4)}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e)return e.apply(null,t)}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return H.debug("Called %c"+e+"("+t.map(u).join(", ")+")",b("code"),".")}function d(e){return!!e&&!!e.match(/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)}function f(e,t,n){if("string"==typeof e)document.querySelector(e).insertAdjacentHTML(t,n);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.insertAdjacentHTML(t,n)}}function g(e){if("string"==typeof e)for(var t=document.querySelector(e);t.firstChild;)t.removeChild(t.firstChild);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");for(;e.firstChild;)e.removeChild(e.firstChild)}}function p(e,t){if("string"==typeof e)document.querySelector(e).classList.add(t);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.classList.add(t)}}function h(e,t){if("string"==typeof e)document.querySelector(e).classList.remove(t);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.classList.remove(t)}}function m(e,t){if("string"==typeof e)return document.querySelector(e).classList.contains(t);if("object"==typeof e)return e.classList.contains(t);throw new Error(e+" must be a CSS selector string or DOM Element object.")}function v(){return j.chrome||j.yandexbrowser||j.opera||j.vivaldi||j.samsungBrowser||j.chromium?J.CHROME:j.firefox?J.FIREFOX:j.safari?J.SAFARI:void H.error("OneSignal: Unable to associate device type for browser "+j.name+" "+j.version)}function b(e){return"code"==e?'padding: 0 1px 1px 5px;border: 1px solid #ddd;border-radius: 3px;font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;color: #444;':"bold"==e?"font-weight: 600;color: rgb(51, 51, 51);":"alert"==e?"font-weight: 600;color: red;":"event"==e?"color: green;":"postmessage"==e?"color: orange;":"serviceworkermessage"==e?"color: purple;":void 0}function S(e){return new Promise(function(t){setTimeout(t,e)})}function _(){return Promise.resolve()}function y(e,t){var n=new Promise(function(e,n){setTimeout(function(){n(new z.default)},t)});return Promise.race([e,n])}function O(e,t,n){return void 0===t&&(t=_()),void 0===n&&(n=_()),e?t:n}function w(e,t){return!!e&&e.indexOf(t)!==-1}function E(e){for(var t in e)e.hasOwnProperty(t)&&void 0===e[t]&&delete e[t];return e}function P(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)}function I(e){var t=window.location.href;t=t.toLowerCase(),e=e.replace(/[\[\]]/g,"\\$&").toLowerCase();var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function T(){return H.warn("OneSignal: Wiping IndexedDB data."),Promise.all([V.default.remove("Ids"),V.default.remove("NotificationOpened"),V.default.remove("Options")])}function C(e){return e.charAt(0).toUpperCase()+e.slice(1)}function N(){return H.warn("OneSignal: Unsubscribing from push."),q.default.getWindowEnv()!==G.WindowEnvironmentKind.ServiceWorker?self.registration.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe();throw new Error("Cannot unsubscribe because not subscribed.")}):K.default.isUsingSubscriptionWorkaround()?new Promise(function(e,t){H.debug("Unsubscribe from push got called, and we're going to remotely execute it in HTTPS iFrame."),OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH,null,function(n){H.debug("Unsubscribe from push succesfully remotely executed."),n.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():t("Failed to remotely unsubscribe from push.")})}):navigator.serviceWorker&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(function(e){return e.pushManager}).then(function(e){return e.getSubscription()}).then(function(e){if(e)return e.unsubscribe()}):Promise.resolve()}function A(){if(H.warn("OneSignal: Unregistering service worker."),q.default.getWindowEnv()!==G.WindowEnvironmentKind.OneSignalProxyFrame)return navigator.serviceWorker&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(function(e){return e.unregister()}):Promise.resolve()}function M(){return Promise.all([N(),A()])}function R(e){return new Promise(function(t){return setTimeout(t,e)})}function k(e,t){return e.substr(e.indexOf(t)+t.length)}function x(e,t,n,o){if(void 0===o&&(o=!1),t||H.error("Cannot call on() with no event: ",t),n||H.error("Cannot call on() with no task: ",n),"string"==typeof e){var r=document.querySelectorAll(e);if(r.length>0)for(var s=0;s<r.length;s++)x(r[s],t,n)}else if(i(e))for(var s=0;s<e.length;s++)x(e[s],t,n);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");var a=function(){return function(t){var i=function(){e.removeEventListener(t.type,a)};o||i(),n(t,i)}}();e.addEventListener(t,a)}}function D(){return window.__oneSignalSdkLoadCount||0}function W(e,t){return L.__awaiter(this,void 0,void 0,function(){return L.__generator(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,i){OneSignal.once(e,function(e){if(t){t(e)&&n(e)}else n(e)})})];case 1:return[2,n.sent()]}})})}function U(){window.__oneSignalSdkLoadCount=D()+1}function B(e){return e.replace(/\s/g,"").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0});var L=n(0),H=n(1),j=n(12),F=n(9),V=n(8),K=n(7),q=n(3),G=n(6),z=n(34);t.isArray=i;var Y=null;t.decodeHtmlEntities=o,t.isPushNotificationsSupported=r,t.removeDomElement=s,t.awaitOneSignalInitAndSupported=a,t.stringify=u,t.executeCallback=c,t.logMethodCall=l,t.isValidEmail=d,t.addDomElement=f,t.clearDomElementChildren=g,t.addCssClass=p,t.removeCssClass=h,t.hasCssClass=m;var J={CHROME:5,SAFARI:7,FIREFOX:8};t.getDeviceTypeForBrowser=v,t.getConsoleStyle=b,t.delay=S,t.nothing=_,t.timeoutPromise=y,t.when=O,t.contains=w,t.trimUndefined=E,t.isValidUuid=P,t.getUrlQueryParam=I,t.wipeIndexedDb=T,t.capitalize=C,t.unsubscribeFromPush=N,t.wipeServiceWorker=A,t.wipeServiceWorkerAndUnsubscribe=M,t.wait=R,t.substringAfter=k,t.once=x,t.getSdkLoadCount=D,t.awaitSdkEvent=W,t.incrementSdkLoadCount=U,t.prepareEmailForHashing=B},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),o=n(41),r=n(6),s=function(){function e(){}return e.getBuildEnv=function(){return i.BuildEnvironmentKind.Production},e.getWindowEnv=function(){return"undefined"==typeof window?"undefined"!=typeof self&&void 0!==self.registration?r.WindowEnvironmentKind.ServiceWorker:r.WindowEnvironmentKind.Unknown:window===window.top?location.href.indexOf("initOneSignal")!==-1||"/subscribe"===location.pathname&&""===location.search&&(location.hostname.endsWith(".onesignal.com")||location.hostname.endsWith(".os.tc")||location.hostname.indexOf(".localhost")!==-1&&e.getBuildEnv()===i.BuildEnvironmentKind.Development)?r.WindowEnvironmentKind.OneSignalSubscriptionPopup:r.WindowEnvironmentKind.Host:"/webPushIframe"===location.pathname?r.WindowEnvironmentKind.OneSignalProxyFrame:"/webPushModal"===location.pathname?r.WindowEnvironmentKind.OneSignalSubscriptionModal:r.WindowEnvironmentKind.CustomIframe},e.getTestEnv=function(){return o.TestEnvironmentKind.None},e.getBuildEnvPrefix=function(t){switch(void 0===t&&(t=e.getBuildEnv()),t){case i.BuildEnvironmentKind.Development:return"Dev-";case i.BuildEnvironmentKind.Staging:return"Staging-";case i.BuildEnvironmentKind.Production:return""}},e.getOneSignalApiUrl=function(t){switch(void 0===t&&(t=e.getBuildEnv()),t){case i.BuildEnvironmentKind.Development:return new URL("https://localhost:3001/api/v1");case i.BuildEnvironmentKind.Staging:return new URL("https://onesignal-staging.pw/api/v1");case i.BuildEnvironmentKind.Production:return new URL("https://onesignal.com/api/v1")}},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(9),r=n(2),s=n(3),a=n(6),u=["notifyButtonHovering","notifyButtonHover","notifyButtonButtonClick","notifyButtonLauncherClick","animatedElementHiding","animatedElementHidden","animatedElementShowing","animatedElementShown","activeAnimatedElementActivating","activeAnimatedElementActive","activeAnimatedElementInactivating","activeAnimatedElementInactive","dbRetrieved","dbSet","testEvent"],c=["onesignal.prompt.custom.clicked","onesignal.prompt.native.permissionchanged","onesignal.subscription.changed","onesignal.internal.subscriptionset","dbRebuilt","initialize","subscriptionSet","sendWelcomeNotification","subscriptionChange","notificationPermissionChange","dbSet","register","notificationDisplay","notificationDismiss","notificationClick","permissionPromptDisplay","testWouldDisplay","testInitOptionDisabled","popupWindowTimeout"],l={notificationPermissionChange:"onesignal.prompt.native.permissionchanged",subscriptionChange:"onesignal.subscription.changed",customPromptClick:"onesignal.prompt.custom.clicked"},d=function(){function e(){}return e.trigger=function(t,n,d){if(void 0===d&&(d=null),!r.contains(u,t)){var f=n;if(d)var g=r.capitalize(s.default.getWindowEnv().toString())+" ⬸ "+r.capitalize(d);else var g=r.capitalize(s.default.getWindowEnv().toString());f||f===!1?i.debug("("+g+") » %c"+t+":",r.getConsoleStyle("event"),f):i.debug("("+g+") » %c"+t,r.getConsoleStyle("event"))}if(o.default.isBrowser()){if(t===OneSignal.EVENTS.SDK_INITIALIZED){if(OneSignal.initialized)return;OneSignal.initialized=!0}OneSignal.emit(t,n)}if(l.hasOwnProperty(t)){var p=l[t];e._triggerLegacy(p,n)}if(o.default.isBrowser()&&(s.default.getWindowEnv()===a.WindowEnvironmentKind.OneSignalSubscriptionPopup||s.default.getWindowEnv()===a.WindowEnvironmentKind.OneSignalProxyFrame)){opener||parent?r.contains(c,t)&&(s.default.getWindowEnv()===a.WindowEnvironmentKind.OneSignalSubscriptionPopup?OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,{eventName:t,eventData:n}):OneSignal.proxyFrame.retriggerRemoteEvent(t,n)):i.error("Could not send event '"+t+"' back to host page because no creator (opener or parent) found!")}},e._triggerLegacy=function(e,t){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});window.dispatchEvent(n)},e}();t.default=d},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=i(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)o.call(n,c)&&(a[c]=n[c]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(n);for(var l=0;l<s.length;l++)r.call(n,s[l])&&(a[s[l]]=n[s[l]])}}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.ServiceWorker="ServiceWorker"]="ServiceWorker",e[e.Host="Host"]="Host",e[e.OneSignalSubscriptionPopup="Popup"]="OneSignalSubscriptionPopup",e[e.OneSignalSubscriptionModal="Modal"]="OneSignalSubscriptionModal",e[e.OneSignalProxyFrame="ProxyFrame"]="OneSignalProxyFrame",e[e.CustomIframe="CustomFrame"]="CustomIframe",e[e.Unknown="Unknown"]="Unknown"}(t.WindowEnvironmentKind||(t.WindowEnvironmentKind={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(4),s=n(8),a=n(12),u=n(2),c=n(11),l=n(22),d=n(14),f=n(33),g=n(23),p=n(3),h=n(6),m=n(34),v=function(){function e(){}return e.registerForW3CPush=function(e){return o.debug("Called %cregisterForW3CPush("+JSON.stringify(e)+")",u.getConsoleStyle("code")),s.default.get("Ids","registrationId").then(function(t){t&&e.fromRegisterFor&&"granted"==window.Notification.permission&&null!=navigator.serviceWorker.controller||navigator.serviceWorker.getRegistration().then(function(e){var t="";if(OneSignal.config.path&&(t=OneSignal.config.path),void 0===e)l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH);else if(e.active){var n=e.active.scriptURL;u.contains(n,t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH)?s.default.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(e){e?e!=OneSignal._VERSION?(o.info("Installing new service worker ("+e+" -> "+OneSignal._VERSION+")"),l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH)):l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH):l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH)}):u.contains(n,t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH)?s.default.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(e){e?e!=OneSignal._VERSION?(o.info("Installing new service worker ("+e+" -> "+OneSignal._VERSION+")"),l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH)):l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH):l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH)}):(o.info("Unregistering previous service worker:",e),e.unregister().then(function(e){o.info("Result of unregistering:",e),l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH)}))}else null==e.installing&&l.default.registerServiceWorker(t+p.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH)})})},e.enableNotifications=function(t){return o.debug("Called %cenableNotifications()",u.getConsoleStyle("code")),"PushManager"in window?"denied"===window.Notification.permission?void o.warn("The user has blocked notifications."):(o.debug("Calling %cnavigator.serviceWorker.ready() ...",u.getConsoleStyle("code")),void navigator.serviceWorker.ready.then(function(t){o.debug("Finished calling %cnavigator.serviceWorker.ready",u.getConsoleStyle("code")),c.default.establishServiceWorkerChannel(t),e.subscribeForPush(t)})):(o.info("Push messaging is not supported. No PushManager."),void c.default.beginTemporaryBrowserSession())},e.isUsingSubscriptionWorkaround=function(){if(!OneSignal.config)throw new Error("("+p.default.getWindowEnv().toString()+") isUsingSubscriptionWorkaround() cannot be called until OneSignal.config exists.");return!a.safari&&(!(e.isLocalhostAllowedAsSecureOrigin()&&"localhost"===location.hostname||"127.0.0.1"===location.hostname)&&(p.default.getWindowEnv()===h.WindowEnvironmentKind.Host&&(!!OneSignal.config.subdomainName||"http:"===location.protocol)))},e.hasInsecureParentOrigin=function(){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:if(window===window.top||!("serviceWorker"in navigator)||void 0===navigator.serviceWorker.getRegistration)return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.serviceWorker.getRegistration()];case 2:return t.sent(),[2,!1];case 3:return e=t.sent(),[2,!0];case 4:return[2]}})})},e.isLocalhostAllowedAsSecureOrigin=function(){return OneSignal.config&&OneSignal.config.allowLocalhostAsSecureOrigin===!0},e.subscribeForPush=function(e){o.debug("Called %c_subscribeForPush()",u.getConsoleStyle("code"));var t="";OneSignal.getNotificationPermission().then(function(e){t=e}).then(function(){return o.debug("Calling %cServiceWorkerRegistration.pushManager.subscribe()",u.getConsoleStyle("code")),r.default.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED),c.default.requestNotificationPermissionPromise()}).then(function(t){if("granted"!==t)throw new f.default;return u.timeoutPromise(e.pushManager.subscribe({userVisibleOnly:!0}),15e3)}).then(function(e){o.debug("Finished calling %cServiceWorkerRegistration.pushManager.subscribe()",u.getConsoleStyle("code")),o.debug("Subscription details:",e),OneSignal._sessionInitAlreadyRunning=!1,sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",window.Notification.permission),c.default.getAppId().then(function(t){o.debug("Finished subscribing for push via pushManager.subscribe().");var n={};if(e){if(void 0!==e.subscriptionId?n.endpointOrToken=e.subscriptionId:n.endpointOrToken=e.endpoint,e.getKey){var i=null;try{i=e.getKey("p256dh")}catch(e){}var r=null;try{r=e.getKey("auth")}catch(e){}if(i){var s=btoa(String.fromCharCode.apply(null,new Uint8Array(i)));n.p256dh=s}if(r){var a=btoa(String.fromCharCode.apply(null,new Uint8Array(r)));n.auth=a}}}else o.warn("Could not subscribe your browser for push notifications.");p.default.getWindowEnv()===h.WindowEnvironmentKind.OneSignalSubscriptionPopup?OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION,{subscriptionInfo:n},function(e){if(e.data.progress===!0){o.debug("Got message from host page that remote reg. is in progress, closing popup.");opener||parent;opener&&window.close()}else o.debug("Got message from host page that remote reg. could not be finished.")}):c.default.registerWithOneSignal(t,n)})}).catch(function(e){if(OneSignal._sessionInitAlreadyRunning=!1,e instanceof m.default&&o.error("A possible Chrome bug (https://bugs.chromium.org/p/chromium/issues/detail?id=623062) is preventing this subscription from completing."),"Registration failed - no sender id provided"===e.message||"Registration failed - manifest empty or missing"===e.message){if(document.querySelector("link[rel=manifest]")){var t=document.querySelector("link[rel=manifest]").parentNode.tagName.toLowerCase(),n=document.querySelector("link[rel=manifest]").outerHTML,i=document.querySelector("link[rel=manifest]").href;if("head"!==t)o.warn("OneSignal: Your manifest %c"+n,u.getConsoleStyle("code"),"must be referenced in the <head> tag to be detected properly. It is currently referenced in <${manifestParentTagname}>. Please see step 3.1 at https://documentation.onesignal.com/docs/web-push-sdk-setup-https.");else{var r=new URL(i).origin,s=location.origin;s!==r?o.warn("OneSignal: Your manifest is being served from "+r+", which is different from the current page's origin of "+s+". Please serve your manifest from the same origin as your page's. If you are using a content delivery network (CDN), please add an exception so that the manifest is not served by your CDN. WordPress users, please see https://documentation.onesignal.com/docs/troubleshooting-web-push#section-wordpress-cdn-support."):o.warn("OneSignal: Please check your manifest at "+i+". The %cgcm_sender_id",u.getConsoleStyle("code"),"field is missing or invalid, and a valid value is required. Please see step 2 at https://documentation.onesignal.com/docs/web-push-sdk-setup-https.")}}else"https:"===location.protocol&&o.warn("OneSignal: You must reference a %cmanifest.json",u.getConsoleStyle("code"),"in the <head> of your page. Please see step 2 at https://documentation.onesignal.com/docs/web-push-sdk-setup-https.")}else e instanceof f.default||o.error("Error while subscribing for push:",e);OneSignal.getNotificationPermission().then(function(e){"default"===e&&(d.default.triggerNotificationPermissionChanged(!0),g.default.markHttpsNativePromptDismissed()),OneSignal._usingNativePermissionHook||d.default.triggerNotificationPermissionChanged(),opener&&p.default.getWindowEnv()===h.WindowEnvironmentKind.OneSignalSubscriptionPopup&&window.close()}),opener&&p.default.getWindowEnv()===h.WindowEnvironmentKind.OneSignalSubscriptionPopup&&window.close()})},e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(42),s=n(61),a=n(66),u=n(39),c=n(64),l=n(65),d=n(7),f=n(37),g=n(3),p=n(41),h=n(6);!function(e){e[e.SET=0]="SET"}(i||(i={}));var m=function(){function e(e){this.databaseName=e,this.emitter=new f.default,this.database=new r.default(this.databaseName)}return e.applyDbResultFilter=function(e,t,n){switch(e){case"Options":return n&&t?n.value:n&&!t?n:null;case"Ids":return n&&t?n.id:n&&!t?n:null;case"NotificationOpened":return n&&t?{data:n.data,timestamp:n.timestamp}:n&&!t?n:null;default:return n?n:null}},e.prototype.get=function(t,n){return o.__awaiter(this,void 0,void 0,function(){var i=this;return o.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(r){return o.__awaiter(i,void 0,void 0,function(){var i,s;return o.__generator(this,function(o){switch(o.label){case 0:return g.default.getWindowEnv()!==h.WindowEnvironmentKind.ServiceWorker&&d.default.isUsingSubscriptionWorkaround()&&g.default.getTestEnv()===p.TestEnvironmentKind.None?(OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET,[{table:t,key:n}],function(e){var t=e.data[0];r(t)}),[3,3]):[3,1];case 1:return[4,this.database.get(t,n)];case 2:i=o.sent(),s=e.applyDbResultFilter(t,n,i),r(s),o.label=3;case 3:return[2]}})})})];case 1:return[2,r.sent()]}})})},e.prototype.put=function(t,n){return o.__awaiter(this,void 0,void 0,function(){var i=this;return o.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(e,r){return o.__awaiter(i,void 0,void 0,function(){return o.__generator(this,function(i){switch(i.label){case 0:return g.default.getWindowEnv()!==h.WindowEnvironmentKind.ServiceWorker&&d.default.isUsingSubscriptionWorkaround()&&g.default.getTestEnv()===p.TestEnvironmentKind.None?(OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT,[{table:t,keypath:n}],function(i){i.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():r("(Database) Attempted remote IndexedDB put("+t+", "+n+"), but did not get success response.")}),[3,3]):[3,1];case 1:return[4,this.database.put(t,n)];case 2:i.sent(),e(),i.label=3;case 3:return[2]}})})})];case 1:return r.sent(),this.emitter.emit(e.EVENTS.SET,n),[2]}})})},e.prototype.remove=function(e,t){return g.default.getWindowEnv()!==h.WindowEnvironmentKind.ServiceWorker&&d.default.isUsingSubscriptionWorkaround()&&g.default.getTestEnv()===p.TestEnvironmentKind.None?new Promise(function(n,i){OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE,[{table:e,keypath:t}],function(o){o.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?n():i("(Database) Attempted remote IndexedDB remove("+e+", "+t+"), but did not get success response.")})}):this.database.remove(e,t)},e.prototype.getAppConfig=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r;return o.__generator(this,function(o){switch(o.label){case 0:return e=new u.AppConfig,t=e,[4,this.get("Ids","appId")];case 1:return t.appId=o.sent(),n=e,[4,this.get("Options","subdomain")];case 2:return n.subdomain=o.sent(),i=e,[4,this.get("Options","autoRegister")];case 3:return i.autoRegister=o.sent(),r=e,[4,this.get("Options","serviceWorkerConfig")];case 4:return r.serviceWorkerConfig=o.sent(),[2,e]}})})},e.prototype.setAppConfig=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.appId?[4,this.put("Ids",{type:"appId",id:e.appId})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.subdomain?[4,this.put("Options",{key:"subdomain",value:e.subdomain})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.autoRegister?[4,this.put("Options",{key:"autoRegister",value:e.autoRegister})]:[3,6];case 5:t.sent(),t.label=6;case 6:return e.serviceWorkerConfig?[4,this.put("Options",{key:"serviceWorkerConfig",value:e.serviceWorkerConfig})]:[3,8];case 7:t.sent(),t.label=8;case 8:return e.httpUseOneSignalCom?[4,this.put("Options",{key:"httpUseOneSignalCom",value:!0})]:[3,10];case 9:return t.sent(),[3,12];case 10:return[4,this.put("Options",{key:"httpUseOneSignalCom",value:!1})];case 11:t.sent(),t.label=12;case 12:return[2]}})})},e.prototype.getAppState=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r;return o.__generator(this,function(o){switch(o.label){case 0:return e=new s.AppState,t=e,[4,this.get("Options","defaultUrl")];case 1:return t.defaultNotificationUrl=o.sent(),n=e,[4,this.get("Options","defaultTitle")];case 2:return n.defaultNotificationTitle=o.sent(),i=e,[4,this.get("Options","isPushEnabled")];case 3:return i.lastKnownPushEnabled=o.sent(),r=e,[4,this.get("NotificationOpened")];case 4:return r.clickedNotifications=o.sent(),[2,e]}})})},e.prototype.setAppState=function(e){return o.__awaiter(this,void 0,void 0,function(){var t,n,i,r,s;return o.__generator(this,function(o){switch(o.label){case 0:return e.defaultNotificationUrl?[4,this.put("Options",{key:"defaultUrl",value:e.defaultNotificationUrl})]:[3,2];case 1:o.sent(),o.label=2;case 2:return e.defaultNotificationTitle||""===e.defaultNotificationTitle?[4,this.put("Options",{key:"defaultTitle",value:e.defaultNotificationTitle})]:[3,4];case 3:o.sent(),o.label=4;case 4:return null==e.lastKnownPushEnabled?[3,6]:[4,this.put("Options",{key:"isPushEnabled",value:e.lastKnownPushEnabled})];case 5:o.sent(),o.label=6;case 6:if(!e.clickedNotifications)return[3,12];t=Object.keys(e.clickedNotifications),n=0,i=t,o.label=7;case 7:return n<i.length?(r=i[n],s=e.clickedNotifications[r],s?[4,this.put("NotificationOpened",{url:r,data:s.data,timestamp:s.timestamp})]:[3,9]):[3,12];case 8:return o.sent(),[3,11];case 9:return null!==s?[3,11]:[4,this.remove("NotificationOpened",r)];case 10:o.sent(),o.label=11;case 11:return n++,[3,7];case 12:return[2]}})})},e.prototype.getServiceWorkerConfig=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r;return o.__generator(this,function(o){switch(o.label){case 0:return e=new c.ServiceWorkerConfig,t=e,[4,this.get("Options","workerScope")];case 1:return t.scope=o.sent(),n=e,[4,this.get("Options","workerName")];case 2:return n.workerName=o.sent(),i=e,[4,this.get("Options","updaterWorkerName")];case 3:return i.updaterWorkerName=o.sent(),r=e,[4,this.get("Options","workerFilePath")];case 4:return r.workerFilePath=o.sent(),[2,e]}})})},e.prototype.setServiceWorkerConfig=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.scope?[4,this.put("Options",{key:"workerScope",value:e.scope})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.workerName?[4,this.put("Options",{key:"workerName",value:e.workerName})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.updaterWorkerName?[4,this.put("Options",{key:"updaterWorkerName",value:e.updaterWorkerName})]:[3,6];case 5:t.sent(),t.label=6;case 6:return e.workerFilePath?[4,this.put("Options",{key:"workerFilePath",value:e.workerFilePath})]:[3,8];case 7:t.sent(),t.label=8;case 8:return[2]}})})},e.prototype.getServiceWorkerState=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i;return o.__generator(this,function(o){switch(o.label){case 0:return e=new l.ServiceWorkerState,t=e,[4,this.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION")];case 1:return t.workerVersion=o.sent(),n=e,[4,this.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION")];case 2:return n.updaterWorkerVersion=o.sent(),i=e,[4,this.get("Ids","backupNotification")];case 3:return i.backupNotification=o.sent(),[2,e]}})})},e.prototype.setServiceWorkerState=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.workerVersion?[4,this.put("Ids",{type:"WORKER1_ONE_SIGNAL_SW_VERSION",id:e.workerVersion})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.updaterWorkerVersion?[4,this.put("Ids",{type:"WORKER2_ONE_SIGNAL_SW_VERSION",id:e.updaterWorkerVersion})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.backupNotification?[4,this.put("Ids",{type:"backupNotification",id:e.backupNotification})]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}})})},e.prototype.getSubscription=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r,s;return o.__generator(this,function(o){switch(o.label){case 0:return e=new a.Subscription,t=e,[4,this.get("Ids","userId")];case 1:return t.deviceId=o.sent(),n=e,[4,this.get("Options","subscriptionEndpoint")];case 2:return n.pushEndpoint=o.sent(),i=e,[4,this.get("Ids","registrationId")];case 3:return i.pushToken=o.sent(),[4,this.get("Options","optedOut")];case 4:return r=o.sent(),[4,this.get("Options","subscription")];case 5:return s=o.sent(),e.optedOut=null!=r?r:null!=s&&!s,[2,e]}})})},e.prototype.setSubscription=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.deviceId?[4,this.put("Ids",{type:"userId",id:e.deviceId})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.pushEndpoint?[4,this.put("Options",{key:"subscriptionEndpoint",value:e.pushEndpoint})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.pushToken?[4,this.put("Ids",{type:"registrationId",id:e.pushToken})]:[3,6];case 5:t.sent(),t.label=6;case 6:return null==e.optedOut?[3,8]:[4,this.put("Options",{key:"optedOut",value:e.optedOut})];case 7:t.sent(),t.label=8;case 8:return[2]}})})},e.rebuild=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return e.ensureSingletonInstance(),[2,Promise.all([e.databaseInstance.remove("Ids"),e.databaseInstance.remove("NotificationOpened"),e.databaseInstance.remove("Options")])]})})},e.ensureSingletonInstance=function(){e.databaseInstanceName||(e.databaseInstanceName="ONE_SIGNAL_SDK_DB"),e.databaseInstance||(e.databaseInstance=new e(e.databaseInstanceName))},e.on=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.emitter.on.apply(e.databaseInstance.emitter,t)]})})},e.setSubscription=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setSubscription.apply(e.databaseInstance,t)]})})},e.getSubscription=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getSubscription.apply(e.databaseInstance,t)]})})},e.setServiceWorkerState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setServiceWorkerState.apply(e.databaseInstance,t)]})})},e.getServiceWorkerState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getServiceWorkerState.apply(e.databaseInstance,t)]})})},e.setServiceWorkerConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setServiceWorkerConfig.apply(e.databaseInstance,t)]})})},e.getServiceWorkerConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getServiceWorkerConfig.apply(e.databaseInstance,t)]})})},e.setAppState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setAppState.apply(e.databaseInstance,t)]})})},e.getAppState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getAppState.apply(e.databaseInstance,t)]})})},e.setAppConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setAppConfig.apply(e.databaseInstance,t)]})})},e.getAppConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getAppConfig.apply(e.databaseInstance,t)]})})},e.remove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.remove.apply(e.databaseInstance,t)]})})},e.put=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.put.apply(e.databaseInstance,t)]})})},e.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.get.apply(e.databaseInstance,t)]})})},e}();m.EVENTS=i,t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isBrowser=function(){return"undefined"!=typeof window},e.version=function(){return"130040"},Object.defineProperty(e,"TRADITIONAL_CHINESE_LANGUAGE_TAG",{get:function(){return["tw","hant"]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SIMPLIFIED_CHINESE_LANGUAGE_TAG",{get:function(){return["cn","hans"]},enumerable:!0,configurable:!0}),e.getLanguage=function(t){var n=t||navigator.language;if(n){n=n.toLowerCase();var i=n.split("-");if("zh"==i[0]){for(var o=0,r=e.TRADITIONAL_CHINESE_LANGUAGE_TAG;o<r.length;o++){var s=r[o];if(i.indexOf(s)!==-1)return"zh-Hant"}for(var a=0,u=e.SIMPLIFIED_CHINESE_LANGUAGE_TAG;a<u.length;a++){var c=u[a];if(i.indexOf(c)!==-1)return"zh-Hans"}return"zh-Hant"}return i[0].substring(0,2)}return"en"},e.supportsServiceWorkers=function(){return"undefined"!=typeof navigator&&"serviceWorker"in navigator},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(81),r=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t}(o);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(9),r=n(17),s=n(1),a=n(4),u=n(8),c=n(12),l=n(2),d=n(5),f=n(28),g=n(27),p=n(59),h=n(18),m=n(7),v=n(14),b=n(15),S=n(3),_=n(6),y=function(){function e(){}return e.fixWordpressManifestIfMisplaced=function(){var e=document.querySelectorAll("link[rel=manifest]");if(e&&!(e.length<=1))for(var t=0;t<e.length;t++){var n=e[t],i=n.href;l.contains(i,"gcm_sender_id")&&(document.querySelector("head").insertBefore(n,document.querySelector("head").children[0]),s.info("OneSignal: Moved the WordPress push <manifest> to the first element in <head>."))}},e.getNotificationTypeFromOptIn=function(e){return 1==e||null==e?1:-2},e.getNotificationPermission=function(e){return l.awaitOneSignalInitAndSupported().then(function(){return new Promise(function(t,n){m.default.isUsingSubscriptionWorkaround()?OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION,{safariWebId:e},function(e){var n=e.data;t(n)}):c.safari?e?t(window.safari.pushNotification.permission(e).permission):s.debug("OneSignal: Invalid init option safari_web_id %c"+e,l.getConsoleStyle("code"),". Please pass in a valid safari_web_id to OneSignal init."):t(window.Notification.permission)})})},e.beginTemporaryBrowserSession=function(){s.debug("OneSignal: Marking browser session as continuing."),sessionStorage.setItem("ONE_SIGNAL_SESSION","true"),S.default.getWindowEnv()===_.WindowEnvironmentKind.OneSignalSubscriptionPopup&&OneSignal.subscriptionPopup&&OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION)},e.isUsingHttpPermissionRequest=function(){return OneSignal.config.httpPermissionRequest&&1==OneSignal.config.httpPermissionRequest.enable&&(S.default.getWindowEnv()===_.WindowEnvironmentKind.OneSignalProxyFrame||S.default.getWindowEnv()===_.WindowEnvironmentKind.Host&&m.default.isUsingSubscriptionWorkaround())},e.isUsingCustomHttpPermissionRequestPostModal=function(){return OneSignal.config.httpPermissionRequest&&1==OneSignal.config.httpPermissionRequest.useCustomModal},e.wasHttpsNativePromptDismissed=function(){return"dismissed"===g.get("onesignal-notification-prompt")},e.markHttpPopoverShown=function(){sessionStorage.setItem("ONESIGNAL_HTTP_PROMPT_SHOWN","true")},e.isHttpPromptAlreadyShown=function(){return"true"==sessionStorage.getItem("ONESIGNAL_HTTP_PROMPT_SHOWN")},e.isContinuingBrowserSession=function(){return"true"==sessionStorage.getItem("ONE_SIGNAL_SESSION")},e.registerWithOneSignal=function(t,n){var i=l.getDeviceTypeForBrowser();return Promise.all([OneSignal.getUserId(),OneSignal.getSubscription()]).then(function(s){var a=s[0],l=s[1],d=a?"players/"+a+"/on_session":"players",f={app_id:t,device_type:i,language:o.default.getLanguage(),timezone:(new Date).getTimezoneOffset()*-60,device_model:navigator.platform+" "+c.name,device_os:c.version,sdk:OneSignal._VERSION,notification_types:e.getNotificationTypeFromOptIn(l)};if(n){f.identifier=n.endpointOrToken;var g=n.endpointOrToken.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");u.default.put("Ids",{type:"registrationId",id:g}),n.auth&&(f.web_auth=n.auth),n.p256dh&&(f.web_p256=n.p256dh)}return r.default.post(d,f)}).then(function(t){var n=t.id;if(e.beginTemporaryBrowserSession(),n)return u.default.put("Ids",{type:"userId",id:n})}).then(function(){a.default.trigger(OneSignal.EVENTS.REGISTERED),m.default.isUsingSubscriptionWorkaround()||v.default.checkAndTriggerSubscriptionChanged()})},e.checkAndTriggerNotificationPermissionChanged=function(){Promise.all([u.default.get("Options","notificationPermission"),OneSignal.getNotificationPermission()]).then(function(e){var t=e[0],n=e[1];t!==n&&v.default.triggerNotificationPermissionChanged().then(function(){return u.default.put("Options",{key:"notificationPermission",value:n})})})},e.requestNotificationPermissionPromise=function(){return new Promise(function(e){return window.Notification.requestPermission(e)})},e.showNotifyButton=function(){o.default.isBrowser()&&!OneSignal.notifyButton&&(OneSignal.config.notifyButton=OneSignal.config.notifyButton||{},OneSignal.config.bell&&(d(OneSignal.config.bell,OneSignal.config.notifyButton),d(OneSignal.config.notifyButton,OneSignal.config.bell)),OneSignal.config.notifyButton.displayPredicate&&"function"==typeof OneSignal.config.notifyButton.displayPredicate?Promise.resolve(OneSignal.config.notifyButton.displayPredicate()).then(function(e){e!==!1?(OneSignal.notifyButton=new h.default(OneSignal.config.notifyButton),OneSignal.notifyButton.create()):s.debug("Notify button display predicate returned false so not showing the notify button.")}):(OneSignal.notifyButton=new h.default(OneSignal.config.notifyButton),OneSignal.notifyButton.create()))},e.checkAndDoHttpPermissionRequest=function(){var e=this;s.debug("Called %ccheckAndDoHttpPermissionRequest()",l.getConsoleStyle("code")),this.isUsingHttpPermissionRequest()&&(OneSignal.config.autoRegister?OneSignal.showHttpPermissionRequest({_sdkCall:!0}).then(function(t){"granted"!==t||e.isUsingCustomHttpPermissionRequestPostModal()||(s.debug("Showing built-in post HTTP permission request in-page modal because permission is granted and not using custom modal."),e.showHttpPermissionRequestPostModal(OneSignal.config.httpPermissionRequest))}):a.default.trigger(OneSignal.EVENTS.TEST_INIT_OPTION_DISABLED))},e.getNotificationIcons=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,e.getAppId()];case 1:if(!(t=i.sent()))throw new b.InvalidStateError(b.InvalidStateReason.MissingAppId);return n=S.default.getOneSignalApiUrl().toString()+"/apps/"+t+"/icon",[4,fetch(n)];case 2:return o=i.sent(),[4,o.json()];case 3:if(r=i.sent(),r.errors)throw s.error("API call %c"+n,l.getConsoleStyle("code"),"failed with:",r.errors),new Error("Failed to get notification icons.");return[2,r]}})})},e.establishServiceWorkerChannel=function(e){OneSignal._channel&&(OneSignal._channel.off("data"),OneSignal._channel.off("notification.displayed"),OneSignal._channel.off("notification.clicked")),OneSignal._channel=f.at(e?e.active:null),OneSignal._channel.on("data",function(e,t){s.debug("%c"+l.capitalize(S.default.getWindowEnv().toString())+" ⬸ ServiceWorker:",l.getConsoleStyle("serviceworkermessage"),t,e)}),OneSignal._channel.on("notification.displayed",function(e,t){a.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISPLAYED,t)}),OneSignal._channel.on("notification.clicked",function(e,t){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(n){switch(n.label){case 0:return 0!==OneSignal.getListeners(OneSignal.EVENTS.NOTIFICATION_CLICKED).length?[3,2]:(s.debug("notification.clicked event received, but no event listeners; storing event in IndexedDb for later retrieval."),e=t.url,t.url||(e=location.href),[4,u.default.put("NotificationOpened",{url:e,data:t,timestamp:Date.now()})]);case 1:return n.sent(),[3,3];case 2:a.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED,t),n.label=3;case 3:return[2]}})})}),OneSignal._channel.on("command.redirect",function(e,t){s.debug(S.default.getWindowEnv().toString()+" Picked up command.redirect to "+t+", forwarding to host page."),OneSignal.proxyFrameHost&&OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.SERVICEWORKER_COMMAND_REDIRECT,t)}),OneSignal._channel.on("notification.dismissed",function(e,t){a.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISMISSED,t)})},e.getPromptOptionsQueryString=function(){var t=OneSignal.config.promptOptions,n="";if(t)for(var i=e.getPromptOptionsPostHash(),o=0,r=Object.keys(i);o<r.length;o++){var s=r[o],a=i[s];n+="&"+s+"="+a}return n},e.showHttpPermissionRequestPostModal=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.dynamicResourceLoader.loadSdkStylesheet()];case 1:return 0!==(t=n.sent())?(s.debug("Not showing HTTP permission request post-modal because styles failed to load."),[2]):(OneSignal.httpPermissionRequestPostModal=new p.default(e),OneSignal.httpPermissionRequestPostModal.create(),[2])}})})},e.getPromptOptionsPostHash=function(){var e=OneSignal.config.promptOptions;if(e){for(var t={exampleNotificationTitleDesktop:"exampleNotificationTitle",exampleNotificationMessageDesktop:"exampleNotificationMessage",exampleNotificationTitleMobile:"exampleNotificationTitle",exampleNotificationMessageMobile:"exampleNotificationMessage"},n=0,i=Object.keys(t);n<i.length;n++){var o=i[n],r=t[o];e[o]&&(e[r]=e[o])}for(var s=["autoAcceptTitle","siteName","autoAcceptTitle","subscribeText","showGraphic","actionMessage","exampleNotificationTitle","exampleNotificationMessage","exampleNotificationCaption","acceptButtonText","cancelButtonText","timeout"],a={},u=0;u<s.length;u++){var c=s[u],l=e[c],d=encodeURIComponent(l);(l||l===!1||""===l)&&(a[c]=d)}}return a},e.triggerCustomPromptClicked=function(e){a.default.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,{result:e})},e.getAppId=function(){return OneSignal.config.appId?Promise.resolve(OneSignal.config.appId):u.default.get("Ids","appId")},e}();t.default=y},function(e,t,n){!function(t,i){void 0!==e&&e.exports?e.exports=i():n(93)("bowser",i)}(0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var n,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),r=!o&&/android/i.test(e),a=/nexus\s*[0-6]\s*/i.test(e),u=!a&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),l=/silk/i.test(e),d=/sailfish/i.test(e),f=/tizen/i.test(e),g=/(web|hpw)os/i.test(e),p=/windows phone/i.test(e),h=(/SamsungBrowser/i.test(e),!p&&/windows/i.test(e)),m=!i&&!l&&/macintosh/i.test(e),v=!r&&!d&&!f&&!g&&/linux/i.test(e),b=t(/edge\/(\d+(\.\d+)?)/i),S=t(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(e),y=!_&&/[^-]mobi/i.test(e),O=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:s,version:S||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||S}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:s,version:S||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:s,version:S||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:s,version:S||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(n={name:"Windows Phone",windowsphone:s},b?(n.msedge=s,n.version=b):(n.msie=s,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?n={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:s,version:b}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||S}:d?n={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=s)):l?n={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:s,version:S||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:g?(n={name:"WebOS",webos:s,version:S||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=s)):/bada/i.test(e)?n={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:f?n={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||S}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||S}:/chromium/i.test(e)?n={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||S}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?n={name:"Android",version:S}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:s},S&&(n.version=S)):i?(n={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},S&&(n.version=S)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||S}:{name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=s):(n.name=n.name||"Webkit",n.webkit=s),!n.version&&S&&(n.version=S)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=s,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.msedge||!r&&!n.silk?i?(n[i]=s,n.ios=s):m?n.mac=s:O?n.xbox=s:h?n.windows=s:v&&(n.linux=s):n.android=s;var w="";n.windowsphone?w=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(w=t(/os (\d+([_\s]\d+)*) like mac os x/i),w=w.replace(/[_\s]/g,".")):r?w=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?w=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?w=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?w=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(w=t(/tizen[\/\s](\d+(\.\d+)*)/i)),w&&(n.osversion=w);var E=w.split(".")[0];return _||u||"ipad"==i||r&&(3==E||E>=4&&!y)||n.silk?n.tablet=s:(y||"iphone"==i||"ipod"==i||r||a||n.blackberry||n.webos||n.bada)&&(n.mobile=s),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=s:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=s:n.x=s,n}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),o=n(e,function(e){var o=i-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(o[0][i]>o[1][i])return 1;if(o[0][i]!==o[1][i])return-1;if(0===i)return 0}}function o(t,n,o){var r=a;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(r=e(o));var s=""+r.version;for(var u in t)if(t.hasOwnProperty(u)&&r[u])return i([s,t[u]])<0;return n}function r(e,t,n){return!o(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=i,a.check=r,a._detect=e,a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(46),r=n(44),s=n(9),a=n(5),u=n(1),c=n(19),l=n(3),d=function(){function e(e,t,n){if(this.windowReference=e,this.sendToOrigin=t,this.receiveFromOrigin=n,!window||!window.postMessage)throw new Error("Must pass in a valid window reference supporting postMessage():"+e);if(!t||!n)throw new Error("Invalid origin. Must be set.");r.merge(this,new o),this.channel=new MessageChannel,this.messagePort=null,this.isListening=!1,this.isConnected=!1,this.replies={}}return Object.defineProperty(e,"HANDSHAKE_MESSAGE",{get:function(){return"onesignal.postmam.handshake"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CONNECTED_MESSAGE",{get:function(){return"onesignal.postmam.connected"},enumerable:!0,configurable:!0}),e.prototype.listen=function(){if(u.debug("(Postmam) Called listen()."),this.isListening)return void u.debug("(Postmam) Already listening for Postmam connections.");s.default.isBrowser()&&(this.isListening=!0,u.debug("(Postmam) Listening for Postmam connections.",this),window.addEventListener("message",this.onWindowMessagePostmanConnectReceived.bind(this)))},e.prototype.startPostMessageReceive=function(){window.addEventListener("message",this.onWindowPostMessageReceived.bind(this))},e.prototype.stopPostMessageReceive=function(){window.removeEventListener("message",this.onWindowPostMessageReceived)},e.prototype.destroy=function(){this.stopPostMessageReceive(),this.removeEvent()},e.prototype.onWindowPostMessageReceived=function(t){if(this.isSafeOrigin(t.origin)){var n=t.data,i=n.id,o=n.command,r=n.data,s=n.source;if(o===e.CONNECTED_MESSAGE)return this.emit("connect"),void(this.isConnected=!0);var c={id:i,command:o,data:r,source:s},l=a({reply:this.reply.bind(this,c)},c);if(this.replies.hasOwnProperty(i)){u.info("(Postmam) This message is a reply.");this.replies[i].bind(window)(l)===!1&&delete this.replies[i]}else this.emit(o,l)}},e.prototype.onWindowMessagePostmanConnectReceived=function(t){if(u.debug("(Postmam) ("+l.default.getWindowEnv().toString()+") Window postmessage for Postman connect received:",t),this.isSafeOrigin(t.origin)){if(t.data.handshake!==e.HANDSHAKE_MESSAGE)return void u.info("(Postmam) Got a postmam message, but not our expected handshake:",t.data);u.info("(Postmam) Got our expected Postmam handshake message (and connecting...):",t.data),window.removeEventListener("message",this.onWindowMessagePostmanConnectReceived),this.messagePort=t.ports[0],this.messagePort.addEventListener("message",this.onMessageReceived.bind(this),!1),u.info("(Postmam) Removed previous message event listener for handshakes, replaced with main message listener."),this.messagePort.start(),this.isConnected=!0,u.info("(Postmam) ("+l.default.getWindowEnv().toString()+") Connected."),this.message(e.CONNECTED_MESSAGE),this.emit("connect")}},e.prototype.connect=function(){u.info("(Postmam) ("+l.default.getWindowEnv().toString()+") Establishing a connection to "+this.sendToOrigin+"."),this.messagePort=this.channel.port1,this.messagePort.addEventListener("message",this.onMessageReceived.bind(this),!1),this.messagePort.start(),this.windowReference.postMessage({handshake:e.HANDSHAKE_MESSAGE},this.sendToOrigin,[this.channel.port2])},e.prototype.onMessageReceived=function(t){if(!t.data)return void u.debug("("+l.default.getWindowEnv().toString()+") Received an empty Postmam message:",t);var n=t.data,i=n.id,o=n.command,r=n.data,s=n.source;if(o===e.CONNECTED_MESSAGE)return this.emit("connect"),void(this.isConnected=!0);var c={id:i,command:o,data:r,source:s},d=a({reply:this.reply.bind(this,c)},c);if(this.replies.hasOwnProperty(i)){this.replies[i].bind(window)(d)===!1&&delete this.replies[i]}else this.emit(o,d)},e.prototype.reply=function(e,t,n){var i={id:e.id,command:e.command,data:t,source:l.default.getWindowEnv().toString(),isReply:!0};"function"==typeof n&&(this.replies[i.id]=n),this.messagePort.postMessage(i)},e.prototype.postMessage=function(e,t,n){if(!e||""==e)throw new Error("(Postmam) Postmam command must not be empty.");if("function"==typeof t)return void u.debug("You passed a function to data, did you mean to pass null?");var i={id:c.Uuid.generate(),command:e,data:t,source:l.default.getWindowEnv().toString()};"function"==typeof n&&(this.replies[i.id]=n),this.windowReference.postMessage(i,"*")},e.prototype.message=function(e,t,n){if(!e||""==e)throw new Error("(Postmam) Postmam command must not be empty.");if("function"==typeof t)return void u.debug("You passed a function to data, did you mean to pass null?");var i={id:c.Uuid.generate(),command:e,data:t,source:l.default.getWindowEnv().toString()};"function"==typeof n&&(this.replies[i.id]=n),this.messagePort.postMessage(i)},e.prototype.generateSafeOrigins=function(e){var t=[e];try{var n=new URL(e),i=n.host.replace("www.","");"https:"===n.protocol?(t.push("https://"+i),t.push("https://www."+i)):"http:"===n.protocol&&(t.push("http://"+i),t.push("http://www."+i),t.push("https://"+i),t.push("https://www."+i))}catch(e){}return t},e.prototype.isSafeOrigin=function(e){if(OneSignal.config)var t=OneSignal.config.subdomainName;else var t="x";var n=this.generateSafeOrigins(this.receiveFromOrigin);return"https://onesignal.com"===e||e==="https://"+(t||"")+".onesignal.com"||e==="https://"+(t||"")+".os.tc"||e==="https://"+(t||"")+".os.tc:3001"||e===l.default.getOneSignalApiUrl().origin||"*"===this.receiveFromOrigin||i.contains(n,e)},e.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.once=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(17),r=n(1),s=n(16),a=n(4),u=n(8),c=n(2),l=n(11),d=function(){function e(){}return e.onNotificationPermissionChange=function(t){e.checkAndTriggerSubscriptionChanged()},e.onInternalSubscriptionSet=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){return s.default.put("subscription.optedOut",e),[2]})})},e.checkAndTriggerSubscriptionChanged=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,s;return i.__generator(this,function(i){switch(i.label){case 0:return c.logMethodCall("checkAndTriggerSubscriptionChanged"),[4,OneSignal.isPushNotificationsEnabled()];case 1:return t=i.sent(),[4,u.default.getAppState()];case 2:return n=i.sent(),(o=n.lastKnownPushEnabled,s=null===o||t!==o)?(r.info("The user's subscription state changed from "+(null===o?"(not stored)":o)+" ⟶ "+t),n.lastKnownPushEnabled=t,[4,u.default.setAppState(n)]):[2];case 3:return i.sent(),e.triggerSubscriptionChanged(t),[2]}})})},e._onSubscriptionChanged=function(e){if(OneSignal.__doNotShowWelcomeNotification)return void r.debug("Not showing welcome notification because user state was reset.");e===!0&&Promise.all([OneSignal.getUserId(),l.default.getAppId()]).then(function(e){var t=e[0],n=e[1],i=OneSignal.config.welcomeNotification,s=void 0!==i&&i.disable===!0,u=void 0!==i&&void 0!==i.title&&null!==i.title?i.title:"",l=void 0!==i&&void 0!==i.message&&null!==i.message&&i.message.length>0?i.message:"Thanks for subscribing!",d=new URL(location.href).origin+"?_osp=do_not_open",f=i&&i.url&&i.url.length>0?i.url:d;u=c.decodeHtmlEntities(u),l=c.decodeHtmlEntities(l),s||(r.debug("Sending welcome notification."),o.default.sendNotification(n,[t],{en:u},{en:l},f,null,{__isOneSignalWelcomeNotification:!0},void 0),a.default.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,{title:u,message:l,url:f}))})},e.triggerNotificationPermissionChanged=function(e){void 0===e&&(e=!1);var t,n;return Promise.all([OneSignal.getNotificationPermission(),u.default.get("Options","notificationPermission")]).then(function(i){var o=i[0],r=i[1];if(t=o,n=o!==r||e)return u.default.put("Options",{key:"notificationPermission",value:o})}).then(function(){n&&a.default.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,{to:t})})},e.triggerSubscriptionChanged=function(e){a.default.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,e)},e.fireStoredNotificationClicks=function(e){return void 0===e&&(e=document.URL),i.__awaiter(this,void 0,void 0,function(){function t(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,u.default.getAppState()];case 1:return t=i.sent(),t.clickedNotifications[e.url]=null,[4,u.default.setAppState(t)];case 2:return i.sent(),(n=e.data,o=e.timestamp,o&&(r=(Date.now()-o)/1e3/60)>5)?[2]:(a.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED,n),[2])}})})}var n,o,r,s,c,l,d,f;return i.__generator(this,function(i){switch(i.label){case 0:return[4,u.default.getAppState()];case 1:return n=i.sent(),[4,u.default.get("Options","notificationClickHandlerMatch")];case 2:if("origin"!==(o=i.sent()))return[3,7];r=0,s=Object.keys(n.clickedNotifications),i.label=3;case 3:return r<s.length?(c=s[r],new URL(c).origin!==location.origin?[3,5]:(l=n.clickedNotifications[c],[4,t(l)])):[3,6];case 4:i.sent(),i.label=5;case 5:return r++,[3,3];case 6:return[3,11];case 7:return d=n.clickedNotifications[e],d?[4,t(d)]:[3,9];case 8:return i.sent(),[3,11];case 9:return d||!e.endsWith("/")?[3,11]:(f=e.substring(0,e.length-1),d=n.clickedNotifications[f],d?[4,t(d)]:[3,11]);case 10:i.sent(),i.label=11;case 11:return[2]}})})},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(10),s=n(40);!function(e){e[e.MissingAppId=0]="MissingAppId",e[e.RedundantPermissionMessage=1]="RedundantPermissionMessage",e[e.PushPermissionAlreadyGranted=2]="PushPermissionAlreadyGranted",e[e.UnsupportedEnvironment=3]="UnsupportedEnvironment",e[e.MissingDomElement=4]="MissingDomElement"}(i=t.InvalidStateReason||(t.InvalidStateReason={}));var InvalidStateError=function(e){function InvalidStateError(t,n){var o=this;switch(t){case i.MissingAppId:o=e.call(this,"Missing required app ID.")||this;break;case i.RedundantPermissionMessage:var r="";n.permissionPromptType&&(r="("+s.PermissionPromptType[n.permissionPromptType]+")"),o=e.call(this,"Another permission message "+r+" is being displayed.")||this;break;case i.PushPermissionAlreadyGranted:o=e.call(this,"Push permission has already been granted.")||this;break;case i.UnsupportedEnvironment:o=e.call(this,"The current environment does not support this operation.")||this}return o.description=i[t],o.reason=t,o}return o.__extends(InvalidStateError,e),InvalidStateError}(r.default);t.InvalidStateError=InvalidStateError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.put=function(t,n){return void 0===e.store[t]&&(e.store[t]=[null,null]),e.store[t].push(n),e.store[t].length==e.LIMIT+1&&e.store[t].shift(),e.store[t]},e.get=function(t){return void 0===e.store[t]&&(e.store[t]=[null,null]),e.store[t]},e.getFirst=function(t){return e.get(t)[0]},e.getLast=function(t){return e.get(t)[1]},e.remove=function(t){delete e.store[t]},e.isEmpty=function(t){var n=e.get(t);return null===n[0]&&null===n[1]},e}();i.store={},i.LIMIT=2,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(2),s=n(5),a=n(9),u=n(39),c=n(3),l=n(83),d=function(){function e(){}return e.get=function(t,n,i){return e.call("GET",t,n,i)},e.post=function(t,n,i){return e.call("POST",t,n,i)},e.put=function(t,n,i){return e.call("PUT",t,n,i)},e.delete=function(t,n,i){return e.call("DELETE",t,n,i)},e.call=function(t,n,i,o){var r=new Headers;if(r.append("SDK-Version","onesignal/web/"+a.default.version()),r.append("Content-Type","application/json;charset=UTF-8"),o)for(var s=0,u=Object.keys(o);s<u.length;s++){var l=u[s];r.append(l,o[l])}var d={method:t||"NO_METHOD_SPECIFIED",headers:r,cache:"no-cache"};i&&(d.body=JSON.stringify(i));var f;return fetch(c.default.getOneSignalApiUrl().toString()+"/"+n,d).then(function(e){return f=e.status,e.json()}).then(function(t){return f>=200&&f<300?t:"no-user-id-error"!==e.identifyError(t)?Promise.reject(t):void 0})},e.identifyError=function(e){if(!e||!e.errors)return"no-error";var t=e.errors;return r.contains(t,"No user with this id found")||r.contains(t,"Could not find app_id for given player id.")?"no-user-id-error":"unknown-error"},e.getUserIdFromSubscriptionIdentifier=function(t,n,i){return e.post("players",{app_id:t,device_type:n,identifier:i}).then(function(e){return e&&e.id?e.id:null}).catch(function(e){return o.debug("Error getting user ID from subscription identifier:",e),null})},e.getPlayer=function(t,n){return e.get("players/"+n+"?app_id="+t)},e.updatePlayer=function(t,n,i){return e.put("players/"+n,s({app_id:t},i))},e.sendNotification=function(t,n,i,o,s,a,u,c){var l={app_id:t,contents:o,include_player_ids:n,isAnyWeb:!0,data:u,web_buttons:c};return i&&(l.headings=i),s&&(l.url=s),a&&(l.chrome_web_icon=a,l.firefox_icon=a),r.trimUndefined(l),e.post("notifications",l)},e.getAppConfig=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,new Promise(function(t,n){l(c.default.getOneSignalApiUrl().toString()+"/sync/"+e.value+"/web",null,function(e,i){e?n(e):i.success?t(i):n(i)})})];case 1:return t=i.sent(),n=new u.AppConfig,t.features&&t.features.cookie_sync&&t.features.cookie_sync.enable&&(n.cookieSyncEnabled=!0),t.config&&(t.config.http_use_onesignal_com&&(n.httpUseOneSignalCom=!0),t.config.safari_web_id&&(n.safariWebId=t.config.safari_web_id),t.config.subdomain&&(n.subdomain=t.config.subdomain)),[2,n];case 2:throw o=i.sent();case 3:return[2]}})})},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(1),s=n(4),a=n(12),u=n(11),c=n(53),l=n(50),d=n(51),f=n(52),g=n(30),p=n(7),h=function(){function e(t){var n=void 0===t?{}:t,r=n.enable,s=void 0!==r&&r,a=n.size,c=void 0===a?"medium":a,l=n.position,d=void 0===l?"bottom-right":l,f=n.theme,p=void 0===f?"default":f,h=n.showLauncherAfter,m=void 0===h?10:h,v=n.showBadgeAfter,b=void 0===v?300:v,S=n.text,_=void 0===S?{"tip.state.unsubscribed":"Subscribe to notifications","tip.state.subscribed":"You're subscribed to notifications","tip.state.blocked":"You've blocked notifications","message.prenotify":"Click to subscribe to notifications","message.action.subscribing":"Click <strong>{{prompt.native.grant}}</strong> to receive notifications","message.action.subscribed":"Thanks for subscribing!","message.action.resubscribed":"You're subscribed to notifications","message.action.unsubscribed":"You won't receive notifications again","dialog.main.title":"Manage Site Notifications","dialog.main.button.subscribe":"SUBSCRIBE","dialog.main.button.unsubscribe":"UNSUBSCRIBE","dialog.blocked.title":"Unblock Notifications","dialog.blocked.message":"Follow these instructions to allow notifications:"}:S,y=n.prenotify,O=void 0===y||y,w=n.showCredit,E=void 0===w||w,P=n.colors,I=void 0===P?null:P,T=n.offset,C=void 0===T?null:T,N=n.launcher,A=void 0===N?null:N,M=this;if(this.options={enable:s,size:c,position:d,theme:p,showLauncherAfter:m,showBadgeAfter:b,text:_,prenotify:O,showCredit:E,colors:I,offset:C},this.options.enable){if(!o.contains(["small","medium","large"],this.options.size))throw new Error("Invalid size "+this.options.size+" for notify button. Choose among 'small', 'medium', or 'large'.");if(!o.contains(["bottom-left","bottom-right"],this.options.position))throw new Error("Invalid position "+this.options.position+" for notify button. Choose either 'bottom-left', or 'bottom-right'.");if(!o.contains(["default","inverse"],this.options.theme))throw new Error("Invalid theme "+this.options.theme+" for notify button. Choose either 'default', or 'inverse'.");if(this.options.showLauncherAfter<0)throw new Error("Invalid delay duration of "+this.options.showLauncherAfter+" for showing the notify button. Choose a value above 0.");if(this.options.showBadgeAfter<0)throw new Error("Invalid delay duration of "+this.options.showBadgeAfter+" for showing the notify button's badge. Choose a value above 0.");this.size=this.options.size,this.position=this.options.position,this.text=this.options.text,this.text["tip.state.unsubscribed"]||(this.text["tip.state.unsubscribed"]="Subscribe to notifications"),this.text["tip.state.subscribed"]||(this.text["tip.state.subscribed"]="You're subscribed to notifications"),this.text["tip.state.blocked"]||(this.text["tip.state.blocked"]="You've blocked notifications"),this.text["message.prenotify"]||(this.text["message.prenotify"]="Click to subscribe to notifications"),this.text["message.action.subscribed"]||(this.text["message.action.subscribed"]="Thanks for subscribing!"),this.text["message.action.resubscribed"]||(this.text["message.action.resubscribed"]="You're subscribed to notifications"),this.text["message.action.subscribing"]||(this.text["message.action.subscribing"]="Click <strong>{{prompt.native.grant}}</strong> to receive notifications"),this.text["message.action.unsubscribed"]||(this.text["message.action.unsubscribed"]="You won't receive notifications again"),this.text["dialog.main.title"]||(this.text["dialog.main.title"]="Manage Site Notifications"),this.text["dialog.main.button.subscribe"]||(this.text["dialog.main.button.subscribe"]="SUBSCRIBE"),this.text["dialog.main.button.unsubscribe"]||(this.text["dialog.main.button.unsubscribe"]="UNSUBSCRIBE"),this.text["dialog.blocked.title"]||(this.text["dialog.blocked.title"]="Unblock Notifications"),this.text["dialog.blocked.message"]||(this.text["dialog.blocked.message"]="Follow these instructions to allow notifications:"),this._launcher=A,this.substituteText(),this.state=e.STATES.UNINITIALIZED,this._ignoreSubscriptionState=!1,OneSignal.on(e.EVENTS.SUBSCRIBE_CLICK,function(){M.dialog.subscribeButton.disabled=!0,M._ignoreSubscriptionState=!0,OneSignal.setSubscription(!0).then(function(){return M.dialog.subscribeButton.disabled=!1,M.dialog.hide()}).then(function(){return M.message.display(g.default.TYPES.MESSAGE,M.text["message.action.resubscribed"],g.default.TIMEOUT)}).then(function(){return M._ignoreSubscriptionState=!1,M.launcher.clearIfWasInactive(),M.launcher.inactivate()}).then(function(){return M.updateState()})}),OneSignal.on(e.EVENTS.UNSUBSCRIBE_CLICK,function(){M.dialog.unsubscribeButton.disabled=!0,OneSignal.setSubscription(!1).then(function(){return M.dialog.unsubscribeButton.disabled=!1,M.dialog.hide()}).then(function(){return M.launcher.clearIfWasInactive(),M.launcher.activate()}).then(function(){return M.message.display(g.default.TYPES.MESSAGE,M.text["message.action.unsubscribed"],g.default.TIMEOUT)}).then(function(){return M.updateState()})}),OneSignal.on(e.EVENTS.HOVERING,function(){return M.hovering=!0,M.launcher.activateIfInactive(),M.message.shown||M.dialog.shown?void(M.hovering=!1):M.message.contentType===g.default.TYPES.MESSAGE?void(M.hovering=!1):void new Promise(function(e,t){if(M.message.queued.length>0)return M.message.dequeue().then(function(t){M.message.content=t,M.message.contentType=g.default.TYPES.QUEUED,e()});M.message.content=o.decodeHtmlEntities(M.message.getTipForState()),M.message.contentType=g.default.TYPES.TIP,e()}).then(function(){return M.message.show()}).then(function(){M.hovering=!1})}),OneSignal.on(e.EVENTS.HOVERED,function(){M.message.contentType!==g.default.TYPES.MESSAGE&&M.dialog.hidden&&(M.hovering&&(M.hovering=!1,M.message.waitUntilShown().then(function(){return o.delay(g.default.TIMEOUT)}).then(function(){return M.message.hide()}).then(function(){M.launcher.wasInactive&&M.dialog.hidden&&(M.launcher.inactivate(),M.launcher.wasInactive=null)})),M.message.shown&&M.message.hide().then(function(){M.launcher.wasInactive&&M.dialog.hidden&&(M.launcher.inactivate(),M.launcher.wasInactive=null)}))}),OneSignal.on(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,function(t){return i.__awaiter(M,void 0,void 0,function(){var n,o=this;return i.__generator(this,function(i){switch(i.label){case 0:return 1!=t?[3,2]:(this.badge.shown&&this.options.prenotify&&this.badge.hide(),null!==this.dialog.notificationIcons?[3,2]:[4,u.default.getNotificationIcons()]);case 1:n=i.sent(),this.dialog.notificationIcons=n,i.label=2;case 2:return OneSignal.getNotificationPermission(function(n){o.setState(t?e.STATES.SUBSCRIBED:"denied"===n?e.STATES.BLOCKED:e.STATES.UNSUBSCRIBED,o._ignoreSubscriptionState)}),[2]}})})}),OneSignal.on(e.EVENTS.STATE_CHANGED,function(t){M.launcher.element&&(t.to===e.STATES.SUBSCRIBED?M.launcher.inactivate():(t.to===e.STATES.UNSUBSCRIBED||e.STATES.BLOCKED)&&M.launcher.activate())}),OneSignal.on(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,function(e,t){M.updateState()}),this.updateState()}}return Object.defineProperty(e,"EVENTS",{get:function(){return{STATE_CHANGED:"notifyButtonStateChange",LAUNCHER_CLICK:"notifyButtonLauncherClick",BELL_CLICK:"notifyButtonButtonClick",SUBSCRIBE_CLICK:"notifyButtonSubscribeClick",UNSUBSCRIBE_CLICK:"notifyButtonUnsubscribeClick",HOVERING:"notifyButtonHovering",HOVERED:"notifyButtonHover"}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STATES",{get:function(){return{UNINITIALIZED:"uninitialized",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",BLOCKED:"blocked"}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TEXT_SUBS",{get:function(){return{"prompt.native.grant":{default:"Allow",chrome:"Allow",firefox:"Always Receive Notifications",safari:"Allow"}}},enumerable:!0,configurable:!0}),e.prototype.substituteText=function(){for(var t in this.text)if(this.text.hasOwnProperty(t)){var n=this.text[t],i=a.name.toLowerCase();for(var r in e.TEXT_SUBS)if(e.TEXT_SUBS.hasOwnProperty(r)){var s=e.TEXT_SUBS[r],u=s[i];n&&o.contains(n,"{{")&&(this.text[t]=n.replace("{{"+r+"}}",void 0!==u?u:s.default))}}},e.prototype.showDialogProcedure=function(){var e=this;this.dialog.shown||this.dialog.show().then(function(){o.once(document,"click",function(t,n){e.dialog.element.contains(t.target)||(n(),e.dialog.shown&&e.dialog.hide().then(function(t){e.launcher.inactivateIfWasInactive()}))},!0)})},e.prototype.create=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,n,s,a,c=this;return i.__generator(this,function(i){switch(i.label){case 0:return this.options.enable?[4,OneSignal.context.dynamicResourceLoader.loadSdkStylesheet()]:[2];case 1:return 0!==(e=i.sent())?(r.debug("Not showing notify button because styles failed to load."),[2]):(this.container&&o.removeDomElement("#onesignal-bell-container"),o.addDomElement("body","beforeend",'<div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset"></div>'),o.addDomElement(this.container,"beforeend",'<div id="onesignal-bell-launcher" class="onesignal-bell-launcher"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-button"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-badge"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-message"></div>'),o.addDomElement(this.message.selector,"beforeend",'<div class="onesignal-bell-launcher-message-body"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog"></div>'),o.addDomElement(this.dialog.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog-body"></div>'),o.addDomElement(this.button.selector,"beforeEnd",'<svg class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" width="99.7" height="99.7" viewBox="0 0 99.7 99.7"><circle class="background" cx="49.9" cy="49.9" r="49.9"/><path class="foreground" d="M50.1 66.2H27.7s-2-.2-2-2.1c0-1.9 1.7-2 1.7-2s6.7-3.2 6.7-5.5S33 52.7 33 43.3s6-16.6 13.2-16.6c0 0 1-2.4 3.9-2.4 2.8 0 3.8 2.4 3.8 2.4 7.2 0 13.2 7.2 13.2 16.6s-1 11-1 13.3c0 2.3 6.7 5.5 6.7 5.5s1.7.1 1.7 2c0 1.8-2.1 2.1-2.1 2.1H50.1zm-7.2 2.3h14.5s-1 6.3-7.2 6.3-7.3-6.3-7.3-6.3z"/><ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9"/></svg>'),[4,OneSignal.isPushNotificationsEnabled()]);case 2:return t=i.sent(),[4,OneSignal.getSubscription()];case 3:return n=i.sent(),[4,u.default.wasHttpsNativePromptDismissed()];case 4:return s=i.sent(),a=t?"small":this.options.size,[4,this.launcher.resize(a)];case 5:if(i.sent(),"bottom-left"===this.options.position)o.addCssClass(this.container,"onesignal-bell-container-bottom-left"),o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-bottom-left");else{if("bottom-right"!==this.options.position)throw new Error("Invalid OneSignal notify button position "+this.options.position);o.addCssClass(this.container,"onesignal-bell-container-bottom-right"),o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-bottom-right")}if("default"===this.options.theme)o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-theme-default");else{if("inverse"!==this.options.theme)throw new Error("Invalid OneSignal notify button theme "+this.options.theme);o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-theme-inverse")}return this.applyOffsetIfSpecified(),this.setCustomColorsIfSpecified(),this.patchSafariSvgFilterBug(),r.info("Showing the notify button."),[4,(t?this.launcher.inactivate():o.nothing()).then(function(){return OneSignal.getSubscription()}).then(function(e){return!t&&e||null!==c.dialog.notificationIcons?o.nothing():u.default.getNotificationIcons().then(function(e){c.dialog.notificationIcons=e})}).then(function(){return o.delay(c.options.showLauncherAfter)}).then(function(){return!p.default.isUsingSubscriptionWorkaround()||!n||s===!0||t||OneSignal.config.autoRegister!==!0||u.default.isHttpPromptAlreadyShown()||u.default.isUsingHttpPermissionRequest()?c.launcher.show():(r.debug("Not showing notify button because popover will be shown."),o.nothing())}).then(function(){return o.delay(c.options.showBadgeAfter)}).then(function(){return c.options.prenotify&&!t&&OneSignal._isNewVisitor?c.message.enqueue(c.text["message.prenotify"]).then(function(){return c.badge.show()}):o.nothing()}).then(function(){return c.initialized=!0})];case 6:return i.sent(),[2]}})})},e.prototype.patchSafariSvgFilterBug=function(){if(!(a.safari&&Number(a.version)>=9.1)){var e="drop-shadow(0 2px 4px rgba(34,36,38,0.35));",t="drop-shadow(0 2px 4px rgba(34,36,38,0));",n="drop-shadow(0px 2px 2px rgba(34,36,38,.15));";this.graphic.setAttribute("style","filter: "+e+"; -webkit-filter: "+e+";"),this.badge.element.setAttribute("style","filter: "+t+"; -webkit-filter: "+t+";"),this.dialog.element.setAttribute("style","filter: "+n+"; -webkit-filter: "+n+";")}a.safari&&this.badge.element.setAttribute("style","display: none;")},e.prototype.applyOffsetIfSpecified=function(){var e=this.options.offset;e&&(this.launcher.element.style.cssText="",e.bottom&&(this.launcher.element.style.cssText+="bottom: "+e.bottom+";"),"bottom-right"===this.options.position?e.right&&(this.launcher.element.style.cssText+="right: "+e.right+";"):"bottom-left"===this.options.position&&e.left&&(this.launcher.element.style.cssText+="left: "+e.left+";"))},e.prototype.setCustomColorsIfSpecified=function(){var e=this.dialog.element.querySelector("button.action"),t=this.button.element.querySelector(".pulse-ring");this.graphic.querySelector(".background").style.cssText="";for(var n=this.graphic.querySelectorAll(".foreground"),i=0;i<n.length;i++){var o=n[i];o.style.cssText=""}if(this.graphic.querySelector(".stroke").style.cssText="",this.badge.element.style.cssText="",e&&(e.style.cssText="",e.style.cssText=""),t&&(t.style.cssText=""),this.options.colors){var r=this.options.colors;if(r["circle.background"]&&(this.graphic.querySelector(".background").style.cssText+="fill: "+r["circle.background"]),r["circle.foreground"]){for(var s=this.graphic.querySelectorAll(".foreground"),i=0;i<s.length;i++){var o=s[i];o.style.cssText+="fill: "+r["circle.foreground"]}this.graphic.querySelector(".stroke").style.cssText+="stroke: "+r["circle.foreground"]}r["badge.background"]&&(this.badge.element.style.cssText+="background: "+r["badge.background"]),r["badge.bordercolor"]&&(this.badge.element.style.cssText+="border-color: "+r["badge.bordercolor"]),r["badge.foreground"]&&(this.badge.element.style.cssText+="color: "+r["badge.foreground"]),e&&(r["dialog.button.background"]&&(this.dialog.element.querySelector("button.action").style.cssText+="background: "+r["dialog.button.background"]),r["dialog.button.foreground"]&&(this.dialog.element.querySelector("button.action").style.cssText+="color: "+r["dialog.button.foreground"]),r["dialog.button.background.hovering"]&&this.addCssToHead("onesignal-background-hover-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover { background: "+r["dialog.button.background.hovering"]+" !important; }"),r["dialog.button.background.active"]&&this.addCssToHead("onesignal-background-active-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active { background: "+r["dialog.button.background.active"]+" !important; }")),t&&r["pulse.color"]&&(this.button.element.querySelector(".pulse-ring").style.cssText="border-color: "+r["pulse.color"])}},e.prototype.addCssToHead=function(e,t){if(!document.getElementById(e)){var n=document.createElement("style");n.id=e,n.type="text/css",n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}},e.prototype.updateState=function(){var t=this;Promise.all([OneSignal.isPushNotificationsEnabled(),OneSignal.getNotificationPermission()]).then(function(n){var i=n[0],o=n[1];t.setState(i?e.STATES.SUBSCRIBED:e.STATES.UNSUBSCRIBED),"denied"===o&&t.setState(e.STATES.BLOCKED)})},e.prototype.setState=function(t,n){void 0===n&&(n=!1);var i=this.state;this.state=t,i===t||n||s.default.trigger(e.EVENTS.STATE_CHANGED,{from:i,to:t})},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-bell-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphic",{get:function(){return this.button.element.querySelector("svg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"launcher",{get:function(){return this._launcher||(this._launcher=new c.default(this)),this._launcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this._button||(this._button=new d.default(this)),this._button},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"badge",{get:function(){return this._badge||(this._badge=new l.default),this._badge},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message||(this._message=new g.default(this)),this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return this._dialog||(this._dialog=new f.default(this)),this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subscribed",{get:function(){return this.state===e.STATES.SUBSCRIBED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unsubscribed",{get:function(){return this.state===e.STATES.UNSUBSCRIBED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.state===e.STATES.BLOCKED},enumerable:!0,configurable:!0}),e}();t.default=h},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(91),o=n(56),r=function(){function t(e){if(void 0===e&&(e=t.generate()),!i(e))throw new o.default(e);this.uuid=e}return Object.defineProperty(t.prototype,"value",{get:function(){return this.uuid},enumerable:!0,configurable:!0}),t.generate=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n="undefined"==typeof window?e.crypto:window.crypto||window.msCrypto;if(n){var i=n.getRandomValues(new Uint8Array(1))[0]%16|0;return("x"==t?i:3&i|8).toString(16)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})})},t}();t.Uuid=r}).call(t,n(29))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(1),s=n(4),a=n(21),u=n(5),c=function(e){function t(t,n,i,o,r,s,a,u,c){void 0===s&&(s="shown"),void 0===a&&(a="active"),void 0===u&&(u=["opacity","transform"]),void 0===c&&(c=null);var l=e.call(this,t,n,i,s,u)||this;return l.selector=t,l.showClass=n,l.hideClass=i,l.activeClass=o,l.inactiveClass=r,l.state=s,l.activeState=a,l.targetTransitionEvents=u,l.nestedContentSelector=c,l}return i.__extends(t,e),t.prototype.activate=function(){var e=this;return this.inactive&&this.shown?new Promise(function(n){if(e.activeState="activating",s.default.trigger(t.EVENTS.ACTIVATING,e),e.inactiveClass&&o.removeCssClass(e.element,e.inactiveClass),e.activeClass&&o.addCssClass(e.element,e.activeClass),!e.shown)return r.debug("Ending activate() transition (alternative)."),e.activeState="active",s.default.trigger(t.EVENTS.ACTIVE,e),n(e);if(0==e.targetTransitionEvents.length)return n(e);var i=setTimeout(function(){r.debug("Element did not completely activate (state: "+e.state+", activeState: "+e.activeState+").")},e.transitionCheckTimeout);o.once(e.element,"transitionend",function(r,a){if(r.target===e.element&&o.contains(e.targetTransitionEvents,r.propertyName))return clearTimeout(i),a(),e.activeState="active",s.default.trigger(t.EVENTS.ACTIVE,e),n(e)},!0)}):Promise.resolve(this)},t.prototype.inactivate=function(){var e=this;return this.active?new Promise(function(n){if(e.activeState="inactivating",s.default.trigger(t.EVENTS.INACTIVATING,e),e.activeClass&&o.removeCssClass(e.element,e.activeClass),e.inactiveClass&&o.addCssClass(e.element,e.inactiveClass),!e.shown)return e.activeState="inactive",s.default.trigger(t.EVENTS.INACTIVE,e),n(e);if(0==e.targetTransitionEvents.length)return n(e);var i=setTimeout(function(){r.debug("Element did not completely inactivate (state: "+e.state+", activeState: "+e.activeState+").")},e.transitionCheckTimeout);o.once(e.element,"transitionend",function(r,a){if(r.target===e.element&&o.contains(e.targetTransitionEvents,r.propertyName))return clearTimeout(i),a(),e.activeState="inactive",s.default.trigger(t.EVENTS.INACTIVE,e),n(e)},!0)}):Promise.resolve(this)},t.prototype.waitUntilActive=function(){var e=this;return this.active?Promise.resolve(this):new Promise(function(n){OneSignal.once(t.EVENTS.ACTIVE,function(t){if(t===e)return n(e)},!0)})},t.prototype.waitUntilInactive=function(){var e=this;return this.inactive?Promise.resolve(this):new Promise(function(n){OneSignal.once(t.EVENTS.INACTIVE,function(t){if(t===e)return n(e)},!0)})},Object.defineProperty(t,"EVENTS",{get:function(){return u({},a.default.EVENTS,{ACTIVATING:"activeAnimatedElementActivating",ACTIVE:"activeAnimatedElementActive",INACTIVATING:"activeAnimatedElementInactivating",INACTIVE:"activeAnimatedElementInactive"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activating",{get:function(){return"activating"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return"active"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inactivating",{get:function(){return"inactivating"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inactive",{get:function(){return"inactive"===this.activeState},enumerable:!0,configurable:!0}),t}(a.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(1),r=n(4),s=function(){function e(e,t,n,i,o,r,s){void 0===i&&(i="shown"),void 0===o&&(o=["opacity","transform"]),void 0===r&&(r=null),void 0===s&&(s=500),this.selector=e,this.showClass=t,this.hideClass=n,this.state=i,this.targetTransitionEvents=o,this.nestedContentSelector=r,this.transitionCheckTimeout=s}return e.prototype.show=function(){var t=this;return this.hidden?new Promise(function(n){if(t.state="showing",r.default.trigger(e.EVENTS.SHOWING,t),t.hideClass&&i.removeCssClass(t.element,t.hideClass),t.showClass&&i.addCssClass(t.element,t.showClass),0==t.targetTransitionEvents.length)return n(t);var s=setTimeout(function(){o.debug("Element did not completely show (state: "+t.state+").")},t.transitionCheckTimeout);i.once(t.element,"transitionend",function(o,a){if(o.target===t.element&&i.contains(t.targetTransitionEvents,o.propertyName))return clearTimeout(s),a(),t.state="shown",r.default.trigger(e.EVENTS.SHOWN,t),n(t)},!0)}):Promise.resolve(this)},e.prototype.hide=function(){var t=this;return this.shown?new Promise(function(n){if(t.state="hiding",r.default.trigger(e.EVENTS.HIDING,t),t.showClass&&i.removeCssClass(t.element,t.showClass),t.hideClass&&i.addCssClass(t.element,t.hideClass),0==t.targetTransitionEvents.length)return n(t);i.once(t.element,"transitionend",function(s,a){var u=setTimeout(function(){o.debug("Element did not completely hide (state: "+t.state+").")},t.transitionCheckTimeout);if(s.target===t.element&&i.contains(t.targetTransitionEvents,s.propertyName))return clearTimeout(u),a(),t.state="hidden",r.default.trigger(e.EVENTS.HIDDEN,t),n(t)},!0)}):Promise.resolve(this)},e.prototype.waitUntilShown=function(){var t=this;return"shown"===this.state?Promise.resolve(this):new Promise(function(n){OneSignal.once(e.EVENTS.SHOWN,function(e){if(e===t)return n(t)},!0)})},e.prototype.waitUntilHidden=function(){var t=this;return"hidden"===this.state?Promise.resolve(this):new Promise(function(n){OneSignal.once(e.EVENTS.HIDDEN,function(e){if(e===t)return n(t)},!0)})},Object.defineProperty(e,"EVENTS",{get:function(){return{SHOWING:"animatedElementShowing",SHOWN:"animatedElementShown",HIDING:"animatedElementHiding",HIDDEN:"animatedElementHidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.nestedContentSelector?this.element.querySelector(this.nestedContentSelector).innerHTML:this.element.innerHTML},set:function(e){this.nestedContentSelector?this.element.querySelector(this.nestedContentSelector).innerHTML=e:this.element.innerHTML=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return document.querySelector(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showing",{get:function(){return"showing"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shown",{get:function(){return"shown"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiding",{get:function(){return"hiding"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return"hidden"===this.state},enumerable:!0,configurable:!0}),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(8),r=n(2),s=n(7),a=n(3),u=n(6),c=function(){function e(){}return e.closeNotifications=function(){navigator.serviceWorker&&!s.default.isUsingSubscriptionWorkaround()&&navigator.serviceWorker.getRegistration().then(function(e){if(void 0===e||!e.active)throw new Error("There is no active service worker.");OneSignal._channel&&OneSignal._channel.emit("data","notification.closeall")})},e.updateServiceWorker=function(){var e=sessionStorage.getItem("onesignal-update-serviceworker-completed");if(!navigator.serviceWorker||a.default.getWindowEnv()!==u.WindowEnvironmentKind.Host||"https:"!==location.protocol||"true"==e)return void i.debug("Skipping service worker update for existing session.");try{sessionStorage.setItem("onesignal-update-serviceworker-completed","true")}catch(e){i.error(e)}return navigator.serviceWorker.getRegistration().then(function(e){var t="";if(OneSignal.config.path&&(t=OneSignal.config.path),e&&e.active){var n=e.active.scriptURL;if(r.contains(n,t+a.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH))return i.debug("(Service Worker Update)","The main service worker is active."),o.default.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(e){return e?(i.debug("(Service Worker Update)","Stored service worker version v"+e+"."),e!=OneSignal._VERSION?(i.debug("(Service Worker Update)","New service worker version exists:",OneSignal._VERSION),i.info("Upgrading service worker (v"+e+" -> v"+OneSignal._VERSION+")"),navigator.serviceWorker.register(t+a.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH,OneSignal.SERVICE_WORKER_PARAM)):(i.debug("(Service Worker Update)","You already have the latest service worker version."),null)):(i.debug("(Service Worker Update)","No stored service worker version. Reinstalling the service worker."),navigator.serviceWorker.register(t+a.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH,OneSignal.SERVICE_WORKER_PARAM))});if(r.contains(n,t+a.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_UPDATER_PATH))return i.debug("(Service Worker Update)","The alternate service worker is active."),o.default.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(e){return e?(i.debug("(Service Worker Update)","Stored service worker version v"+e+"."),e!=OneSignal._VERSION?(i.debug("(Service Worker Update)","New service worker version exists:",OneSignal._VERSION),i.info("Upgrading new service worker (v"+e+" -> v"+OneSignal._VERSION+")"),navigator.serviceWorker.register(t+a.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM)):(i.debug("(Service Worker Update)","You already have the latest service worker version."),null)):(i.debug("(Service Worker Update)","No stored service worker version. Reinstalling the service worker."),navigator.serviceWorker.register(t+a.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM))})}})},e.registerServiceWorker=function(t){i.debug("Called %cregisterServiceWorker("+JSON.stringify(t,null,4)+")",r.getConsoleStyle("code")),navigator.serviceWorker.register(t,OneSignal.SERVICE_WORKER_PARAM).then(s.default.enableNotifications,e.registerError)},e.registerError=function(e){i.error("ServiceWorker registration",e)},e.isServiceWorkerActive=function(e){function t(e){return e&&e.active&&"activated"===e.active.state&&(r.contains(e.active.scriptURL,"OneSignalSDKWorker")||r.contains(e.active.scriptURL,"OneSignalSDKUpdaterWorker"))}return"serviceWorker"in navigator&&new Promise(function(n,i){if(s.default.isUsingSubscriptionWorkaround()||a.default.getWindowEnv()===u.WindowEnvironmentKind.OneSignalProxyFrame)e&&e(!1),n(!1);else{var o=!1;navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then(function(i){for(var r=0,s=i;r<s.length;r++){t(s[r])&&(o=!0)}e&&e(o),n(o)}):navigator.serviceWorker.ready.then(function(i){t(i)&&(o=!0),e&&e(o),n(o)})}})},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(8),s=n(27),a=n(7),u=n(3),c=function(){function e(){}return e.unmarkHttpsNativePromptDismissed=function(){s.remove("onesignal-notification-prompt")?o.debug("OneSignal: Removed the native notification prompt dismissed cookie."):o.debug("OneSignal: Cookie not marked.")},e.markHttpsNativePromptDismissed=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t;return i.__generator(this,function(n){switch(n.label){case 0:return a.default.isUsingSubscriptionWorkaround()?[4,new Promise(function(e,t){OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.MARK_PROMPT_DISMISSED,{},function(n){n.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():t()})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,r.default.get("Options","promptDismissCount")];case 3:return e=n.sent(),e||(e=0),a.default.isUsingSubscriptionWorkaround()||(e+=1),t=3,2==e?t=7:e>2&&(t=30),o.debug("("+u.default.getWindowEnv().toString()+") OneSignal: User dismissed the native notification prompt; reprompt after "+t+" days."),[4,r.default.put("Options",{key:"promptDismissCount",value:e})];case 4:return n.sent(),[2,s.set("onesignal-notification-prompt","dismissed",{expires:t})]}})})},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Development="Development"]="Development",e[e.Staging="Staging"]="Staging",e[e.Production="Production"]="Production"}(t.BuildEnvironmentKind||(t.BuildEnvironmentKind={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(19),r=n(5),s=n(3),a=n(7),u=n(1),c=function(){function e(e){this.options={appId:new o.Uuid(e.appId),subdomain:e.subdomainName,origin:e.origin}}return e.prototype.initialize=function(){var e=this;if((window.opener||window.parent)==window)return void document.write("<span style='font-size: 14px; color: red; font-family: sans-serif;'>OneSignal: This page cannot be directly opened, and must be opened as a result of a subscription call.</span>");var t=r(this.options);return t.appId=t.appId.value,t.origin=t.origin,OneSignal.config=t||{},OneSignal.initialized=!0,this.loadPromise={},this.loadPromise.promise=new Promise(function(t,n){e.loadPromise.resolver=t,e.loadPromise.rejector=n}),this.establishCrossOriginMessaging(),this.loadPromise.promise},e.prototype.establishCrossOriginMessaging=function(){},e.prototype.dispose=function(){this.messenger.destroy()},e.prototype.finishInitialization=function(){this.loadPromise.resolver()},e.prototype.subscribe=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:if(e=i.sent())return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,navigator.serviceWorker.register(s.default.getBuildEnvPrefix()+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM)];case 3:return t=i.sent(),a.default.enableNotifications(t),[3,5];case 4:return n=i.sent(),u.error("Failed to register service worker in the popup/modal:",n),[3,5];case 5:return[3,7];case 6:window.close(),i.label=7;case 7:return[2]}})})},e}();t.default=c},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){var i,o;!function(r){var s=!1;if(i=r,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o),s=!0,e.exports=r(),s=!0,!s){var a=window.Cookies,u=window.Cookies=r();u.noConflict=function(){return window.Cookies=a,u}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,o,r){var s;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},i.defaults,r),"number"==typeof r.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(e){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}t||(s={});for(var u=document.cookie?document.cookie.split("; "):[],c=0;c<u.length;c++){var l=u[c].split("="),d=l.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var f=l[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(d=n.read?n.read(d,f):n(d,f)||d.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(t===f){s=d;break}t||(s[f]=d)}catch(e){}}return s}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t(function(){})})},function(e,t,n){"use strict";function i(){throw new Error("Swivel couldn't detect ServiceWorker support. Please feature detect before using Swivel in your web pages!")}if("undefined"==typeof navigator);else{var o,r=n(87),s=n(88);o="serviceWorker"in navigator?r():"clients"in self?s():{on:i,once:i,off:i,emit:i,broadcast:i},e.exports=o}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(1),s=n(21),a=n(18),u=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-message","onesignal-bell-launcher-message-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-message-body")||this;return n.bell=t,n.contentType="",n.queued=[],n}return i.__extends(t,e),Object.defineProperty(t,"TIMEOUT",{get:function(){return 2500},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TYPES",{get:function(){return{TIP:"tip",MESSAGE:"message",QUEUED:"queued"}},enumerable:!0,configurable:!0}),t.prototype.display=function(e,t,n){var i=this;return void 0===n&&(n=0),r.debug("Calling %cdisplay("+e+", "+t+", "+n+").",o.getConsoleStyle("code")),(this.shown?this.hide():o.nothing()).then(function(){i.content=o.decodeHtmlEntities(t),i.contentType=e}).then(function(){return i.show()}).then(function(){return o.delay(n)}).then(function(){return i.hide()}).then(function(){i.content=i.getTipForState(),i.contentType="tip"})},t.prototype.getTipForState=function(){return this.bell.state===a.default.STATES.UNSUBSCRIBED?this.bell.text["tip.state.unsubscribed"]:this.bell.state===a.default.STATES.SUBSCRIBED?this.bell.text["tip.state.subscribed"]:this.bell.state===a.default.STATES.BLOCKED?this.bell.text["tip.state.blocked"]:void 0},t.prototype.enqueue=function(e,t){var n=this;return void 0===t&&(t=!1),this.queued.push(o.decodeHtmlEntities(e)),new Promise(function(e){n.bell.badge.shown?n.bell.badge.hide().then(function(){return n.bell.badge.increment()}).then(function(){return n.bell.badge.show()}).then(e):(n.bell.badge.increment(),n.bell.initialized?n.bell.badge.show().then(e):e())})},t.prototype.dequeue=function(e){var t=this,n=this.queued.pop(e);return new Promise(function(e){t.bell.badge.shown?t.bell.badge.hide().then(function(){return t.bell.badge.decrement()}).then(function(e){return e>0?t.bell.badge.show():Promise.resolve(t)}).then(e(n)):(t.bell.badge.decrement(),e(n))})},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(10),AlreadySubscribedError=function(e){function AlreadySubscribedError(){return e.call(this,"This operation can only be performed when the user is not subscribed.")||this}return i.__extends(AlreadySubscribedError,e),AlreadySubscribedError}(o.default);t.default=AlreadySubscribedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(10),PermissionMessageDismissedError=function(e){function PermissionMessageDismissedError(){return e.call(this,"The permission message was previously dismissed.")||this}return i.__extends(PermissionMessageDismissedError,e),PermissionMessageDismissedError}(o.default);t.default=PermissionMessageDismissedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(10),PushPermissionNotGrantedError=function(e){function PushPermissionNotGrantedError(){return e.call(this,"The push permission was not granted.")||this}return i.__extends(PushPermissionNotGrantedError,e),PushPermissionNotGrantedError}(o.default);t.default=PushPermissionNotGrantedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(10),TimeoutError=function(e){function TimeoutError(t){void 0===t&&(t="The asynchronous operation has timed out.");var n=e.call(this,t)||this;return n.message=t,n}return i.__extends(TimeoutError,e),TimeoutError}(o.default);t.default=TimeoutError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(4),s=n(2),a=n(7),u=n(3),c=n(6),l=n(70),d=n(72),f=n(68),g=n(38),p=function(){function e(){}return e.isShowingHttpPermissionRequest=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return a.default.isUsingSubscriptionWorkaround()?[4,OneSignal.proxyFrameHost.isShowingHttpPermissionRequest()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,OneSignal._showingHttpPermissionRequest]}})})},e.initHttp=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:switch(o.debug("Called %cinitHttp("+JSON.stringify(e,null,4)+")",s.getConsoleStyle("code")),t=u.default.getWindowEnv()){case c.WindowEnvironmentKind.OneSignalProxyFrame:return[3,1];case c.WindowEnvironmentKind.OneSignalSubscriptionPopup:return[3,3];case c.WindowEnvironmentKind.OneSignalSubscriptionModal:return[3,5]}return[3,6];case 1:return OneSignal.proxyFrame=new f.default(e),[4,OneSignal.proxyFrame.initialize()];case 2:return n.sent(),g.default.ensureBackwardsCompatibility(OneSignal),[3,7];case 3:return OneSignal.subscriptionPopup=new d.default(e),[4,OneSignal.subscriptionPopup.initialize()];case 4:return n.sent(),g.default.ensureBackwardsCompatibility(OneSignal),r.default.trigger("httpInitialize"),[3,7];case 5:return OneSignal.subscriptionModal=new l.default(e),OneSignal.subscriptionModal.initialize(),g.default.ensureBackwardsCompatibility(OneSignal),r.default.trigger("httpInitialize"),[3,7];case 6:return o.error("Unsupported HTTP initialization branch."),[3,7];case 7:return[2]}})})},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(16),s=n(4),a=n(8),u=n(12),c=n(2),l=n(11),d=n(22),f=n(7),g=n(14),p=n(15),h=n(31),m=n(32),v=n(3),b=n(6),S=n(71),_=n(5),y=function(){function e(){}return e.storeInitialValues=function(){return Promise.all([OneSignal.isPushNotificationsEnabled(),OneSignal.getNotificationPermission(),OneSignal.getUserId(),OneSignal.isOptedOut()]).then(function(e){var t=e[0],n=e[1],i=(e[2],e[3]);return r.default.put("subscription.optedOut",i),Promise.all([a.default.put("Options",{key:"isPushEnabled",value:t}),a.default.put("Options",{key:"notificationPermission",value:n})])})},e.onSdkInitialized=function(){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return e.storeInitialValues(),e.installNativePromptPermissionChangedHook(),t=navigator.serviceWorker&&"https:"===window.location.protocol,t?[4,f.default.hasInsecureParentOrigin()]:[3,2];case 1:t=!n.sent(),n.label=2;case 2:return t&&navigator.serviceWorker.getRegistration().then(function(e){e&&e.active&&l.default.establishServiceWorkerChannel(e)}).catch(function(e){9===e.code?"http:"!==location.protocol&&v.default.getWindowEnv()!==b.WindowEnvironmentKind.OneSignalProxyFrame||o.debug("Expected error getting service worker registration on "+location.href+":",e):o.error("Error getting Service Worker registration on "+location.href+":",e)}),l.default.showNotifyButton(),u.safari&&OneSignal.config.autoRegister===!1&&OneSignal.isPushNotificationsEnabled(function(t){t&&e.sessionInit({__sdkCall:!0})}),f.default.isUsingSubscriptionWorkaround()&&!l.default.isContinuingBrowserSession()&&(o.debug("("+v.default.getWindowEnv().toString()+") Updating session info for HTTP site."),OneSignal.isPushNotificationsEnabled(function(e){if(e)return l.default.getAppId().then(function(e){return l.default.registerWithOneSignal(e,null)})})),l.default.checkAndDoHttpPermissionRequest(),OneSignal.cookieSyncer.install(),[2]}})})},e.installNativePromptPermissionChangedHook=function(){!navigator.permissions||u.firefox&&Number(u.version)<=45||(OneSignal._usingNativePermissionHook=!0,navigator.permissions.query({name:"notifications"}).then(function(e){e.onchange=function(){g.default.triggerNotificationPermissionChanged()}}))},e.saveInitOptions=function(){var e=[];OneSignal.config.persistNotification===!1?e.push(a.default.put("Options",{key:"persistNotification",value:!1})):e.push(a.default.put("Options",{key:"persistNotification",value:!0}));var t=OneSignal.config.webhooks;return["notification.displayed","notification.clicked","notification.dismissed"].forEach(function(n){t&&t[n]?e.push(a.default.put("Options",{key:"webhooks."+n,value:t[n]})):e.push(a.default.put("Options",{key:"webhooks."+n,value:!1}))}),t&&t.cors?e.push(a.default.put("Options",{key:"webhooks.cors",value:!0})):e.push(a.default.put("Options",{key:"webhooks.cors",value:!1})),OneSignal.config.notificationClickHandlerMatch?e.push(a.default.put("Options",{key:"notificationClickHandlerMatch",value:OneSignal.config.notificationClickHandlerMatch})):e.push(a.default.put("Options",{key:"notificationClickHandlerMatch",value:"exact"})),OneSignal.config.notificationClickHandlerAction?e.push(a.default.put("Options",{key:"notificationClickHandlerAction",value:OneSignal.config.notificationClickHandlerAction})):e.push(a.default.put("Options",{key:"notificationClickHandlerAction",value:"navigate"})),OneSignal.config.serviceWorkerRefetchRequests===!1?e.push(a.default.put("Options",{key:"serviceWorkerRefetchRequests",value:!1})):e.push(a.default.put("Options",{key:"serviceWorkerRefetchRequests",value:!0})),Promise.all(e)},e.internalInit=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return o.debug("Called %cinternalInit()",c.getConsoleStyle("code")),[4,a.default.get("Ids","appId")];case 1:return t=i.sent(),!sessionStorage.getItem("ONE_SIGNAL_SESSION")||OneSignal.config.subdomainName||"denied"!=window.Notification.permission&&sessionStorage.getItem("ONE_SIGNAL_NOTIFICATION_PERMISSION")!=window.Notification.permission?(sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",window.Notification.permission),u.safari&&OneSignal.config.autoRegister===!1?(o.debug("On Safari and autoregister is false, skipping sessionInit()."),f.default.isUsingSubscriptionWorkaround()||s.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED),[2]):OneSignal.config.autoRegister!==!1||OneSignal.config.subdomainName?[3,3]:(o.debug("Skipping internal init. Not auto-registering and no subdomain."),s.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED),[4,OneSignal.isPushNotificationsEnabled()])):(s.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED),[2]);case 2:return n=i.sent(),n&&!f.default.isUsingSubscriptionWorkaround()?(o.info("Because the user is already subscribed and has enabled notifications, we will re-register their GCM token."),f.default.registerForW3CPush({})):d.default.updateServiceWorker(),[2];case 3:return"visible"!==document.visibilityState?(c.once(document,"visibilitychange",function(t,n){"visible"===document.visibilityState&&(n(),e.sessionInit({__sdkCall:!0}))},!0),[2]):(e.sessionInit({__sdkCall:!0}),[2])}})})},e.initSaveState=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,l.default.getAppId()];case 1:return t=i.sent(),[4,a.default.put("Ids",{type:"appId",id:t})];case 2:return i.sent(),n=e||document.title||"Notification",[4,a.default.put("Options",{key:"pageTitle",value:n})];case 3:return i.sent(),o.info("OneSignal: Set pageTitle to be '"+n+"'."),[2]}})})},e.sessionInit=function(e){if(o.debug("Called %csessionInit("+JSON.stringify(e)+")",c.getConsoleStyle("code")),OneSignal._sessionInitAlreadyRunning)return void o.debug("Returning from sessionInit because it has already been called.");OneSignal._sessionInitAlreadyRunning=!0;location.protocol;u.safari?OneSignal.config.safari_web_id&&l.default.getAppId().then(function(e){window.safari.pushNotification.requestPermission(v.default.getOneSignalApiUrl().toString()+"/safari",OneSignal.config.safari_web_id,{app_id:e},function(t){if(o.info("Safari Registration Result:",t),t.deviceToken){var n={endpointOrToken:t.deviceToken.toLowerCase()};l.default.registerWithOneSignal(e,n)}else l.default.beginTemporaryBrowserSession();g.default.triggerNotificationPermissionChanged()})}):e.modalPrompt&&e.fromRegisterFor?Promise.all([l.default.getAppId(),OneSignal.isPushNotificationsEnabled(),OneSignal.getNotificationPermission()]).then(function(t){var n=t[0];t[1],t[2];OneSignal.subscriptionModalHost=new S.default({appId:n},e),OneSignal.subscriptionModalHost.load()}):"serviceWorker"in navigator&&!f.default.isUsingSubscriptionWorkaround()?e.__sdkCall&&!l.default.wasHttpsNativePromptDismissed()?f.default.registerForW3CPush(e):e.__sdkCall&&l.default.wasHttpsNativePromptDismissed()?(o.debug("OneSignal: Not automatically showing native HTTPS prompt because the user previously dismissed it."),OneSignal._sessionInitAlreadyRunning=!1):f.default.registerForW3CPush(e):(OneSignal.config.autoRegister!==!0&&o.debug("OneSignal: Not automatically showing popover because autoRegister is not specifically true."),l.default.isHttpPromptAlreadyShown()&&o.debug("OneSignal: Not automatically showing popover because it was previously shown in the same session."),OneSignal.config.autoRegister!==!0||l.default.isHttpPromptAlreadyShown()||OneSignal.showHttpPrompt().catch(function(e){if(!(e instanceof p.InvalidStateError&&e.reason===p.InvalidStateReason[p.InvalidStateReason.RedundantPermissionMessage]||e instanceof m.default||e instanceof h.default))throw e;o.debug("[Prompt Not Showing]",e)})),s.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED)},e.getMergedLegacyConfig=function(e,t){var n=_({path:"/"},{subdomainName:t.subdomain},{safari_web_id:t.safariWebId},{cookieSyncEnabled:t.cookieSyncEnabled},e);return e.subdomainName||delete n.subdomainName,n},e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._events={}}return e.prototype.on=function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this},e.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return n.listener=t,this.on(e,n),this},e.prototype.off=function(e,t){var n=this._events[e];if(void 0!==n){for(var i=0;i<n.length;i+=1)if(n[i]===t||n[i].listener===t){n.splice(i,1);break}0===n.length&&this.removeAllListeners(e)}return this},e.prototype.removeAllListeners=function(e){try{delete this._events[e]}catch(e){}return this},e.prototype.listeners=function(e){try{return this._events[e]}catch(e){}},e.prototype.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[].slice.call(arguments,0),i=n.shift(),o=this._events[i];if(void 0!==o){o=o.slice(0);for(var r=o.length,s=0;s<r;s+=1)o[s].apply(this,n)}return this},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(6),r=function(){function e(){}return e.ensureBackwardsCompatibility=function(t){e.environmentPolyfill(t),e.postmams(t)},e.environmentPolyfill=function(e){e.environment={},e.environment.getEnv=function(){return""},e.environment.isPopup=function(){return i.default.getWindowEnv()===o.WindowEnvironmentKind.OneSignalSubscriptionPopup},e.environment.isIframe=function(){return i.default.getWindowEnv()===o.WindowEnvironmentKind.OneSignalProxyFrame}},e.postmams=function(e){function t(e){e.message=n,e.postMessage=i}var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.messenger.message.apply(this.messenger,arguments)},i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.messenger.postMessage.apply(this.messenger,arguments)};e.proxyFrame&&(e.iframePostmam=e.proxyFrame,t(e.iframePostmam)),e.subscriptionPopup&&(e.popupPostmam=e.subscriptionPopup,t(e.popupPostmam)),e.subscriptionModal&&(e.modalPostmam=e.subscriptionModal,t(e.modalPostmam))},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.AppConfig=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.HttpPermissionRequest="HTTP permission request"]="HttpPermissionRequest",e[e.HttpsPermissionRequest="HTTPS permission request"]="HttpsPermissionRequest",e[e.FullscreenHttpPermissionMessage="fullscreen HTTP permission message"]="FullscreenHttpPermissionMessage",e[e.FullscreenHttpsPermissionMessage="fullscreen HTTPS permission message"]="FullscreenHttpsPermissionMessage",e[e.SlidedownPermissionMessage="slidedown permission message"]="SlidedownPermissionMessage",e[e.SubscriptionBell="subscription bell"]="SubscriptionBell"}(t.PermissionPromptType||(t.PermissionPromptType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None="None"]="None",e[e.UnitTesting="Unit Testing"]="UnitTesting"}(t.TestEnvironmentKind||(t.TestEnvironmentKind={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(37),s=n(2),a=function(){function e(e){this.databaseName=e,this.emitter=new r.default}return e.prototype.open=function(e){var t=this;return new Promise(function(n,i){try{var o=indexedDB.open(e,1)}catch(e){}o.onerror=t.onDatabaseOpenError,o.onblocked=t.onDatabaseOpenBlocked,o.onupgradeneeded=t.onDatabaseUpgradeNeeded,o.onsuccess=function(){t.database=o.result,t.database.onerror=t.onDatabaseError,t.database.onversionchange=t.onDatabaseVersionChange,n(t.database)}})},e.prototype.ensureDatabaseOpen=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return this.openLock||(this.openLock=this.open(this.databaseName)),[4,this.openLock];case 1:return e.sent(),[2,this.database]}})})},e.prototype.onDatabaseOpenError=function(e){e.preventDefault();var t=e.target.error;s.contains(t.message,"The operation failed for reasons unrelated to the database itself and not covered by any other error code")||s.contains(t.message,"A mutation operation was attempted on a database that did not allow mutations")?o.warn("OneSignal: IndexedDb web storage is not available on this origin since this profile's IndexedDb schema has been upgraded in a newer version of Firefox. See: https://bugzilla.mozilla.org/show_bug.cgi?id=1236557#c6"):o.warn("OneSignal: Fatal error opening IndexedDb database:",t)},e.prototype.onDatabaseError=function(e){o.debug("IndexedDb: Generic database error",e.target.errorCode)},e.prototype.onDatabaseOpenBlocked=function(){o.debug("IndexedDb: Blocked event")},e.prototype.onDatabaseVersionChange=function(e){o.debug("IndexedDb: versionchange event")},e.prototype.onDatabaseUpgradeNeeded=function(e){o.debug("IndexedDb: Database is being rebuilt or upgraded (upgradeneeded event).");var t=e.target.result;t.createObjectStore("Ids",{keyPath:"type"}),t.createObjectStore("NotificationOpened",{keyPath:"url"}),t.createObjectStore("Options",{keyPath:"key"})},e.prototype.get=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n=this;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.ensureDatabaseOpen()];case 1:return i.sent(),t?[4,new Promise(function(i,o){var r=n.database.transaction(e).objectStore(e).get(t);r.onsuccess=function(){i(r.result)},r.onerror=function(e){o(r.error)}})]:[3,3];case 2:return[2,i.sent()];case 3:return[4,new Promise(function(t,i){var o={},r=n.database.transaction(e).objectStore(e).openCursor();r.onsuccess=function(e){var n=e.target.result;if(n){var i=n.key;o[i]=n.value,n.continue()}else t(o)},r.onerror=function(e){i(r.error)}})];case 4:return[2,i.sent()]}})})},e.prototype.put=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n=this;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.ensureDatabaseOpen()];case 1:return i.sent(),[4,new Promise(function(i,r){try{var s=n.database.transaction([e],"readwrite").objectStore(e).put(t);s.onsuccess=function(e){i(t)},s.onerror=function(e){o.error("Database PUT Transaction Error:",e),r(e)}}catch(e){o.error("Database PUT Error:",e),r(e)}})];case 2:return[2,i.sent()]}})})},e.prototype.remove=function(e,t){var n=this;if(t)var i="delete";else var i="clear";return new Promise(function(r,s){try{var a=n.database.transaction([e],"readwrite").objectStore(e)[i](t);a.onsuccess=function(e){r(t)},a.onerror=function(e){o.error("Database REMOVE Transaction Error:",e),s(e)}}catch(e){o.error("Database REMOVE Error:",e),s(e)}})},e}();t.default=a},function(e,t,n){"use strict";var i=n(26),o=n(78);e.exports=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete r[t];else if(0===i)r={};else{var o=r[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var s=(r[t]||[]).slice(0);return function(){var r=i(arguments),a=this||e;if("error"===t&&n.throws!==!1&&!s.length)throw 1===r.length?r[0]:r;return s.forEach(function(i){n.async?o(i,r,a):i.apply(a,r),i._once&&e.off(t,i)}),e}},e}},function(e,t,n){var i,o;!function(r,s,a){i=a,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o)}(0,0,function(){"use strict";var e={inherit:function(t,n,i){(t.prototype=e.createObject(n.prototype)).constructor=t,(i||void 0===i)&&(t._super=n.prototype)},createObject:Object.create||function(e){var t=function(){};return t.prototype=e,new t},mixin:function(t,n){return e.merge(t.prototype,n)},merge:function(e,t){var n;for(n in t)e[n]=t[n]},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};return e})},function(e,t,n){"use strict";function i(e){return e?e.toString():null}function o(e){return e?new Error(e):null}function r(e){var t=e.shift();return"error"===t?{error:i(e[0]),type:t,payload:[]}:{error:null,type:t,payload:e}}function s(e,t){function n(n){var i=n.data;"error"===i.type?e.emit.call(null,"error",t,o(i.error)):e.emit.apply(null,[i.type,t].concat(i.payload))}return n}e.exports={parsePayload:r,emission:s}},function(e,t,n){var i;!function(t){"use strict";function o(){}function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}function a(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&a(e.listener)}var u=o.prototype,c=t.EventEmitter;u.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},u.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},u.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},u.addListener=function(e,t){if(!a(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&r(i[n],t)===-1&&i[n].push(o?t:{listener:t,once:!1});return this},u.on=s("addListener"),u.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},u.once=s("addOnceListener"),u.defineEvent=function(e){return this.getListeners(e),this},u.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},u.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(n=r(o[i],t))!==-1&&o[i].splice(n,1);return this},u.off=s("removeListener"),u.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},u.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},u.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},u.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},u.removeAllListeners=s("removeEvent"),u.emitEvent=function(e,t){var n,i,o,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].slice(0),o=0;o<n.length;o++)i=n[o],i.once===!0&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},u.trigger=s("emitEvent"),u.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},u.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},u._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},u._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=c,o},void 0!==(i=function(){return o}.call(t,n,t,e))&&(e.exports=i)}(this||{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(9),r=n(17),s=n(42),a=n(1),u=n(4),c=n(27),l=n(8),d=n(12),f=n(2),g=n(77),p=n(5),h=n(46),m=n(44),v=n(28),b=n(14),S=n(11),_=n(74),y=n(19),O=n(55),w=n(16),E=n(15),P=n(36),I=n(22),T=n(7),C=n(35),N=n(23),A=n(63),M=n(32),R=n(33),k=n(57),x=n(31),D=n(40),W=n(62),U=n(3),B=n(6),L=n(60),H=n(38),j=n(73),F=n(58),V=n(67),K=n(75),q=function(){function e(){}return e.setDefaultNotificationUrl=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:if(!g.ValidatorUtils.isValidUrl(e,{allowNull:!0}))throw new O.InvalidArgumentError("url",O.InvalidArgumentReason.Malformed);return[4,f.awaitOneSignalInitAndSupported()];case 1:return n.sent(),f.logMethodCall("setDefaultNotificationUrl",e),[4,l.default.getAppState()];case 2:return t=n.sent(),t.defaultNotificationUrl=e,[4,l.default.setAppState(t)];case 3:return n.sent(),[2]}})})},e.setDefaultTitle=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return n.sent(),f.logMethodCall("setDefaultTitle",e),[4,l.default.getAppState()];case 2:return t=n.sent(),t.defaultNotificationTitle=e,[4,l.default.setAppState(t)];case 3:return n.sent(),[2]}})})},e.syncHashedEmail=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,s;return i.__generator(this,function(i){switch(i.label){case 0:if(!e)throw new O.InvalidArgumentError("email",O.InvalidArgumentReason.Empty);if(t=f.prepareEmailForHashing(e),!f.isValidEmail(t))throw new O.InvalidArgumentError("email",O.InvalidArgumentReason.Malformed);return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("syncHashedEmail",e),[4,l.default.getAppConfig()];case 2:return n=i.sent().appId,[4,l.default.getSubscription()];case 3:if(!(o=i.sent().deviceId))throw new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId);return[4,r.default.updatePlayer(n,o,{em_m:K.default.md5(t),em_s:K.default.sha1(t),em_s256:K.default.sha256(t)})];case 4:if((s=i.sent())&&s.success)return[2,!0];throw s}})})},e.isPushNotificationsSupported=function(){return f.logMethodCall("isPushNotificationsSupported"),!0},e.init=function(t){return i.__awaiter(this,void 0,void 0,function(){function n(){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:if(e.__initAlreadyCalled)return[2];if(e.__initAlreadyCalled=!0,S.default.fixWordpressManifestIfMisplaced(),e.on(e.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,b.default.onNotificationPermissionChange),e.on(e.EVENTS.SUBSCRIPTION_CHANGED,b.default._onSubscriptionChanged),e.on(e.EVENTS.SDK_INITIALIZED,P.default.onSdkInitialized),!T.default.isUsingSubscriptionWorkaround())return[3,2];if(e.appConfig=s,!s.subdomain)throw new F.SdkInitError(F.SdkInitErrorKind.MissingSubdomain);return t=e,[4,L.default.discoverAltOrigin(s)];case 1:t.proxyFrameHost=n.sent(),n.label=2;case 2:return window.addEventListener("focus",function(e){S.default.checkAndTriggerNotificationPermissionChanged()}),P.default.initSaveState(document.title).then(function(){return P.default.saveInitOptions()}).then(function(){U.default.getWindowEnv()===B.WindowEnvironmentKind.CustomIframe?u.default.trigger(e.EVENTS.SDK_INITIALIZED):P.default.internalInit()}),[2]}})})}var o,s,c;return i.__generator(this,function(i){switch(i.label){case 0:if(f.logMethodCall("init"),!d.safari||void 0!==window.fetch)return[3,4];a.debug("Loading fetch polyfill for Safari.."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.context.dynamicResourceLoader.loadFetchPolyfill()];case 2:return i.sent(),a.debug("Done loading fetch polyfill."),[3,4];case 3:return o=i.sent(),a.debug("Error loading fetch polyfill:",o),[3,4];case 4:if(e._initCalled)throw new F.SdkInitError(F.SdkInitErrorKind.MultipleInitialization);e._initCalled=!0,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.default.getAppConfig(new y.Uuid(t.appId))];case 6:return s=i.sent(),e.cookieSyncer=new V.default(s.cookieSyncEnabled),e.config=P.default.getMergedLegacyConfig(t,s),a.debug("OneSignal: Final web app config: %c"+JSON.stringify(e.config,null,4),f.getConsoleStyle("code")),[3,8];case 7:if(c=i.sent()){if(1===c.code)throw new F.SdkInitError(F.SdkInitErrorKind.InvalidAppId);if(2===c.code)throw new F.SdkInitError(F.SdkInitErrorKind.AppNotConfiguredForWebPush)}throw c;case 8:return d.safari&&!e.config.safari_web_id?(a.warn(new F.SdkInitError(F.SdkInitErrorKind.MissingSafariWebId)),[2]):("complete"===document.readyState||"interactive"===document.readyState?n():(a.debug("OneSignal: Waiting for DOMContentLoaded or readyStateChange event before continuing initialization..."),window.addEventListener("DOMContentLoaded",function(){n()}),document.onreadystatechange=function(){"complete"!==document.readyState&&"interactive"!==document.readyState||n()}),[2])}})})},e.showHttpPrompt=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o,r,s,u,c;return i.__generator(this,function(i){switch(i.label){case 0:return t||(t={}),[4,f.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),e.__isPopoverShowing)throw new E.InvalidStateError(E.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:D.PermissionPromptType.SlidedownPermissionMessage});return[4,e.getNotificationPermission()];case 2:return n=i.sent(),[4,e.isPushNotificationsEnabled()];case 3:return o=i.sent(),[4,e.getSubscription()];case 4:return r=i.sent(),[4,S.default.wasHttpsNativePromptDismissed()];case 5:return s=i.sent(),[4,e.httpHelper.isShowingHttpPermissionRequest()];case 6:if(u=i.sent(),s&&!t.force)throw new M.default;if(n===A.NotificationPermission.Denied)throw new R.default;if(o)throw new x.default;if(!r)throw new k.NotSubscribedError(k.NotSubscribedReason.OptedOut);if(S.default.isUsingHttpPermissionRequest()&&(!t.__sdkCall||!t.__useHttpPermissionRequestStyle))throw a.debug("The slidedown permission message cannot be used while the HTTP perm. req. is enabled."),new E.InvalidStateError(E.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:D.PermissionPromptType.HttpPermissionRequest});return S.default.markHttpPopoverShown(),[4,e.context.dynamicResourceLoader.loadSdkStylesheet()];case 7:return 0!==(c=i.sent())?(a.debug("Not showing slidedown permission message because styles failed to load."),[2]):(e.popover=new _.default(e.config.promptOptions),e.popover.create(),a.debug("Showing the HTTP popover."),e.notifyButton&&e.notifyButton.options.enable&&"hidden"!==e.notifyButton.launcher.state&&e.notifyButton.launcher.waitUntilShown().then(function(){e.notifyButton.launcher.hide()}),e.once(_.default.EVENTS.SHOWN,function(){e.__isPopoverShowing=!0}),e.once(_.default.EVENTS.CLOSED,function(){e.__isPopoverShowing=!1,e.notifyButton&&e.notifyButton.options.enable&&e.notifyButton.launcher.show()}),e.once(_.default.EVENTS.ALLOW_CLICK,function(){e.popover.close(),a.debug("Setting flag to not show the popover to the user again."),N.default.markHttpsNativePromptDismissed(),t.__sdkCall&&t.__useHttpPermissionRequestStyle?e.registerForPushNotifications({httpPermissionRequest:!0}):e.registerForPushNotifications({autoAccept:!0})}),e.once(_.default.EVENTS.CANCEL_CLICK,function(){a.debug("Setting flag to not show the popover to the user again."),N.default.markHttpsNativePromptDismissed()}),[2])}})})},e.registerForPushNotifications=function(t){function n(){T.default.isUsingSubscriptionWorkaround()?(e.subscriptionPopupHost=new j.default(e.proxyFrameHost.url,t),e.subscriptionPopupHost.load()):(t||(t={}),t.fromRegisterFor=!0,P.default.sessionInit(t))}if(e.initialized)return n();e.once(e.EVENTS.SDK_INITIALIZED,function(){return n()})},e.showHttpPermissionRequest=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o;return i.__generator(this,function(i){switch(i.label){case 0:return a.debug("Called showHttpPermissionRequest()."),[4,f.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),d.safari)throw new E.InvalidStateError(E.InvalidStateReason.UnsupportedEnvironment);if(e.__isPopoverShowing)throw new E.InvalidStateError(E.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:D.PermissionPromptType.SlidedownPermissionMessage});if(e._showingHttpPermissionRequest)throw new E.InvalidStateError(E.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:D.PermissionPromptType.HttpPermissionRequest});return T.default.isUsingSubscriptionWorkaround()?[4,new Promise(function(n,i){e.proxyFrameHost.message(e.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST,t,function(e){var t=e.data,o=t.status,r=t.result;"resolve"===o?n(r):i(r)})})]:[3,3];case 2:return[2,i.sent()];case 3:if(!S.default.isUsingHttpPermissionRequest())return a.debug("Not showing HTTP permission request because its not enabled. Check init option httpPermissionRequest."),[2];if(S.default.wasHttpsNativePromptDismissed()){if(t._sdkCall===!0)return a.debug("The HTTP perm. req. permission was dismissed, so we are not showing the request."),[2];a.debug("The HTTP perm. req. was previously dismissed, but this call was made explicitly.")}return[4,e.getNotificationPermission()];case 4:return(n=i.sent())!==A.NotificationPermission.Default?[3,6]:(a.debug("("+U.default.getWindowEnv().toString()+") Showing HTTP permission request."),e._showingHttpPermissionRequest=!0,[4,new Promise(function(t,n){window.Notification.requestPermission(function(n){e._showingHttpPermissionRequest=!1,t(n),a.debug("HTTP Permission Request Result:",n),"default"===n&&(N.default.markHttpsNativePromptDismissed(),e.proxyFrame.message(e.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,{permission:n,forceUpdatePermission:!0}))}),u.default.trigger(e.EVENTS.PERMISSION_PROMPT_DISPLAYED)})]);case 5:return[2,i.sent()];case 6:return o=n===A.NotificationPermission.Granted,o?[4,e.isPushNotificationsEnabled()]:[3,8];case 7:o=!i.sent(),i.label=8;case 8:o&&e.proxyFrame.message(e.POSTMAM_COMMANDS.HTTP_PERMISSION_REQUEST_RESUBSCRIBE),i.label=9;case 9:return[2]}})})},e.getNotificationPermission=function(t){return f.awaitOneSignalInitAndSupported().then(function(){var t=null;return e.config&&(t=e.config.safari_web_id),S.default.getNotificationPermission(t)}).then(function(e){return t&&t(e),e})},e.getTags=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("getTags",e),[4,l.default.getAppConfig()];case 2:return t=i.sent().appId,[4,l.default.getSubscription()];case 3:return n=i.sent().deviceId,n?[4,r.default.getPlayer(t,n)]:(a.info(new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId)),[2,null]);case 4:return o=i.sent().tags,f.executeCallback(e,o),[2,o]}})})},e.sendTag=function(t,n,o){return i.__awaiter(this,void 0,void 0,function(){var r;return i.__generator(this,function(i){switch(i.label){case 0:return r={},r[t]=n,[4,e.sendTags(r,o)];case 1:return[2,i.sent()]}})})},e.sendTags=function(t,n){return i.__awaiter(this,void 0,void 0,function(){var o,s,u;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),(f.logMethodCall("sendTags",t,n),t&&0!==Object.keys(t).length)?(Object.keys(t).forEach(function(e){t[e]===!1&&(t[e]="false")}),[4,l.default.getAppConfig()]):(a.info(new O.InvalidArgumentError("tags",O.InvalidArgumentReason.Empty)),[2]);case 2:return o=i.sent().appId,[4,l.default.getSubscription()];case 3:return s=i.sent().deviceId,s?[3,5]:[4,f.awaitSdkEvent(e.EVENTS.REGISTERED)];case 4:i.sent(),i.label=5;case 5:return[4,l.default.getSubscription()];case 6:return u=i.sent().deviceId,[4,r.default.updatePlayer(o,u,{tags:t})];case 7:return i.sent(),f.executeCallback(n,t),[2,t]}})})},e.deleteTag=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,e.deleteTags([t])];case 1:return[2,n.sent()]}})})},e.deleteTags=function(t,n){return i.__awaiter(this,void 0,void 0,function(){var o,r,s,u,c,l;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),f.logMethodCall("deleteTags",t,n),!g.ValidatorUtils.isValidArray(t))throw new O.InvalidArgumentError("tags",O.InvalidArgumentReason.Malformed);for(0===t.length&&a.info(new O.InvalidArgumentError("tags",O.InvalidArgumentReason.Empty)),o={},r=0,s=t;r<s.length;r++)u=s[r],o[u]="";return[4,e.sendTags(o)];case 2:return c=i.sent(),l=Object.keys(c),f.executeCallback(n,l),[2,l]}})})},e.addListenerForNotificationOpened=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return n.sent(),f.logMethodCall("addListenerForNotificationOpened",t),e.once(e.EVENTS.NOTIFICATION_CLICKED,function(e){f.executeCallback(t,e)}),b.default.fireStoredNotificationClicks(e.config.pageUrl),[2]}})})},e.getIdsAvailable=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("getIdsAvailable",e),[4,l.default.getSubscription()];case 2:return t=i.sent(),n=t.deviceId,o=t.pushToken,r={userId:n,registrationId:o},f.executeCallback(e,r),[2,r]}})})},e.isPushNotificationsEnabled=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,r,s,a,u,c,d,g,p,h;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("isPushNotificationsEnabled",t),[4,T.default.hasInsecureParentOrigin()];case 2:return n=i.sent(),[4,l.default.getSubscription()];case 3:return r=i.sent(),s=r.deviceId,a=r.pushToken,u=r.optedOut,[4,e.getNotificationPermission()];case 4:return c=i.sent(),d=!1,!o.default.supportsServiceWorkers()||T.default.isUsingSubscriptionWorkaround()||U.default.getWindowEnv()===B.WindowEnvironmentKind.OneSignalProxyFrame||n?[3,9]:[4,I.default.isServiceWorkerActive()];case 5:return g=i.sent(),d=!(!s||!a||c!==A.NotificationPermission.Granted||u||!g),[4,navigator.serviceWorker.getRegistration()];case 6:return p=i.sent(),p?[4,p.pushManager.getSubscription()]:[3,8];case 7:h=i.sent(),h||(d=!1),i.label=8;case 8:return[3,10];case 9:d=!(!s||!a||c!==A.NotificationPermission.Granted||u),i.label=10;case 10:return f.executeCallback(t,d),[2,d]}})})},e.setSubscription=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,s;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("setSubscription",e),[4,l.default.getAppConfig()];case 2:return t=i.sent(),n=t.appId,[4,l.default.getSubscription()];case 3:if(o=i.sent(),s=o.deviceId,!t.appId)throw new E.InvalidStateError(E.InvalidStateReason.MissingAppId);if(!g.ValidatorUtils.isValidBoolean(e))throw new O.InvalidArgumentError("newSubscription",O.InvalidArgumentReason.Malformed);return s?(o.optedOut=!e,[4,r.default.updatePlayer(n,s,{notification_types:S.default.getNotificationTypeFromOptIn(e)})]):(a.info(new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId)),[2]);case 4:return i.sent(),[4,l.default.setSubscription(o)];case 5:return i.sent(),b.default.onInternalSubscriptionSet(o.optedOut),b.default.checkAndTriggerSubscriptionChanged(),[2]}})})},e.isOptedOut=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return n.sent(),f.logMethodCall("isOptedOut",e),[4,l.default.getSubscription()];case 2:return t=n.sent().optedOut,f.executeCallback(e,t),[2,t]}})})},e.optOut=function(t,n){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),f.logMethodCall("optOut",t,n),!g.ValidatorUtils.isValidBoolean(t))throw new O.InvalidArgumentError("doOptOut",O.InvalidArgumentReason.Malformed);return[4,e.setSubscription(!t)];case 2:return i.sent(),f.executeCallback(n),[2]}})})},e.getUserId=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("getUserId",e),[4,l.default.getSubscription()];case 2:return t=i.sent(),n=t.deviceId,f.executeCallback(e,n),[2,n]}})})},e.getRegistrationId=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("getRegistrationId",e),[4,l.default.getSubscription()];case 2:return t=i.sent(),n=t.pushToken,f.executeCallback(e,n),[2,n]}})})},e.getSubscription=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("getSubscription",e),[4,l.default.getSubscription()];case 2:return t=i.sent(),n=!t.optedOut,f.executeCallback(e,n),[2,n]}})})},e.sendSelfNotification=function(e,t,n,o,s,a){return void 0===e&&(e="OneSignal Test Message"),void 0===t&&(t="This is an example notification."),void 0===n&&(n=new URL(location.href).origin+"?_osp=do_not_open"),i.__awaiter(this,void 0,void 0,function(){var u,c;return i.__generator(this,function(i){switch(i.label){case 0:return[4,f.awaitOneSignalInitAndSupported()];case 1:return i.sent(),f.logMethodCall("sendSelfNotification",e,t,n,o,s,a),[4,l.default.getAppConfig()];case 2:return u=i.sent(),[4,l.default.getSubscription()];case 3:if(c=i.sent(),!u.appId)throw new E.InvalidStateError(E.InvalidStateReason.MissingAppId);if(!c.deviceId)throw new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId);if(!g.ValidatorUtils.isValidUrl(n))throw new O.InvalidArgumentError("url",O.InvalidArgumentReason.Malformed);if(!g.ValidatorUtils.isValidUrl(o,{allowEmpty:!0,requireHttps:!0}))throw new O.InvalidArgumentError("icon",O.InvalidArgumentReason.Malformed);return[4,r.default.sendNotification(u.appId,[c.deviceId],{en:e},{en:t},n,o,s,a)];case 4:return[2,i.sent()]}})})},e.push=function(t){if("function"==typeof t)t();else{e[t.shift()].apply(null,t)}},e.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.once=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();q.VERSION=o.default.version(),q._VERSION=o.default.version(),q.sdkEnvironment=U.default,q._notificationOpenedCallbacks=[],q._idsAvailable_callback=[],q._defaultLaunchURL=null,q.config=null,q.__isPopoverShowing=!1,q._sessionInitAlreadyRunning=!1,q._isNotificationEnabledCallback=[],q._subscriptionSet=!0,q.modalUrl=null,q._windowWidth=650,q._windowHeight=568,q._isNewVisitor=!1,q._channel=null,q.cookie=c,q.initialized=!1,q.notifyButton=null,q.store=w.default,q.environment=o.default,q.database=l.default,q.event=u.default,q.browser=d,q.popover=null,q.log=a,q.swivel=v,q.api=r.default,q.indexedDb=s.default,q.mainHelper=S.default,q.subscriptionHelper=T.default,q.workerHelper=I.default,q.httpHelper=C.default,q.eventHelper=b.default,q.initHelper=P.default,q.testHelper=N.default,q.objectAssign=p,q.appConfig=null,q.SERVICE_WORKER_UPDATER_PATH="OneSignalSDKUpdaterWorker.js",q.SERVICE_WORKER_PATH="OneSignalSDKWorker.js",q.SERVICE_WORKER_PARAM={scope:"/"},q._LOGGING=!1,q.LOGGING=!1,q._usingNativePermissionHook=!1,q._initCalled=!1,q.__initAlreadyCalled=!1,q.closeNotifications=I.default.closeNotifications,q.isServiceWorkerActive=I.default.isServiceWorkerActive,q._showingHttpPermissionRequest=!1,q.checkAndWipeUserSubscription=function(){},q.crypto=K.default,q._initHttp=C.default.initHttp,q._initPopup=function(){return q.subscriptionPopup.subscribe()},q.POSTMAM_COMMANDS={CONNECTED:"connect",REMOTE_NOTIFICATION_PERMISSION:"postmam.remoteNotificationPermission",REMOTE_DATABASE_GET:"postmam.remoteDatabaseGet",REMOTE_DATABASE_PUT:"postmam.remoteDatabasePut",REMOTE_DATABASE_REMOVE:"postmam.remoteDatabaseRemove",REMOTE_OPERATION_COMPLETE:"postman.operationComplete",REMOTE_RETRIGGER_EVENT:"postmam.remoteRetriggerEvent",MODAL_LOADED:"postmam.modalPrompt.loaded",MODAL_PROMPT_ACCEPTED:"postmam.modalPrompt.accepted",MODAL_PROMPT_REJECTED:"postmam.modalPrompt.canceled",POPUP_LOADED:"postmam.popup.loaded",POPUP_ACCEPTED:"postmam.popup.accepted",POPUP_REJECTED:"postmam.popup.canceled",POPUP_CLOSING:"postman.popup.closing",REMOTE_NOTIFICATION_PERMISSION_CHANGED:"postmam.remoteNotificationPermissionChanged",IFRAME_POPUP_INITIALIZE:"postmam.iframePopupInitialize",UNSUBSCRIBE_FROM_PUSH:"postmam.unsubscribeFromPush",BEGIN_BROWSING_SESSION:"postmam.beginBrowsingSession",REQUEST_HOST_URL:"postmam.requestHostUrl",SHOW_HTTP_PERMISSION_REQUEST:"postmam.showHttpPermissionRequest",IS_SHOWING_HTTP_PERMISSION_REQUEST:"postmam.isShowingHttpPermissionRequest",WINDOW_TIMEOUT:"postmam.windowTimeout",FINISH_REMOTE_REGISTRATION:"postmam.finishRemoteRegistration",FINISH_REMOTE_REGISTRATION_IN_PROGRESS:"postmam.finishRemoteRegistrationInProgress",POPUP_BEGIN_MESSAGEPORT_COMMS:"postmam.beginMessagePortComms",SERVICEWORKER_COMMAND_REDIRECT:"postmam.command.redirect",HTTP_PERMISSION_REQUEST_RESUBSCRIBE:"postmam.httpPermissionRequestResubscribe",MARK_PROMPT_DISMISSED:"postmam.markPromptDismissed",IS_SUBSCRIBED:"postmam.isSubscribed",UNSUBSCRIBE_PROXY_FRAME:"postman.unsubscribeProxyFrame"},q.EVENTS={CUSTOM_PROMPT_CLICKED:"customPromptClick",NATIVE_PROMPT_PERMISSIONCHANGED:"notificationPermissionChange",SUBSCRIPTION_CHANGED:"subscriptionChange",WELCOME_NOTIFICATION_SENT:"sendWelcomeNotification",NOTIFICATION_DISPLAYED:"notificationDisplay",NOTIFICATION_DISMISSED:"notificationDismiss",NOTIFICATION_CLICKED:"notificationClick",SDK_INITIALIZED:"initialize",REGISTERED:"register",POPUP_CLOSING:"popupClose",PERMISSION_PROMPT_DISPLAYED:"permissionPromptDisplay",TEST_INIT_OPTION_DISABLED:"testInitOptionDisabled",TEST_WOULD_DISPLAY:"testWouldDisplay",POPUP_WINDOW_TIMEOUT:"popupWindowTimeout"},q.NOTIFICATION_TYPES={SUBSCRIBED:1,UNSUBSCRIBED:-2},t.default=q,Object.defineProperty(q,"LOGGING",{get:function(){return q._LOGGING},set:function(e){e?(a.setDefaultLevel(a.levels.TRACE),q._LOGGING=!0):(a.setDefaultLevel(a.levels.WARN),q._LOGGING=!1)},enumerable:!0,configurable:!0}),q.context=new W.default,m.merge(q,new h),q.LOGGING?a.setDefaultLevel(a.levels.TRACE):a.setDefaultLevel(a.levels.WARN),H.default.ensureBackwardsCompatibility(q),a.info("%cOneSignal Web SDK loaded (version "+q._VERSION+", "+U.default.getWindowEnv().toString()+" environment).",f.getConsoleStyle("bold")),a.debug("Current Page URL: "+("undefined"==typeof location?"NodeJS":location.href)),a.debug("Browser Environment: "+d.name+" "+d.version)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.promiseStub=function(){return{then:e.promiseStub,catch:e.promiseStub}},Object.defineProperty(e,"log",{get:function(){return{setLevel:function(){}}},enumerable:!0,configurable:!0}),e.isPushNotificationsSupported=function(){return!1},e.push=function(e){if("function"==typeof e)e();else{var t=e.shift();OneSignal[t].apply(null,e)}},e}();t.default=i;var o=i;o.init=o.showHttpPrompt=o.registerForPushNotifications=o.showHttpPermissionRequest=o.getNotificationPermission=o.on=o.off=o.once=o.config=o.SERVICE_WORKER_PATH=o.SERVICE_WORKER_UPDATER_PATH=o.checkAndWipeUserSubscription=o.subscriptionBell=o.notifyButton=function(){},o.setDefaultNotificationUrl=o.setDefaultTitle=o.syncHashedEmail=o.getTags=o.sendTag=o.sendTags=o.deleteTag=o.deleteTags=o.addListenerForNotificationOpened=o.getIdsAvailable=o.isPushNotificationsEnabled=o.setSubscription=o.getUserId=o.getRegistrationId=o.getSubscription=o.sendSelfNotification=o.promiseStub},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(9),r=n(17),s=n(1),a=n(2),u=n(5),c=n(28),l=n(12),d=n(8),f=n(3),g=n(24),p=function(){function e(){}return Object.defineProperty(e,"VERSION",{get:function(){return o.default.version()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"environment",{get:function(){return o.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"log",{get:function(){return s},enumerable:!0,configurable:!0}),Object.defineProperty(e,"swivel",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(e,"database",{get:function(){return d.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sdkEnvironment",{get:function(){return f.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"browser",{get:function(){return l},enumerable:!0,configurable:!0}),e.run=function(){self.addEventListener("push",e.onPushReceived),self.addEventListener("notificationclose",e.onNotificationClosed),self.addEventListener("notificationclick",function(t){return t.waitUntil(e.onNotificationClicked(t))}),self.addEventListener("install",e.onServiceWorkerInstalled),self.addEventListener("activate",e.onServiceWorkerActivated),self.addEventListener("pushsubscriptionchange",e.onPushSubscriptionChange),c.on("data",e.onMessageReceived),l.firefox&&l.version&&a.contains(l.version,"44")&&d.default.get("Options","serviceWorkerRefetchRequests").then(function(t){1==t?(s.info("Detected Firefox v44; installing fetch handler to refetch all requests."),e.REFETCH_REQUESTS=!0,self.addEventListener("fetch",e.onFetch)):(e.SKIP_REFETCH_REQUESTS=!0,s.info("Detected Firefox v44 but not refetching requests because option is set to false."))}).catch(function(t){s.error(t),e.REFETCH_REQUESTS=!0,self.addEventListener("fetch",e.onFetch)})},e.onMessageReceived=function(t,n){if(s.debug("%c"+a.capitalize(f.default.getWindowEnv().toString())+" ⬸ Host:",a.getConsoleStyle("serviceworkermessage"),n,t),!n)return void s.debug("Returning from empty data message.");"notification.closeall"===n?self.registration.getNotifications(null).then(function(e){for(var t=0,n=e;t<n.length;t++){n[t].close()}}):n.query&&e.processQuery(n.query,n.response)},e.processQuery=function(t,n){return e.queries||s.debug("queryClient() was not called before processQuery(). ServiceWorker.queries is empty."),e.queries[t]?e.queries[t].promise?void e.queries[t].promiseResolve(n):void s.debug("Expected ServiceWorker.queries["+t+"].promise value to be a Promise: "+e.queries[t]):void s.debug("Received query "+t+" response "+n+". Expected ServiceWorker.queries to be preset to a hash.")},e.queryClient=function(t,n){return e.queries||(e.queries={}),e.queries[n]||(e.queries[n]={}),e.queries[n].promise=new Promise(function(i,o){e.queries[n].promiseResolve=i,e.queries[n].promiseReject=o,c.emit(t.id,n)}),e.queries[n].promise},e.onPushReceived=function(t){s.debug("Called %conPushReceived("+JSON.stringify(t,null,4)+"):",a.getConsoleStyle("code"),t),t.waitUntil(e.parseOrFetchNotifications(t).then(function(t){if(!t||0==t.length)return s.debug("Because no notifications were retrieved, we'll display the last known notification, so long as it isn't the welcome notification."),e.displayBackupNotification();for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i];s.debug("Raw Notification from OneSignal:",r);var a=e.buildStructuredNotificationObject(r);n.push(function(t){return e.displayNotification(t).then(function(){return e.updateBackupNotification(t).catch(function(e){return s.error(e)})}).then(function(){c.broadcast("notification.displayed",t)}).then(function(){return e.executeWebhooks("notification.displayed",t).catch(function(e){return s.error(e)})})}.bind(null,a))}return n.reduce(function(e,t){return e=e.then(t)},Promise.resolve())}).catch(function(t){if(s.debug("Failed to display a notification:",t),!e.UNSUBSCRIBED_FROM_NOTIFICATIONS)return s.debug("Because a notification failed to display, we'll display the last known notification, so long as it isn't the welcome notification."),e.displayBackupNotification();s.debug("Because we have just unsubscribed from notifications, we will not show anything.")}))},e.executeWebhooks=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n,o,r,u,c;return i.__generator(this,function(i){switch(i.label){case 0:return[4,d.default.getSubscription()];case 1:return n=i.sent().deviceId,[4,d.default.get("Options","webhooks.cors")];case 2:return o=i.sent(),[4,d.default.get("Options","webhooks."+e)];case 3:return(r=i.sent())?(u={event:e,id:t.id,userId:n,action:t.action,buttons:t.buttons,heading:t.heading,content:t.content,url:t.url,icon:t.icon,data:t.data},c={method:"post",mode:"no-cors",body:JSON.stringify(u)},o&&(c.mode="cors",c.headers={"X-OneSignal-Event":e,"Content-Type":"application/json"}),s.debug("Executing "+e+" webhook "+(o?"with":"without")+" CORS %cPOST "+r,a.getConsoleStyle("code"),":",u),[4,fetch(r,c)]):[3,5];case 4:return[2,i.sent()];case 5:return[2]}})})},e.getActiveClients=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,self.clients.matchAll({type:"window",includeUncontrolled:!0})];case 1:for(e=i.sent(),t=[],n=0,o=e;n<o.length;n++){if(r=o[n],r.frameType&&"nested"===r.frameType){if(!a.contains(r.url,f.default.getOneSignalApiUrl().host)&&!a.contains(r.url,".os.tc"))continue;r.isSubdomainIframe=!0}t.push(r)}return[2,t]}})})},e.buildStructuredNotificationObject=function(e){var t={id:e.custom.i,heading:e.title,content:e.alert,data:e.custom.a,url:e.custom.u,icon:e.icon,image:e.image,tag:e.tag,badge:e.badge,vibrate:e.vibrate};if(e.o){t.buttons=[];for(var n=0,i=e.o;n<i.length;n++){var o=i[n];t.buttons.push({action:o.i,title:o.n,icon:o.p,url:o.u})}}return a.trimUndefined(t)},e.ensureImageResourceHttps=function(e){if(!e)return null;try{var t=new URL(e);if("localhost"===t.hostname||t.hostname.indexOf("192.168")!==-1||"127.0.0.1"===t.hostname||"https:"===t.protocol)return e;if("i0.wp.com"===t.hostname||"i1.wp.com"===t.hostname||"i2.wp.com"===t.hostname||"i3.wp.com"===t.hostname)return"https://"+t.hostname+t.pathname;return"https://i0.wp.com/"+(t.host+t.pathname)}catch(e){}},e.ensureNotificationResourcesHttps=function(t){if(t&&(t.icon&&(t.icon=e.ensureImageResourceHttps(t.icon)),t.image&&(t.image=e.ensureImageResourceHttps(t.image)),t.buttons&&t.buttons.length>0))for(var n=0,i=t.buttons;n<i.length;n++){var o=i[n];o.icon&&(o.icon=e.ensureImageResourceHttps(o.icon))}},e.displayNotification=function(t,n){return s.debug("Called %cdisplayNotification("+JSON.stringify(t,null,4)+"):",a.getConsoleStyle("code"),t),Promise.all([e._getTitle(),d.default.get("Options","defaultIcon"),d.default.get("Options","persistNotification"),d.default.get("Ids","appId")]).then(function(i){var o=i[0],r=i[1],s=i[2],a=i[3];t.heading=t.heading?t.heading:o,t.icon=t.icon?t.icon:r?r:void 0;var c={};c.tag=t.tag||a,c.persistNotification=s,n||(n={}),t=u(t,n),e.ensureNotificationResourcesHttps(t);var l={body:t.content,icon:t.icon,image:t.image,data:t,actions:t.buttons,tag:c.tag,requireInteraction:c.persistNotification,renotify:!0,badge:t.badge,vibrate:t.vibrate};return l=e.filterNotificationOptions(l),self.registration.showNotification(t.heading,l)})},e.filterNotificationOptions=function(e){if("object"!=typeof e)return e;var t=u({},e);if(""===l.name&&""===l.version)var n=l._detect(navigator.userAgent);else var n=l;return n.chrome&&n.mac&&t&&(t.requireInteraction=!1),t},e.updateBackupNotification=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return t=e.data&&e.data.__isOneSignalWelcomeNotification,t?[2]:[4,d.default.put("Ids",{type:"backupNotification",id:e})];case 1:return n.sent(),[2]}})})},e.displayBackupNotification=function(){return d.default.get("Ids","backupNotification").then(function(t){var n={persistNotification:!1,data:{__isOneSignalBackupNotification:!0}};return t?e.displayNotification(t,n):e.displayNotification({content:"You have new updates."},n)})},e.shouldOpenNotificationUrl=function(e){return"javascript:void(0);"!==e&&"do_not_open"!==e&&!a.contains(e,"_osp=do_not_open")},e.onNotificationClosed=function(t){s.debug("Called %conNotificationClosed("+JSON.stringify(t,null,4)+"):",a.getConsoleStyle("code"),t);var n=t.notification.data;c.broadcast("notification.dismissed",n),t.waitUntil(e.executeWebhooks("notification.dismissed",n))},e.getNotificationUrlToOpen=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r,s;return i.__generator(this,function(i){switch(i.label){case 0:return t=self.registration.scope,[4,d.default.getAppState()];case 1:if(n=i.sent().defaultNotificationUrl,n&&(t=n),e.action)for(o=0,r=e.buttons;o<r.length;o++)s=r[o],s.action===e.action&&s.url&&""!==s.url&&(t=s.url);else e.url&&""!==e.url&&(t=e.url);return[2,t]}})})},e.onNotificationClicked=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o,u,l,f,g,p,h,m,v,b,S,_,y,O,w,E,P,I,T,C,N;return i.__generator(this,function(i){switch(i.label){case 0:return s.debug("Called %conNotificationClicked("+JSON.stringify(t,null,4)+"):",a.getConsoleStyle("code"),t),t.notification.close(),n=t.notification.data,t.action&&(n.action=t.action),o="exact",u="navigate",[4,d.default.get("Options","notificationClickHandlerMatch")];case 1:return l=i.sent(),l&&(o=l),[4,this.database.get("Options","notificationClickHandlerAction")];case 2:return f=i.sent(),f&&(u=f),[4,e.getActiveClients()];case 3:return g=i.sent(),[4,e.getNotificationUrlToOpen(n)];case 4:p=i.sent(),h=e.shouldOpenNotificationUrl(p),m=!1,v=0,b=g,i.label=5;case 5:return v<b.length?(S=b[v],_=S.url,S.isSubdomainIframe?[4,d.default.get("Options","lastKnownHostUrl")]:[3,8]):[3,37];case 6:return y=i.sent(),_=y,y?[3,8]:[4,d.default.get("Options","defaultUrl")];case 7:_=i.sent(),i.label=8;case 8:O="";try{O=new URL(_).origin}catch(e){s.error("Failed to get the HTTP site's actual origin:",e)}w=null;try{w=new URL(p).origin}catch(e){}if(!("exact"===o&&_===p||"origin"===o&&O===w))return[3,36];if(!(S.isSubdomainIframe&&_===p||!S.isSubdomainIframe&&S.url===p||"focus"===u&&O===w))return[3,13];c.emit(S.id,"notification.clicked",n),i.label=9;case 9:return i.trys.push([9,11,,12]),[4,S.focus()];case 10:return i.sent(),[3,12];case 11:return E=i.sent(),s.error("Failed to focus:",S,E),[3,12];case 12:return[3,35];case 13:if(!S.isSubdomainIframe)return[3,21];i.label=14;case 14:return i.trys.push([14,16,,17]),s.debug("Client is subdomain iFrame. Attempting to focus() client."),[4,S.focus()];case 15:return i.sent(),[3,17];case 16:return P=i.sent(),s.error("Failed to focus:",S,P),[3,17];case 17:return h?(s.debug("Redirecting HTTP site to "+p+"."),[4,d.default.put("NotificationOpened",{url:p,data:n,timestamp:Date.now()})]):[3,19];case 18:return i.sent(),c.emit(S.id,"command.redirect",p),[3,20];case 19:s.debug("Not navigating because link is special."),i.label=20;case 20:return[3,35];case 21:if(!S.navigate)return[3,32];i.label=22;case 22:return i.trys.push([22,24,,25]),s.debug("Client is standard HTTPS site. Attempting to focus() client."),[4,S.focus()];case 23:return i.sent(),[3,25];case 24:return I=i.sent(),s.error("Failed to focus:",S,I),[3,25];case 25:return i.trys.push([25,30,,31]),h?(s.debug("Redirecting HTTPS site to ("+p+")."),[4,d.default.put("NotificationOpened",{url:p,data:n,timestamp:Date.now()})]):[3,28];case 26:return i.sent(),[4,S.navigate(p)];case 27:return i.sent(),[3,29];case 28:s.debug("Not navigating because link is special."),i.label=29;case 29:return[3,31];case 30:return T=i.sent(),s.error("Failed to navigate:",S,p,T),[3,31];case 31:return[3,35];case 32:return[4,d.default.put("NotificationOpened",{url:p,data:n,timestamp:Date.now()})];case 33:return i.sent(),[4,e.openUrl(p)];case 34:i.sent(),i.label=35;case 35:return m=!0,[3,37];case 36:return v++,[3,5];case 37:return!h||m?[3,40]:[4,d.default.put("NotificationOpened",{url:p,data:n,timestamp:Date.now()})];case 38:return i.sent(),[4,e.openUrl(p)];case 39:i.sent(),i.label=40;case 40:return[4,d.default.getAppConfig()];case 41:return C=i.sent().appId,[4,d.default.getSubscription()];case 42:return N=i.sent().deviceId,C&&N?[4,r.default.put("notifications/"+n.id,{app_id:C,player_id:N,opened:!0})]:[3,44];case 43:i.sent(),i.label=44;case 44:return[4,e.executeWebhooks("notification.clicked",n)];case 45:return[2,i.sent()]}})})},e.openUrl=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:s.debug("Opening notification URL:",e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,self.clients.openWindow(e)];case 2:return[2,n.sent()];case 3:return t=n.sent(),s.warn("Failed to open the URL '"+e+"':",t),[3,4];case 4:return[2]}})})},e.onServiceWorkerInstalled=function(e){if(s.debug("Called %conServiceWorkerInstalled("+JSON.stringify(e,null,4)+"):",a.getConsoleStyle("code"),e),s.info("Installing service worker: %c"+self.location.pathname,a.getConsoleStyle("code"),"(version "+o.default.version()+")"),a.contains(self.location.pathname,"OneSignalSDKWorker"))var t="WORKER1_ONE_SIGNAL_SW_VERSION";else var t="WORKER2_ONE_SIGNAL_SW_VERSION";e.waitUntil(d.default.put("Ids",{type:t,id:o.default.version()}).then(function(){return self.skipWaiting()}))},e.onServiceWorkerActivated=function(t){s.debug("Called %conServiceWorkerActivated("+JSON.stringify(t,null,4)+"):",a.getConsoleStyle("code"),t);var n=self.clients.claim().then(function(){return d.default.get("Ids","userId")}).then(function(t){if(self.registration&&t)return e._subscribeForPush(self.registration).catch(function(e){return s.error(e)})});t.waitUntil(n)},e.onFetch=function(e){e.respondWith(fetch(e.request))},e.onPushSubscriptionChange=function(t){s.debug("Called %conPushSubscriptionChange("+JSON.stringify(t,null,4)+"):",a.getConsoleStyle("code"),t),t.waitUntil(e._subscribeForPush(self.registration))},e.simulateEvent=function(e){self.dispatchEvent(new ExtendableEvent(e))},e._subscribeForPush=function(t){s.debug("Called %c_subscribeForPush()",a.getConsoleStyle("code"));var n=null;return d.default.get("Ids","appId").then(function(e){return n=e,t.pushManager.getSubscription()}).then(function(e){return s.debug("Resubscribing old subscription",e,"within the service worker ..."),e&&e.options?t.pushManager.subscribe(e.options):Promise.resolve()}).then(function(t){var i=null;if(t){if(i={},s.debug("Finished resubscribing for push:",t),void 0!==t.subscriptionId?i.endpointOrToken=t.subscriptionId:i.endpointOrToken=t.endpoint,t.getKey){var o=null;try{o=t.getKey("p256dh")}catch(e){}var r=null;try{r=t.getKey("auth")}catch(e){}if(o){var a=btoa(String.fromCharCode.apply(null,new Uint8Array(o)));i.p256dh=a}if(r){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(r)));i.auth=u}}}else s.info("Could not subscribe your browser for push notifications.");return e.registerWithOneSignal(n,i)})},e.registerWithOneSignal=function(t,n){var i=a.getDeviceTypeForBrowser();return Promise.all([d.default.get("Ids","userId")]).then(function(s){var a=s[0];s[1];if(!a)return Promise.reject("No user ID found; cannot update existing player info");var u="players/"+a,c={app_id:t,device_type:i,language:o.default.getLanguage(),timezone:(new Date).getTimezoneOffset()*-60,device_model:navigator.platform+" "+l.name,device_os:l.version,sdk:e.VERSION};if(n){c.identifier=n.endpointOrToken;var f=n.endpointOrToken.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");d.default.put("Ids",{type:"registrationId",id:f}),n.auth&&(c.web_auth=n.auth),n.p256dh&&(c.web_p256=n.p256dh)}return r.default.put(u,c)}).then(function(e){if(e){e.success||s.error("Resubscription registration with OneSignal failed:",e);var t=e.id;t&&d.default.put("Ids",{type:"userId",id:t})}else s.debug("Resubscription registration failed because no user ID found.")})},e._getTitle=function(){return new Promise(function(e,t){Promise.all([d.default.get("Options","defaultTitle"),d.default.get("Options","pageTitle")]).then(function(t){var n=t[0],i=t[1];e(null!==n?n:null!=i?i:"")})})},e.parseOrFetchNotifications=function(t){if(t.data){return e.isValidPushPayload(t.data)?(s.debug("Received a valid encrypted push payload."),Promise.resolve([t.data.json()])):Promise.reject("Unexpected push message payload received: "+t.data.text())}return e.retrieveNotifications()},e.isValidPushPayload=function(e){try{var t=e.json();return!!(t&&t.custom&&t.custom.i&&a.isValidUuid(t.custom.i))||(s.debug("isValidPushPayload: Valid JSON but missing notification UUID:",t),!1)}catch(e){return s.debug("isValidPushPayload: Parsing to JSON failed with:",e),!1}},e.retrieveNotifications=function(){return new Promise(function(t,n){var i=[];d.default.get("Ids","userId").then(function(t){return t?(s.debug("Legacy push signal received, retrieving contents from players/"+t+"/chromeweb_notification"),r.default.get("players/"+t+"/chromeweb_notification")):(s.debug("Tried to get notification contents, but IndexedDB is missing user ID info."),Promise.all([d.default.get("Ids","appId"),self.registration.pushManager.getSubscription().then(function(e){return e.endpoint})]).then(function(e){var t=e[0],n=e[1],i=a.getDeviceTypeForBrowser();return r.default.getUserIdFromSubscriptionIdentifier(t,i,n).then(function(e){return e?(s.debug("Recovered OneSignal user ID:",e),Promise.all([d.default.put("Ids",{type:"userId",id:e}),d.default.put("Ids",{type:"registrationId",id:n.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"")})]).then(function(){return s.debug("Attempting to retrieve the notification again now with a recovered user ID."),r.default.get("players/"+e+"/chromeweb_notification")})):Promise.reject("Recovered user ID was null. Unsubscribing from push notifications.")})}).catch(function(t){return s.debug("Unsuccessfully attempted to recover OneSignal user ID:",t),self.registration.pushManager.getSubscription().then(function(e){return e.unsubscribe()}).then(function(t){s.debug("Unsubscribed from push notifications result:",t),e.UNSUBSCRIBED_FROM_NOTIFICATIONS=!0})}))}).then(function(e){for(var n=0;n<e.length;n++)i.push(JSON.parse(e[n]));0==i.length&&s.warn("OneSignal Worker: Received a GCM push signal, but there were no messages to retrieve. Are you using the wrong API URL?",f.default.getOneSignalApiUrl().toString()),t(i)})})},e}();t.ServiceWorker=p,"undefined"==typeof self&&void 0!==e?e.OneSignalWorker=p:self.OneSignalWorker=p,s.setDefaultLevel(f.default.getBuildEnv()===g.BuildEnvironmentKind.Development?s.levels.TRACE:s.levels.ERROR),s.info("%cOneSignal Service Worker loaded (version "+o.default.version()+", "+f.default.getWindowEnv().toString()+" environment).",a.getConsoleStyle("bold")),"undefined"!=typeof self&&p.run()}).call(t,n(29))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(20),r=function(e){function t(){return e.call(this,".onesignal-bell-launcher-badge","onesignal-bell-launcher-badge-opened",null,"onesignal-bell-launcher-badge-active",null,"hidden")||this}return i.__extends(t,e),t.prototype.increment=function(){if(!isNaN(this.content)){var e=+this.content;return e+=1,this.content=e.toString(),e}},t.prototype.decrement=function(){if(!isNaN(this.content)){var e=+this.content;return e-=1,this.content=e>0?e.toString():"",e}},t}(o.default);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(4),s=n(20),a=n(18),u=n(16),c=n(30),l=n(7),d=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-button",null,null,"onesignal-bell-launcher-button-active",null,"shown","")||this;return n.bell=t,n.events={mouse:"bell.launcher.button.mouse"},n.element.addEventListener("touchstart",function(e){n.onHovering(e),n.onTap(e)}),n.element.addEventListener("mouseenter",function(e){n.onHovering(e)}),n.element.addEventListener("mouseleave",function(e){n.onHovered(e)}),n.element.addEventListener("touchmove",function(e){n.onHovered(e)}),n.element.addEventListener("mousedown",function(e){n.onTap(e)}),n.element.addEventListener("mouseup",function(e){n.onEndTap(e)}),n.element.addEventListener("click",function(e){n.onHovered(e),n.onClick(e)}),n}return i.__extends(t,e),t.prototype.onHovering=function(e){(u.default.isEmpty(this.events.mouse)||"out"===u.default.getLast(this.events.mouse))&&r.default.trigger(a.default.EVENTS.HOVERING),u.default.put(this.events.mouse,"over")},t.prototype.onHovered=function(e){u.default.put(this.events.mouse,"out"),r.default.trigger(a.default.EVENTS.HOVERED)},t.prototype.onTap=function(e){this.pulse(),this.activate(),this.bell.badge.activate()},t.prototype.onEndTap=function(e){this.inactivate(),this.bell.badge.inactivate()},t.prototype.onClick=function(e){var t=this;if(r.default.trigger(a.default.EVENTS.BELL_CLICK),r.default.trigger(a.default.EVENTS.LAUNCHER_CLICK),!this.bell.message.shown||this.bell.message.contentType!=c.default.TYPES.MESSAGE){var n=u.default.getLast("subscription.optedOut");return this.bell.unsubscribed?n?this.bell.launcher.activateIfInactive().then(function(){t.bell.showDialogProcedure()}):(OneSignal.registerForPushNotifications(),this.bell._ignoreSubscriptionState=!0,OneSignal.once(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,function(e){t.bell.message.display(c.default.TYPES.MESSAGE,t.bell.text["message.action.subscribed"],c.default.TIMEOUT).then(function(){t.bell._ignoreSubscriptionState=!1,t.bell.launcher.inactivate()})})):this.bell.subscribed?this.bell.launcher.activateIfInactive().then(function(){t.bell.showDialogProcedure()}):this.bell.blocked&&(l.default.isUsingSubscriptionWorkaround()?OneSignal.registerForPushNotifications():this.bell.launcher.activateIfInactive().then(function(){t.bell.showDialogProcedure()})),this.bell.message.hide()}},t.prototype.pulse=function(){o.removeDomElement(".pulse-ring"),o.addDomElement(this.element,"beforeend",'<div class="pulse-ring"></div>'),this.bell.setCustomColorsIfSpecified()},t}(s.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(4),s=n(21),a=n(12),u=n(18),c=n(3),l=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-dialog","onesignal-bell-launcher-dialog-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-dialog-body")||this;return n.bell=t,n.subscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #subscribe-button",n.unsubscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button",n.notificationIcons=null,n}return i.__extends(t,e),t.prototype.getPlatformNotificationIcon=function(){return this.notificationIcons?a.chrome||a.firefox?this.notificationIcons.chrome||this.notificationIcons.safari:a.safari?this.notificationIcons.safari||this.notificationIcons.chrome:void 0:null},t.prototype.show=function(){var t=this;return this.updateBellLauncherDialogBody().then(function(){return e.prototype.show.call(t)})},Object.defineProperty(t.prototype,"subscribeButtonSelectorId",{get:function(){return"subscribe-button"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsubscribeButtonSelectorId",{get:function(){return"unsubscribe-button"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subscribeButton",{get:function(){return this.element.querySelector("#"+this.subscribeButtonSelectorId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsubscribeButton",{get:function(){return this.element.querySelector("#"+this.unsubscribeButtonSelectorId)},enumerable:!0,configurable:!0}),t.prototype.updateBellLauncherDialogBody=function(){var e=this;return OneSignal.getSubscription().then(function(t){o.clearDomElementChildren(document.querySelector(e.nestedContentSelector));var n="Nothing to show.",i="";if(e.bell.options.showCredit&&(i='<div class="divider"></div><div class="kickback">Powered by <a href="https://onesignal.com" class="kickback" target="_blank">OneSignal</a></div>'),e.bell.state===u.default.STATES.SUBSCRIBED&&t===!0||e.bell.state===u.default.STATES.UNSUBSCRIBED&&t===!1){var s="",l=e.getPlatformNotificationIcon();s=l?'<div class="push-notification-icon"><img src="'+l+'"></div>':'<div class="push-notification-icon push-notification-icon-default"></div>';var d="";d=e.bell.state!==u.default.STATES.SUBSCRIBED?'<button type="button" class="action" id="'+e.subscribeButtonSelectorId+'">'+e.bell.text["dialog.main.button.subscribe"]+"</button>":'<button type="button" class="action" id="'+e.unsubscribeButtonSelectorId+'">'+e.bell.text["dialog.main.button.unsubscribe"]+"</button>",n="<h1>"+e.bell.text["dialog.main.title"]+'</h1><div class="divider"></div><div class="push-notification">'+s+'<div class="push-notification-text-container"><div class="push-notification-text push-notification-text-short"></div><div class="push-notification-text"></div><div class="push-notification-text push-notification-text-medium"></div><div class="push-notification-text"></div><div class="push-notification-text push-notification-text-medium"></div></div></div><div class="action-container">'+d+"</div>"+i}else if(e.bell.state===u.default.STATES.BLOCKED){var l=null;a.chrome?a.mobile||a.tablet||(l=c.default.getOneSignalApiUrl().origin+"/bell/chrome-unblock.jpg"):a.firefox?l=c.default.getOneSignalApiUrl().origin+"/bell/firefox-unblock.jpg":a.safari&&(l=c.default.getOneSignalApiUrl().origin+"/bell/safari-unblock.jpg");var f="";l&&(f='<a href="'+l+'" target="_blank"><img src="'+l+'"></a></div>'),(a.mobile||a.tablet)&&a.chrome&&(f="<ol><li>Access <strong>Settings</strong> by tapping the three menu dots <strong>⋮</strong></li><li>Click <strong>Site settings</strong> under Advanced.</li><li>Click <strong>Notifications</strong>.</li><li>Find and click this entry for this website.</li><li>Click <strong>Notifications</strong> and set it to <strong>Allow</strong>.</li></ol>"),n="<h1>"+e.bell.text["dialog.blocked.title"]+'</h1><div class="divider"></div><div class="instructions"><p>'+e.bell.text["dialog.blocked.message"]+"</p>"+f+"</div>"+i}o.addDomElement(document.querySelector(e.nestedContentSelector),"beforeend",n),e.subscribeButton&&e.subscribeButton.addEventListener("click",function(){return r.default.trigger(u.default.EVENTS.SUBSCRIBE_CLICK)}),e.unsubscribeButton&&e.unsubscribeButton.addEventListener("click",function(){return r.default.trigger(u.default.EVENTS.UNSUBSCRIBE_CLICK)}),e.bell.setCustomColorsIfSpecified()})},t}(s.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(1),s=n(20),a=n(15),u=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher","onesignal-bell-launcher-active",null,null,"onesignal-bell-launcher-inactive","hidden","active")||this;return n.bell=t,n.wasInactive=!1,n}return i.__extends(t,e),t.prototype.resize=function(e){return i.__awaiter(this,void 0,void 0,function(){var t=this;return i.__generator(this,function(n){switch(n.label){case 0:if(!this.element)throw new a.InvalidStateError(a.InvalidStateReason.MissingDomElement);if("small"===e&&o.hasCssClass(this.element,"onesignal-bell-launcher-sm")||"medium"===e&&o.hasCssClass(this.element,"onesignal-bell-launcher-md")||"large"===e&&o.hasCssClass(this.element,"onesignal-bell-launcher-lg"))return[2,Promise.resolve(this)];if(o.removeCssClass(this.element,"onesignal-bell-launcher-sm"),o.removeCssClass(this.element,"onesignal-bell-launcher-md"),o.removeCssClass(this.element,"onesignal-bell-launcher-lg"),"small"===e)o.addCssClass(this.element,"onesignal-bell-launcher-sm");else if("medium"===e)o.addCssClass(this.element,"onesignal-bell-launcher-md");else{if("large"!==e)throw new Error("Invalid OneSignal bell size "+e);o.addCssClass(this.element,"onesignal-bell-launcher-lg")}return this.shown?[3,1]:[2,this];case 1:return[4,new Promise(function(e){if(0==t.targetTransitionEvents.length)return e(t);var n=setTimeout(function(){r.debug("Launcher did not completely resize (state: "+t.state+", activeState: "+t.activeState+").")},t.transitionCheckTimeout);o.once(t.element,"transitionend",function(i,r){if(i.target===t.element&&o.contains(t.targetTransitionEvents,i.propertyName))return clearTimeout(n),r(),e(t)},!0)})];case 2:return[2,n.sent()]}})})},t.prototype.activateIfInactive=function(){return this.inactive?(this.wasInactive=!0,this.activate()):o.nothing()},t.prototype.inactivateIfWasInactive=function(){return this.wasInactive?(this.wasInactive=!1,this.inactivate()):o.nothing()},t.prototype.clearIfWasInactive=function(){this.wasInactive=!1},t.prototype.inactivate=function(){var t=this;return this.bell.message.hide().then(function(){return t.bell.badge.content.length>0?t.bell.badge.hide().then(function(){return Promise.all([e.prototype.inactivate.call(t),t.resize("small")])}).then(function(){return t.bell.badge.show()}):Promise.all([e.prototype.inactivate.call(t),t.resize("small")])})},t.prototype.activate=function(){var t=this;return this.bell.badge.content.length>0?this.bell.badge.hide().then(function(){return Promise.all([e.prototype.activate.call(t),t.resize(t.bell.options.size)])}):Promise.all([e.prototype.activate.call(this),this.resize(this.bell.options.size)])},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(2),r=n(1),s=n(3),a=n(6);if(i.default.isBrowser())if(o.incrementSdkLoadCount(),o.getSdkLoadCount()>1)r.warn("OneSignal: The web push SDK is included more than once. For optimal performance, please include our SDK only once on your page."),r.debug("OneSignal: Exiting from SDK initialization to prevent double-initialization errors. Occurred "+o.getSdkLoadCount()+" times.");else{if("undefined"!=typeof OneSignal)var u=OneSignal;if(o.isPushNotificationsSupported()?window.OneSignal=n(47).default:(r.debug("OneSignal: Push notifications are not supported. A stubbed version of the SDK will be initialized."),window.OneSignal=n(48).default),u)for(var c=0;c<u.length;c++)OneSignal.push(u[c])}else s.default.getWindowEnv()===a.WindowEnvironmentKind.ServiceWorker&&(self.OneSignal=n(49).default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(10);!function(e){e[e.Empty=0]="Empty",e[e.Malformed=1]="Malformed"}(i=t.InvalidArgumentReason||(t.InvalidArgumentReason={}));var InvalidArgumentError=function(e){function InvalidArgumentError(t,n){var o=this;switch(n){case i.Empty:o=e.call(this,"Supply a non-empty value to '"+t+"'.")||this;break;case i.Malformed:o=e.call(this,"The value for '"+t+"' was malformed.")||this}return o.argument=t,o.reason=i[n],o}return o.__extends(InvalidArgumentError,e),InvalidArgumentError}(r.default);t.InvalidArgumentError=InvalidArgumentError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(10),PushNotSupportedError=function(e){function PushNotSupportedError(t){return e.call(this,"'"+t+"' is not a valid UUID")||this}return i.__extends(PushNotSupportedError,e),PushNotSupportedError}(o.default);t.default=PushNotSupportedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(10);!function(e){e[e.Unknown=0]="Unknown",e[e.NoDeviceId=1]="NoDeviceId",e[e.OptedOut=2]="OptedOut"}(i=t.NotSubscribedReason||(t.NotSubscribedReason={}));var NotSubscribedError=function(e){function NotSubscribedError(t){var n=this;switch(t){case i.Unknown||i.NoDeviceId:n=e.call(this,"This operation can only be performed after the user is subscribed.")||this;break;case i.OptedOut:n=e.call(this,"The user has manually opted out of receiving of notifications. This operation can only be performed after the user is fully resubscribed.")||this}return n.reason=i[t],n}return o.__extends(NotSubscribedError,e),NotSubscribedError}(r.default);t.NotSubscribedError=NotSubscribedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(10);!function(e){e[e.InvalidAppId=0]="InvalidAppId",e[e.AppNotConfiguredForWebPush=1]="AppNotConfiguredForWebPush",e[e.MissingSubdomain=2]="MissingSubdomain",e[e.MultipleInitialization=3]="MultipleInitialization",e[e.MissingSafariWebId=4]="MissingSafariWebId",e[e.Unknown=5]="Unknown"}(i=t.SdkInitErrorKind||(t.SdkInitErrorKind={}));var SdkInitError=function(e){function SdkInitError(t){var n=this;switch(t){case i.InvalidAppId:n=e.call(this,"OneSignal: This app ID does match any existing app. Double check your app ID.")||this;break;case i.AppNotConfiguredForWebPush:n=e.call(this,"OneSignal: This app ID does not have any web platforms enabled. Double check your app ID, or see step 1 on our setup guide (https://goo.gl/01h7fZ).")||this;break;case i.MissingSubdomain:n=e.call(this,"OneSignal: Non-HTTPS pages require a subdomain of OneSignal to be chosen on your dashboard. See step 1.4 on our setup guide (https://goo.gl/xip6JB).")||this;break;case i.MultipleInitialization:n=e.call(this,"OneSignal: The OneSignal web SDK can only be initialized once. Extra initializations are ignored. Please remove calls initializing the SDK more than once.")||this;break;case i.MissingSafariWebId:n=e.call(this,"OneSignal: Safari browser support on Mac OS X requires the Safari web platform to be enabled. Please see the Safari Support steps in our web setup guide.")||this;break;case i.Unknown:n=e.call(this,"OneSignal: An unknown initialization error occurred.")||this}return n.reason=i[t],n}return o.__extends(SdkInitError,e),SdkInitError}(r.default);t.SdkInitError=SdkInitError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(1),r=n(4),s=n(5),a=function(){function e(e){this.options=e?s({},e):{},this.options.modalTitle&&"string"==typeof this.options.modalTitle||(this.options.modalTitle="Thanks for subscribing"),this.options.modalMessage&&"string"==typeof this.options.modalMessage||(this.options.modalMessage="You're now subscribed to notifications. You can unsubscribe at any time."),this.options.modalButtonText&&"string"==typeof this.options.modalButtonText||(this.options.modalButtonText="Close"),this.options.modalTitle=this.options.modalTitle.substring(0,50),this.options.modalMessage=this.options.modalMessage.substring(0,90),this.options.modalButtonText=this.options.modalButtonText.substring(0,35)}return Object.defineProperty(e,"EVENTS",{get:function(){return{FINISH_CLICK:"httpModalFinishClick",SHOWN:"httpModalShown",CLOSED:"httpModalClosed"}},enumerable:!0,configurable:!0}),e.prototype.create=function(){try{this.container&&i.removeDomElement("#onesignal-modal-container");var t='<div id="onesignal-modal-dialog"><div class="modal-exit">&times;</div><div class="modal-body"><div class="modal-body-title">'+this.options.modalTitle+'</div><div class="modal-body-message">'+this.options.modalMessage+'</div><div class="clearfix"></div></div><div class="modal-footer"><button id="onesignal-modal-finish-button" class="primary modal-button">'+this.options.modalButtonText+'</button><div class="clearfix"></div></div></div>';i.addDomElement("body","beforeend",'<div id="onesignal-modal-container" class="onesignal-modal-container onesignal-reset"></div>'),i.addDomElement(this.container,"beforeend",t),this.container.addEventListener("click",this.onHttpModalFinished.bind(this)),r.default.trigger(e.EVENTS.SHOWN)}catch(e){o.error(e)}},e.prototype.onHttpModalFinished=function(t){OneSignal.registerForPushNotifications({httpPermissionRequest:!0}),r.default.trigger(e.EVENTS.FINISH_CLICK),this.close()},e.prototype.close=function(){i.addCssClass(this.container,"close-modal"),i.removeDomElement("#onesignal-modal-container"),r.default.trigger(e.EVENTS.CLOSED)},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-modal-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return document.querySelector("#onesignal-modal-dialog")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finishButton",{get:function(){return document.querySelector("#onesignal-modal-finish-button")},enumerable:!0,configurable:!0}),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(3),r=n(24),s=n(69),a=n(2),u=function(){function e(){}return e.discoverAltOrigin=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o,r,u,c,l,d,f,g,p,d;return i.__generator(this,function(i){switch(i.label){case 0:n=e.getOneSignalProxyIframeUrls(t),o=[],u=0,c=n,i.label=1;case 1:return u<c.length?(l=c[u],d=new s.default(l),[4,d.load()]):[3,4];case 2:i.sent(),o.push(d),i.label=3;case 3:return u++,[3,1];case 4:return[4,e.removeDuplicatedAltOriginSubscription(o)];case 5:return(f=i.sent())?(r=f[0],[3,10]):[3,6];case 6:g=0,p=o,i.label=7;case 7:return g<p.length?(d=p[g],[4,d.isSubscribed()]):[3,10];case 8:if(i.sent())r=d;else{if(!a.contains(d.url.host,".os.tc"))return d.dispose(),[3,9];r?d.dispose():r=d}i.label=9;case 9:return g++,[3,7];case 10:return[2,r]}})})},e.removeDuplicatedAltOriginSubscription=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,s,u,c,c,l,d;return i.__generator(this,function(i){switch(i.label){case 0:t=[],n=0,s=e,i.label=1;case 1:return n<s.length?(u=s[n],[4,u.isSubscribed()]):[3,4];case 2:i.sent()&&t.push(u),i.label=3;case 3:return n++,[3,1];case 4:return t.length<2?[2,null]:(o.default.getBuildEnv()==r.BuildEnvironmentKind.Development?c=".localhost:3001":o.default.getBuildEnv()==r.BuildEnvironmentKind.Production&&(c=".onesignal.com"),l=t.find(function(e){return a.contains(e.url.host,c)}),l?[3,5]:[2,null]);case 5:return[4,l.unsubscribeFromPush()];case 6:return i.sent(),l.dispose(),d=e.indexOf(l),e.splice(d,1),[2,e]}})})},e.getCanonicalSubscriptionUrls=function(e,t){void 0===t&&(t=o.default.getBuildEnv());var n=[];if(e.httpUseOneSignalCom){var i=o.default.getOneSignalApiUrl(t);i.host=[e.subdomain,i.host].join("."),n.push(i)}var r=o.default.getOneSignalApiUrl(t);r.host=[e.subdomain,"os.tc"].join("."),n.push(r);for(var s=0,a=n;s<a.length;s++){a[s].pathname=""}return n},e.getOneSignalProxyIframeUrls=function(t){for(var n=e.getCanonicalSubscriptionUrls(t),i=0,o=n;i<o.length;i++){o[i].pathname="webPushIframe"}return n},e.getOneSignalSubscriptionPopupUrls=function(t){for(var n=e.getCanonicalSubscriptionUrls(t),i=0,o=n;i<o.length;i++){o[i].pathname="subscribe"}return n},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.AppState=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),o=function(){function e(){this.dynamicResourceLoader=new i.DynamicResourceLoader}return e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e[e.Default="default"]="Default",e[e.Granted="granted"]="Granted",e[e.Denied="denied"]="Denied"}(i||(i={})),t.NotificationPermission=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.ServiceWorkerConfig=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.ServiceWorkerState=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.Subscription=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e){this.isFeatureEnabled=e}return Object.defineProperty(e,"SYNC_URL",{get:function(){return"https://rc.rlcdn.com/463096.gif?n=5"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DOM_ID",{get:function(){return"onesignal-cookie-sync"},enumerable:!0,configurable:!0}),e.prototype.getElement=function(){return document.getElementById(e.DOM_ID)},e.prototype.uninstall=function(){this.getElement()&&this.getElement().remove()},e.prototype.install=function(){if(!this.isFeatureEnabled)return void i.debug("Cookie sync feature is disabled.");this.uninstall();var t=document.createElement("img");t.setAttribute("id",e.DOM_ID),t.setAttribute("border","0"),t.setAttribute("hspace","0"),t.setAttribute("vspace","0"),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("src",e.SYNC_URL),document.querySelector("body").appendChild(t),i.debug("Enabled cookie sync feature.")},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(13),r=n(8),s=n(4),a=n(2),u=n(5),c=n(3),l=n(15),d=n(35),f=n(23),g=n(36),p=n(11),h=n(25),m=n(1),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.initialize=function(){var t=e.prototype.initialize.call(this);return s.default.trigger("httpInitialize"),t},t.prototype.establishCrossOriginMessaging=function(){this.messenger&&this.messenger.destroy(),this.messenger=new o.default(window,this.options.origin,this.options.origin),this.messenger.on(OneSignal.POSTMAM_COMMANDS.CONNECTED,this.onMessengerConnect.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE,this.onProxyFrameInitializing.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION,this.onRemoteNotificationPermission.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET,this.onRemoteDatabaseGet.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT,this.onRemoteDatabasePut.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE,this.onRemoteDatabaseRemove.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH,this.onUnsubscribeFromPush.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST,this.onShowHttpPermissionRequest.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST,this.onIsShowingHttpPermissionRequest.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.MARK_PROMPT_DISMISSED,this.onMarkPromptDismissed.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.IS_SUBSCRIBED,this.onIsSubscribed.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_PROXY_FRAME,this.onUnsubscribeProxyFrame.bind(this)),this.messenger.listen()},t.prototype.retriggerRemoteEvent=function(e,t){this.messenger.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,{eventName:e,eventData:t})},t.prototype.onMessengerConnect=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return m.debug("("+c.default.getWindowEnv().toString()+") Successfully established cross-origin communication."),this.finishInitialization(),[2,!1]})})},t.prototype.onProxyFrameInitializing=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return m.info("("+c.default.getWindowEnv().toString()+") The iFrame has just received initOptions from the host page!"),OneSignal.config=u(e.data.hostInitOptions,OneSignal.config,{pageUrl:e.data.pageUrl,pageTitle:e.data.pageTitle}),g.default.installNativePromptPermissionChangedHook(),[4,r.default.get("Options","defaultUrl")];case 1:return t=n.sent(),t?[3,3]:[4,r.default.put("Options",{key:"defaultUrl",value:new URL(OneSignal.config.pageUrl).origin})];case 2:n.sent(),n.label=3;case 3:return[4,r.default.put("Options",{key:"lastKnownHostUrl",value:OneSignal.config.pageUrl})];case 4:return n.sent(),[4,g.default.initSaveState(OneSignal.config.pageTitle)];case 5:return n.sent(),[4,g.default.storeInitialValues()];case 6:return n.sent(),[4,g.default.saveInitOptions()];case 7:if(n.sent(),navigator.serviceWorker&&"https:"===window.location.protocol)try{p.default.establishServiceWorkerChannel()}catch(e){m.error("Error interacting with Service Worker inside an HTTP-hosted iFrame:",e)}return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2]}})})},t.prototype.onRemoteNotificationPermission=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,OneSignal.getNotificationPermission()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onRemoteDatabaseGet=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,s,a,u,c,l;return i.__generator(this,function(i){switch(i.label){case 0:for(t=e.data,n=[],o=0,s=t;o<s.length;o++)a=s[o],u=a.table,c=a.key,n.push(r.default.get(u,c));return[4,Promise.all(n)];case 1:return l=i.sent(),e.reply(l),[2,!1]}})})},t.prototype.onRemoteDatabasePut=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,s,a,u,c,l;return i.__generator(this,function(i){switch(i.label){case 0:for(t=e.data,n=[],o=0,s=t;o<s.length;o++)a=s[o],u=a.table,c=a.keypath,n.push(r.default.put(u,c));return[4,Promise.all(n)];case 1:return l=i.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onRemoteDatabaseRemove=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,s,a,u,c,l;return i.__generator(this,function(i){switch(i.label){case 0:for(t=e.data,n=[],o=0,s=t;o<s.length;o++)a=s[o],u=a.table,c=a.keypath,n.push(r.default.remove(u,c));return[4,Promise.all(n)];case 1:return l=i.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onUnsubscribeFromPush=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:m.debug("(Reposted from iFrame -> Host) User unsubscribed but permission granted. Re-prompting the user for push."),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,a.unsubscribeFromPush()];case 2:return n.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[3,4];case 3:return t=n.sent(),m.debug("Failed to unsubscribe from push remotely:",t),[3,4];case 4:return[2]}})})},t.prototype.onShowHttpPermissionRequest=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o;return i.__generator(this,function(i){switch(i.label){case 0:m.debug(c.default.getWindowEnv().toString()+" Calling showHttpPermissionRequest() inside the iFrame, proxied from host."),t={},e.data&&(t=e.data),m.debug(c.default.getWindowEnv().toString()+" HTTP permission request showing, message data:",e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,OneSignal.showHttpPermissionRequest(t)];case 2:return n=i.sent(),e.reply({status:"resolve",result:n}),[3,4];case 3:return o=i.sent(),o&&o.reason===l.InvalidStateReason[l.InvalidStateReason.PushPermissionAlreadyGranted]||e.reply({status:"reject",result:o}),[3,4];case 4:return[2]}})})},t.prototype.onIsShowingHttpPermissionRequest=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,d.default.isShowingHttpPermissionRequest()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onMarkPromptDismissed=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){return m.debug("(Reposted from iFrame -> Host) Marking prompt as dismissed."),f.default.markHttpsNativePromptDismissed(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]})})},t.prototype.onIsSubscribed=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onUnsubscribeProxyFrame=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return t=n.sent(),t?[4,OneSignal.setSubscription(!1)]:[3,4];case 2:return n.sent(),[4,OneSignal.database.rebuild()];case 3:n.sent(),n.label=4;case 4:return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t}(h.default);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(13),r=n(4),s=n(14),a=n(2),u=n(1),c=n(9),l=function(){function e(e){this.url=e,this.url.pathname="webPushIframe"}return Object.defineProperty(e,"LOAD_TIMEOUT_MS",{get:function(){return 15e3},enumerable:!0,configurable:!0}),e.prototype.load=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n=this;return i.__generator(this,function(i){return u.debug("Opening an iFrame to",this.url.toString()),this.removeFrame(),t=document.createElement("iframe"),t.style.display="none",t.src=this.url.toString(),t.sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation",this.loadPromise={},this.loadPromise.promise=new Promise(function(e,t){n.loadPromise.resolver=e,n.loadPromise.rejector=t}),document.body.appendChild(t),t.onload=this.onFrameLoad.bind(this),this.element=t,a.timeoutPromise(this.loadPromise.promise,e.LOAD_TIMEOUT_MS).catch(function(e){window===window.top&&u.warn("OneSignal: Loading the required iFrame "+n.url.toString()+" timed out. Check that the Site URL onesignal.com dashboard web config is "+location.origin+". Only the Site URL specified there is allowed to use load the iFrame.")}),[2,this.loadPromise.promise]})})},e.prototype.removeFrame=function(){if(c.default.isBrowser()){var e=document.querySelector("iFrame[src='"+this.url.toString()+"'");e&&e.remove()}},e.prototype.onFrameLoad=function(e){this.establishCrossOriginMessaging()},e.prototype.establishCrossOriginMessaging=function(){this.messenger&&this.messenger.destroy(),this.messenger=new o.default(this.element.contentWindow,this.url.toString(),this.url.toString()),this.messenger.on(OneSignal.POSTMAM_COMMANDS.CONNECTED,this.onMessengerConnect.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,this.onRemoteRetriggerEvent.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,this.onRemoteNotificationPermissionChanged.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REQUEST_HOST_URL,this.onRequestHostUrl.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.SERVICEWORKER_COMMAND_REDIRECT,this.onServiceWorkerCommandRedirect.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.HTTP_PERMISSION_REQUEST_RESUBSCRIBE,this.onHttpPermissionRequestResubscribe.bind(this)),this.messenger.connect()},e.prototype.dispose=function(){this.messenger&&this.messenger.destroy(),this.removeFrame()},e.prototype.isShowingHttpPermissionRequest=function(){return i.__awaiter(this,void 0,void 0,function(){var e=this;return i.__generator(this,function(t){return[2,new Promise(function(t){e.messenger.message(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST,null,function(e){t(e.data)})})]})})},e.prototype.onMessengerConnect=function(e){return i.__awaiter(this,void 0,void 0,function(){var e=this;return i.__generator(this,function(t){return u.debug("Successfully established cross-origin communication for iFrame at "+this.url.toString()),this.messenger.message(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE,{hostInitOptions:JSON.parse(JSON.stringify(OneSignal.config)),pageUrl:window.location.href,pageTitle:document.title},function(t){return t.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE&&e.loadPromise.resolver(),!1}),[2]})})},e.prototype.onRemoteRetriggerEvent=function(e){var t=e.data,n=t.eventName,i=t.eventData;return r.default.trigger(n,i,e.source),!1},e.prototype.onRemoteNotificationPermissionChanged=function(e){var t=e.data.forceUpdatePermission;return s.default.triggerNotificationPermissionChanged(t),!1},e.prototype.onRequestHostUrl=function(e){return e.reply(location.href),!1},e.prototype.onServiceWorkerCommandRedirect=function(e){return window.location.href=e.data,!1},e.prototype.onHttpPermissionRequestResubscribe=function(e){return u.debug("(Reposted from iFrame -> Host) User unsubscribed but permission granted. Re-prompting the user for push."),OneSignal.showHttpPrompt({__sdkCall:!0,__useHttpPermissionRequestStyle:!0}).catch(function(e){u.debug("[Resubscribe Prompt Error]",e)}),!1},e.prototype.isSubscribed=function(){var e=this;return new Promise(function(t,n){e.messenger.message(OneSignal.POSTMAM_COMMANDS.IS_SUBSCRIBED,null,function(e){t(e.data)})})},e.prototype.unsubscribeFromPush=function(){var e=this;return new Promise(function(t,n){e.messenger.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_PROXY_FRAME,null,function(e){t()})})},e.prototype.message=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.messenger.message.apply(this.messenger,arguments)},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(13),r=n(25),s=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.prototype.establishCrossOriginMessaging=function(){this.messenger=new o.default(window.parent,this.options.origin,this.options.origin)},t}(r.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(13),r=n(4),s=n(19),a=n(3),u=n(11),c=n(7),l=n(1),d=function(){function e(e,t){this.options={appId:new s.Uuid(e.appId)},this.registrationOptions=t}return e.prototype.load=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return e=n.sent(),[4,OneSignal.getNotificationPermission()];case 2:return t=n.sent(),this.url=a.default.getOneSignalApiUrl(),this.url.pathname="webPushModal",this.url.search=u.default.getPromptOptionsQueryString()+"&id="+this.options.appId.value+"&httpsPrompt=true&pushEnabled="+e+"&permissionBlocked="+("denied"===t)+"&promptType=modal",l.info("Loading iFrame for HTTPS subscription modal at "+this.url.toString()),this.modal=this.createHiddenSubscriptionDomModal(this.url.toString()),this.establishCrossOriginMessaging(),[2]}})})},e.prototype.createHiddenSubscriptionDomModal=function(e){var t=document.createElement("div");t.setAttribute("id","OneSignal-iframe-modal"),t.setAttribute("style","display:none !important"),t.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 3000000000; display: flex; align-items: center; justify-content: center;"></div>',document.body.appendChild(t);var n=document.createElement("style");n.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }",document.getElementsByTagName("head")[0].appendChild(n);var i=document.createElement("iframe");return i.className="OneSignal-permission-iframe",i.setAttribute("frameborder","0"),i.width=OneSignal._windowWidth.toString(),i.height=OneSignal._windowHeight.toString(),i.src=e,document.getElementById("notif-permission").appendChild(i),i},e.prototype.removeFrame=function(){var e=document.querySelector("#OneSignal-iframe-modal");e&&e.remove()},e.prototype.showSubscriptionDomModal=function(){document.getElementById("OneSignal-iframe-modal").setAttribute("style","")},e.prototype.establishCrossOriginMessaging=function(){this.messenger=new o.default(this.modal,this.url.origin,this.url.origin),this.messenger.startPostMessageReceive(),this.messenger.once(OneSignal.POSTMAM_COMMANDS.MODAL_LOADED,this.onModalLoaded.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_ACCEPTED,this.onModalAccepted.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_REJECTED,this.onModalRejected.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING,this.onModalClosing.bind(this))},e.prototype.onModalLoaded=function(e){this.showSubscriptionDomModal(),r.default.trigger("modalLoaded")},e.prototype.onModalAccepted=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return l.debug("User accepted the HTTPS modal prompt."),OneSignal._sessionInitAlreadyRunning=!1,this.dispose(),u.default.triggerCustomPromptClicked("granted"),l.debug("Calling setSubscription(true)"),[4,OneSignal.setSubscription(!0)];case 1:return e.sent(),c.default.registerForW3CPush(this.registrationOptions),[2]}})})},e.prototype.onModalRejected=function(e){l.debug("User rejected the HTTPS modal prompt."),OneSignal._sessionInitAlreadyRunning=!1,this.dispose(),u.default.triggerCustomPromptClicked("denied")},e.prototype.onModalClosing=function(e){l.info("Detected modal is closing."),this.dispose()},e.prototype.dispose=function(){this.messenger&&this.messenger.destroy(),this.removeFrame()},e.prototype.message=function(){this.messenger.message.apply(this.messenger,arguments)},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(13),r=n(3),s=n(25),a=n(1),u=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.prototype.establishCrossOriginMessaging=function(){this.messenger=new o.default(window.opener,this.options.origin,this.options.origin),this.messenger.once(OneSignal.POSTMAM_COMMANDS.CONNECTED,this.onMessengerConnected.bind(this)),this.messenger.postMessage(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS,null),this.messenger.listen()},t.prototype.onMessengerConnected=function(e){a.debug("("+r.default.getWindowEnv().toString()+") The host page is now ready to receive commands from the HTTP popup."),this.finishInitialization()},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(13),r=n(4),s=n(14),a=n(5),u=n(11),c=n(3),l=n(1),d=function(){function e(e,t){this.url=e,this.url.pathname="subscribe",this.options=t||{autoAccept:!1,httpPermissionRequest:!1}}return e.prototype.load=function(){var e=this,t=a({},u.default.getPromptOptionsPostHash(),{promptType:"popup",parentHostname:encodeURIComponent(location.hostname)});if(this.options.autoAccept&&(t.autoAccept=!0),this.options.httpPermissionRequest){t.httpPermissionRequest=!0;var n={childWidth:250,childHeight:150,left:-99999999,top:9999999}}return l.info("Opening a popup to "+this.url.toString()+" with POST data:",t),this.popupWindow=this.openWindowViaPost(this.url.toString(),t,n),this.establishCrossOriginMessaging(),this.loadPromise={},this.loadPromise.promise=new Promise(function(t,n){e.loadPromise.resolver=t,e.loadPromise.rejector=n}),this.loadPromise.promise},e.prototype.openWindowViaPost=function(e,t,n){var i=document.createElement("form");i.action=e,i.method="POST",i.target="onesignal-http-popup";var o=void 0!=window.screenLeft?window.screenLeft:screen.left,r=void 0!=window.screenTop?window.screenTop:screen.top,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=OneSignal._windowWidth,c=OneSignal._windowHeight,l=s/2-u/2+o,d=a/2-c/2+r;n&&(n.childWidth&&(u=n.childWidth),n.childHeight&&(c=n.childHeight),n.left&&(l=n.left),n.top&&(d=n.top));var f=window.open("about:blank","onesignal-http-popup","'scrollbars=yes, width="+u+", height="+c+", top="+d+", left="+l);if(t)for(var g in t){var p=document.createElement("textarea");p.name=g,p.value="object"==typeof t[g]?JSON.stringify(t[g]):t[g],i.appendChild(p)}return i.style.display="none",document.body.appendChild(i),i.submit(),document.body.removeChild(i),f},e.prototype.establishCrossOriginMessaging=function(){this.messenger=new o.default(this.popupWindow,this.url.toString(),this.url.toString()),this.messenger.on(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS,this.onBeginMessagePortCommunications.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_LOADED,this.onPopupLoaded.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_ACCEPTED,this.onPopupAccepted.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_REJECTED,this.onPopupRejected.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING,this.onPopupClosing.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION,this.onBeginBrowsingSession.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.WINDOW_TIMEOUT,this.onWindowTimeout.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION,this.onFinishingRegistrationRemotely.bind(this)),this.messenger.startPostMessageReceive()},e.prototype.dispose=function(){this.messenger.destroy()},e.prototype.onBeginMessagePortCommunications=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return l.debug("("+c.default.getWindowEnv().toString()+") Successfully established cross-origin messaging with the popup window."),this.messenger.connect(),[2,!1]})})},e.prototype.onPopupLoaded=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return this.loadPromise.resolver(),r.default.trigger("popupLoad"),[2]})})},e.prototype.onPopupAccepted=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return u.default.triggerCustomPromptClicked("granted"),[2]})})},e.prototype.onPopupRejected=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return u.default.triggerCustomPromptClicked("denied"),[2]})})},e.prototype.onPopupClosing=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return l.info("Popup window is closing, running cleanup events."),r.default.trigger(OneSignal.EVENTS.POPUP_CLOSING),this.dispose(),[2]})})},e.prototype.onBeginBrowsingSession=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return l.debug(c.default.getWindowEnv().toString()+" Marking current session as a continuing browsing session."),u.default.beginTemporaryBrowserSession(),[2]})})},e.prototype.onWindowTimeout=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return l.debug(c.default.getWindowEnv().toString()+" Popup window timed out and was closed."),r.default.trigger(OneSignal.EVENTS.POPUP_WINDOW_TIMEOUT),[2]})})},e.prototype.onFinishingRegistrationRemotely=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return l.debug(c.default.getWindowEnv().toString()+" Finishing HTTP popup registration inside the iFrame, sent from popup."),e.reply({progress:!0}),[4,u.default.getAppId()];case 1:return t=n.sent(),this.messenger.stopPostMessageReceive(),[4,u.default.registerWithOneSignal(t,e.data.subscriptionInfo)];case 2:return n.sent(),s.default.checkAndTriggerSubscriptionChanged(),[2]}})})},e.prototype.message=function(){this.messenger.message.apply(this.messenger,arguments)},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(4),s=n(11),a=n(12),u=n(5),c=function(){function e(e){this.options=e?u({},e):{},this.options.actionMessage&&"string"==typeof this.options.actionMessage||(this.options.actionMessage="We'd like to show you notifications for the latest news and updates."),this.options.acceptButtonText&&"string"==typeof this.options.acceptButtonText||(this.options.acceptButtonText="Allow"),this.options.cancelButtonText&&"string"==typeof this.options.cancelButtonText||(this.options.cancelButtonText="No Thanks"),this.options.actionMessage=this.options.actionMessage.substring(0,90),this.options.acceptButtonText=this.options.acceptButtonText.substring(0,15),this.options.cancelButtonText=this.options.cancelButtonText.substring(0,15),this.notificationIcons=null}return Object.defineProperty(e,"EVENTS",{get:function(){return{ALLOW_CLICK:"popoverAllowClick",CANCEL_CLICK:"popoverCancelClick",SHOWN:"popoverShown",CLOSED:"popoverClosed"}},enumerable:!0,configurable:!0}),e.prototype.create=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n,u,c;return i.__generator(this,function(i){switch(i.label){case 0:return null!==this.notificationIcons?[3,2]:[4,s.default.getNotificationIcons()];case 1:t=i.sent(),this.notificationIcons=t,this.container&&o.removeDomElement("#onesignal-popover-container"),n=this.getPlatformNotificationIcon(),u="data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2239.5%22%20height%3D%2240.5%22%20viewBox%3D%220%200%2079%2081%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3EOneSignal-Bell%3C%2Ftitle%3E%3Cg%20fill%3D%22%23BBB%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M39.96%2067.12H4.12s-3.2-.32-3.2-3.36%202.72-3.2%202.72-3.2%2010.72-5.12%2010.72-8.8c0-3.68-1.76-6.24-1.76-21.28%200-15.04%209.6-26.56%2021.12-26.56%200%200%201.6-3.84%206.24-3.84%204.48%200%206.08%203.84%206.08%203.84%2011.52%200%2021.12%2011.52%2021.12%2026.56s-1.6%2017.6-1.6%2021.28c0%203.68%2010.72%208.8%2010.72%208.8s2.72.16%202.72%203.2c0%202.88-3.36%203.36-3.36%203.36H39.96zM27%2070.8h24s-1.655%2010.08-11.917%2010.08S27%2070.8%2027%2070.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E",c='<div id="normal-popover"><div class="popover-body"><div class="popover-body-icon '+("default-icon"===n?"default-icon":"")+'" style="background-image: url(\''+("default-icon"===n?u:n)+'\');"></div><div class="popover-body-message">'+this.options.actionMessage+'</div><div class="clearfix"></div></div><div class="popover-footer"><button id="onesignal-popover-allow-button" class="align-right primary popover-button">'+this.options.acceptButtonText+'</button><button id="onesignal-popover-cancel-button" class="align-right secondary popover-button">'+this.options.cancelButtonText+'</button><div class="clearfix"></div></div></div>',o.addDomElement("body","beforeend",'<div id="onesignal-popover-container" class="onesignal-popover-container onesignal-reset"></div>'),o.addDomElement(this.container,"beforeend",'<div id="onesignal-popover-dialog" class="onesignal-popover-dialog">'+c+"</div>"),o.addCssClass(this.container,a.mobile?"slide-up":"slide-down"),this.allowButton.addEventListener("click",this.onPopoverAllowed.bind(this)),this.cancelButton.addEventListener("click",this.onPopoverCanceled.bind(this)),r.default.trigger(e.EVENTS.SHOWN),i.label=2;case 2:return[2]}})})},e.prototype.onPopoverAllowed=function(t){r.default.trigger(e.EVENTS.ALLOW_CLICK)},e.prototype.onPopoverCanceled=function(t){r.default.trigger(e.EVENTS.CANCEL_CLICK),this.close()},e.prototype.close=function(){var t=this;o.addCssClass(this.container,"close-popover"),o.once(this.dialog,"animationend",function(n,i){n.target!==t.dialog||"slideDownExit"!==n.animationName&&"slideUpExit"!==n.animationName||(o.removeDomElement("#onesignal-popover-container"),i(),r.default.trigger(e.EVENTS.CLOSED))},!0)},e.prototype.getPlatformNotificationIcon=function(){return this.notificationIcons?a.chrome||a.firefox?this.notificationIcons.chrome?this.notificationIcons.chrome:this.notificationIcons.firefox?this.notificationIcons.firefox:"default-icon":a.safari?this.notificationIcons.safari?this.notificationIcons.safari:this.notificationIcons.chrome?this.notificationIcons.chrome:"default-icon":void 0:"default-icon"},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-popover-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return document.querySelector("#onesignal-popover-dialog")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowButton",{get:function(){return document.querySelector("#onesignal-popover-allow-button")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelButton",{get:function(){return document.querySelector("#onesignal-popover-cancel-button")},enumerable:!0,configurable:!0}),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=null;i={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}},i.bitArray={bitSlice:function(e,t,n){return e=i.bitArray._shiftRight(e.slice(t/32),32-(31&t)).slice(1),void 0===n?e:i.bitArray.clamp(e,n-t)},extract:function(e,t,n){var i=Math.floor(-t-n&31);return((t+n-1^t)&-32?e[t/32|0]<<32-i^e[t/32+1|0]>>>i:e[t/32|0]>>>i)&(1<<n)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],o=i.bitArray.getPartial(n);return 32===o?e.concat(t):i.bitArray._shiftRight(t,o,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t,n=e.length;return 0===n?0:(t=e[n-1],32*(n-1)+i.bitArray.getPartial(t))},clamp:function(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var n=e.length;return t&=31,n>0&&t&&(e[n-1]=i.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(i.bitArray.bitLength(e)!==i.bitArray.bitLength(t))return!1;var n,o=0;for(n=0;n<e.length;n++)o|=e[n]^t[n];return 0===o},_shiftRight:function(e,t,n,o){var r,s,a=0;for(void 0===o&&(o=[]);t>=32;t-=32)o.push(n),n=0;if(0===t)return o.concat(e);for(r=0;r<e.length;r++)o.push(n|e[r]>>>t),n=e[r]<<32-t;return a=e.length?e[e.length-1]:0,s=i.bitArray.getPartial(a),o.push(i.bitArray.partial(t+s&31,t+s>32?n:o.pop(),1)),o},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},i.codec.utf8String={fromBits:function(e){var t,n,o="",r=i.bitArray.bitLength(e);for(t=0;t<r/8;t++)0==(3&t)&&(n=e[t/4]),o+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(window.escape(o))},toBits:function(e){e=window.unescape(encodeURIComponent(e));var t,n=[],o=0;for(t=0;t<e.length;t++)o=o<<8|e.charCodeAt(t),3==(3&t)&&(n.push(o),o=0);return 3&t&&n.push(i.bitArray.partial(8*(3&t),o)),n}},i.codec.hex={fromBits:function(e){var t,n="";for(t=0;t<e.length;t++)n+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return n.substr(0,i.bitArray.bitLength(e)/4)},toBits:function(e){var t,n,o=[];for(e=e.replace(/\s|0x/g,""),n=e.length,e+="00000000",t=0;t<e.length;t+=8)o.push(0^parseInt(e.substr(t,8),16));return i.bitArray.clamp(o,4*n)}},i.hash.md5=function(e){this._T[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},i.hash.md5.hash=function(e){return(new i.hash.md5).update(e).finalize()},i.hash.md5.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=i.codec.utf8String.toBits(e));var t,n=this._buffer=i.bitArray.concat(this._buffer,e),o=this._length,r=this._length=o+i.bitArray.bitLength(e);for(t=this.blockSize+o&-this.blockSize;t<=r;t+=this.blockSize)this._block(n.splice(0,16),!0);return this},finalize:function(){var e,t=this._buffer,n=this._h;for(t=i.bitArray.concat(t,[i.bitArray.partial(1,1)]),e=t.length+2;15&e;e++)t.push(0);for(t.push(0|this._length),t.push(this._length/4294967296|0);t.length;)this._block(t.splice(0,16),t.length);return this.reset(),this._BS(n,4),n},_init:[1732584193,4023233417,2562383102,271733878],_BS:function(e,t){var n,i;for(n=0;n<t;n++)i=e[n],e[n]=i>>>24|i>>8&65280|(65280&i)<<8|(255&i)<<24},_T:[],_precompute:function(){var e;for(e=0;e<64;e++)this._T[e]=4294967296*Math.abs(Math.sin(e+1))|0},_block:function(e,t){var n,i,o,r,s,a=e.slice(0),u=this._h,c=this._T;for(i=u[0],o=u[1],r=u[2],s=u[3],this._BS(a,t?16:14),n=0;n<64;n++){var l,d,f,g;n<32?n<16?(l=o&r|~o&s,d=n,f=[7,12,17,22]):(l=s&o|~s&r,d=(5*n+1)%16,f=[5,9,14,20]):n<48?(l=o^r^s,d=(3*n+5)%16,f=[4,11,16,23]):(l=r^(o|~s),d=7*n%16,f=[6,10,15,21]),g=i+l+a[d]+c[n],i=s,s=r,r=o,o=(g<<f[n%4]|g>>>32-f[n%4])+o|0}u[0]+=i,u[1]+=o,u[2]+=r,u[3]+=s}},i.hash.sha256=function(e){this._key[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},i.hash.sha256.hash=function(e){return(new i.hash.sha256).update(e).finalize()},i.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=i.codec.utf8String.toBits(e));var t,n=this._buffer=i.bitArray.concat(this._buffer,e),o=this._length,r=this._length=o+i.bitArray.bitLength(e);if(r>9007199254740991)throw new i.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!=typeof Uint32Array){var s=new Uint32Array(n),a=0;for(t=512+o-(512+o&511);t<=r;t+=512)this._block(s.subarray(16*a,16*(a+1))),a+=1;n.splice(0,16*a)}else for(t=512+o-(512+o&511);t<=r;t+=512)this._block(n.splice(0,16));return this},finalize:function(){var e,t=this._buffer,n=this._h;for(t=i.bitArray.concat(t,[i.bitArray.partial(1,1)]),e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this._length/4294967296)),t.push(0|this._length);t.length;)this._block(t.splice(0,16));return this.reset(),n},_init:[],_key:[],_precompute:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}for(var t,n,i=0,o=2;i<64;o++){for(n=!0,t=2;t*t<=o;t++)if(o%t==0){n=!1;break}n&&(i<8&&(this._init[i]=e(Math.pow(o,.5))),this._key[i]=e(Math.pow(o,1/3)),i++)}},_block:function(e){var t,n,i,o,r=this._h,s=this._key,a=r[0],u=r[1],c=r[2],l=r[3],d=r[4],f=r[5],g=r[6],p=r[7];for(t=0;t<64;t++)t<16?n=e[t]:(i=e[t+1&15],o=e[t+14&15],n=e[15&t]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+e[15&t]+e[t+9&15]|0),n=n+p+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(g^d&(f^g))+s[t],p=g,g=f,f=d,d=l+n|0,l=c,c=u,u=a,a=n+(u&c^l&(u^c))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;r[0]=r[0]+a|0,r[1]=r[1]+u|0,r[2]=r[2]+c|0,r[3]=r[3]+l|0,r[4]=r[4]+d|0,r[5]=r[5]+f|0,r[6]=r[6]+g|0,r[7]=r[7]+p|0}},i.hash.sha1=function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},i.hash.sha1.hash=function(e){return(new i.hash.sha1).update(e).finalize()},i.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=i.codec.utf8String.toBits(e));var t,n=this._buffer=i.bitArray.concat(this._buffer,e),o=this._length,r=this._length=o+i.bitArray.bitLength(e);if(r>9007199254740991)throw new i.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!=typeof Uint32Array){var s=new Uint32Array(n),a=0;for(t=this.blockSize+o-(this.blockSize+o&this.blockSize-1);t<=r;t+=this.blockSize)this._block(s.subarray(16*a,16*(a+1))),a+=1;n.splice(0,16*a)}else for(t=this.blockSize+o-(this.blockSize+o&this.blockSize-1);t<=r;t+=this.blockSize)this._block(n.splice(0,16));return this},finalize:function(){var e,t=this._buffer,n=this._h;for(t=i.bitArray.concat(t,[i.bitArray.partial(1,1)]),e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this._length/4294967296)),t.push(0|this._length);t.length;)this._block(t.splice(0,16));return this.reset(),n},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(e,t,n,i){return e<=19?t&n|~t&i:e<=39?t^n^i:e<=59?t&n|t&i|n&i:e<=79?t^n^i:void 0},_S:function(e,t){return t<<e|t>>>32-e},_block:function(e){var t,n,i,o,r,s,a,u,c=this._h;if("undefined"!=typeof Uint32Array){u=Array(80);for(var l=0;l<16;l++)u[l]=e[l]}else u=e;for(i=c[0],o=c[1],r=c[2],s=c[3],a=c[4],t=0;t<=79;t++)t>=16&&(u[t]=this._S(1,u[t-3]^u[t-8]^u[t-14]^u[t-16])),n=this._S(5,i)+this._f(t,o,r,s)+a+u[t]+this._key[Math.floor(t/20)]|0,a=s,s=r,r=this._S(30,o),o=i,i=n;c[0]=c[0]+i|0,c[1]=c[1]+o|0,c[2]=c[2]+r|0,c[3]=c[3]+s|0,c[4]=c[4]+a|0}};var o=function(){function e(){}return e.md5=function(e){return i.codec.hex.fromBits(i.hash.md5.hash(e))},e.sha1=function(e){return i.codec.hex.fromBits(i.hash.sha1.hash(e))},e.sha256=function(e){return i.codec.hex.fromBits(i.hash.sha256.hash(e))},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(5),r=function(){function e(){this.cache={}}return e.prototype.getCache=function(){return o({},this.cache)},e.prototype.loadSdkStylesheet=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return[4,this.loadIfNew(0,new URL("https://cdn.onesignal.com/sdks/OneSignalSDKStyles.css"))];case 1:return[2,e.sent()]}})})},e.prototype.loadFetchPolyfill=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return[4,this.loadIfNew(1,new URL("https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"))];case 1:return[2,e.sent()]}})})},e.prototype.loadIfNew=function(t,n){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){switch(i.label){case 0:return this.cache[n.toString()]||(this.cache[n.toString()]=e.load(t,n)),[4,this.cache[n.toString()]];case 1:return[2,i.sent()]}})})},e.load=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,new Promise(function(n,i){switch(e){case 1:var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("async","async"),o.setAttribute("src",t.toString());break;case 0:var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",t.toString())}o.onerror=i,o.onload=n,document.querySelector("head").appendChild(o)})];case 1:return i.sent(),[2,0];case 2:return n=i.sent(),[2,1];case 3:return[2]}})})},e}();t.DynamicResourceLoader=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isValidUrl=function(e,t){if(t&&t.allowNull&&null===e)return!0;if(t&&t.allowEmpty&&(null===e||void 0===e))return!0;try{var n=new URL(e);return!t||!t.requireHttps||"https:"===n.protocol}catch(e){return!1}},e.isValidBoolean=function(e,t){return!(!t||!t.allowNull||null!==e)||(e===!0||e===!1)},e.isValidArray=function(e,t){return!(!t||!t.allowNull||null!==e)||(!(!t||!t.allowEmpty||null!==e&&void 0!==e)||e instanceof Array)},e}();t.ValidatorUtils=i},function(e,t,n){"use strict";var i=n(89);e.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,r=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i),e}function r(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function a(){var e;try{e=t.storage.debug}catch(e){}return e}t=e.exports=n(80),t.log=r,t.formatArgs=o,t.save=s,t.load=a,t.useColors=i,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,n){function i(){return t.colors[l++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,r=n-(c||n);e.diff=r,e.prev=c,e.curr=n,c=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;a++;var o=t.formatters[i];if("function"==typeof o){var r=s[a];n=o.call(e,r),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s)),(o.log||t.log||console.log.bind(console)).apply(e,s)}n.enabled=!1,o.enabled=!0;var r=t.enabled(e)?o:n;return r.namespace=e,r}function r(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=u,t.disable=s,t.enable=r,t.enabled=a,t.humanize=n(84),t.names=[],t.skips=[],t.formatters={};var c,l=0},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(n,n.constructor),o(n)):(Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),n)}return r(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=s,e.exports=t.default},,function(e,t,n){function i(){}function o(e,t,n){function o(){u.parentNode&&u.parentNode.removeChild(u),window[d]=i,c&&clearTimeout(c)}function a(){window[d]&&o()}"function"==typeof t&&(n=t,t={}),t||(t={});var u,c,l=t.prefix||"__jp",d=t.name||l+s++,f=t.param||"callback",g=null!=t.timeout?t.timeout:6e4,p=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head;return g&&(c=setTimeout(function(){o(),n&&n(new Error("Timeout"))},g)),window[d]=function(e){r("jsonp got",e),o(),n&&n(null,e)},e+=(~e.indexOf("?")?"&":"?")+f+"="+p(d),e=e.replace("?&","?"),r('jsonp req "%s"',e),u=document.createElement("script"),u.src=e,h.parentNode.insertBefore(u,h),a}var r=n(79)("jsonp");e.exports=o;var s=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return r(e,c,"day")||r(e,u,"hour")||r(e,a,"minute")||r(e,s,"second")||e+" ms"}function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,l=365.25*c;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?o(e):i(e)}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){h&&g&&(h=!1,g.length?p=g.concat(p):m=-1,p.length&&a())}function a(){if(!h){var e=o(s);h=!0;for(var t=p.length;t;){for(g=p,p=[];++m<t;)g&&g[m].run();m=-1,t=p.length}g=null,h=!1,r(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var g,p=[],h=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||h||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,a(u),u++}function o(e){delete c[e]}function r(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function s(e){if(l)setTimeout(s,0,e);else{var t=c[e];if(t){l=!0;try{r(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var a,u=1,c={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;a=function(t){var n=d.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){a=function(e){setTimeout(s,0,e)}}(),f.setImmediate=i,f.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(29),n(85))},function(e,t,n){"use strict";function i(){function e(t){function n(e){return function(){return u[e].apply(null,arguments),c}}function i(){if(!t)return Promise.reject(new Error("ServiceWorker not found."));var e=r.parsePayload(o(arguments)),n=new MessageChannel;return n.port1.addEventListener("message",l),t.postMessage(e,[n.port2])}function a(e){var t=e.data;t&&(t.__broadcast?r.emission(u,{broadcast:!0})(e):r.emission(u,{broadcast:!1})(e))}var u=s(),c={on:n("on"),once:n("once"),off:n("off"),emit:i,at:e},l=r.emission(u,{broadcast:!1});return navigator.serviceWorker.addEventListener("message",a),c}return e(navigator.serviceWorker.controller)}var o=n(26),r=n(45),s=n(43);e.exports=i},function(e,t,n){"use strict";function i(){function e(e){return function(){return c[e].apply(null,arguments),l}}function t(e){var t={reply:a(e)};r.emission(c,t)(e)}function n(e){function t(e){return e.map(n)}function n(t){return t.postMessage({type:e,payload:i,__broadcast:!0})}var i=o(arguments,1);return self.clients.matchAll({includeUncontrolled:!0}).then(t)}function i(e){var t=r.parsePayload(o(arguments,1));return e.postMessage(t)}function a(e){return i.bind(null,e.ports[0])}function u(e){var t=r.parsePayload(o(arguments,1));return self.clients.matchAll({includeUncontrolled:!0}).then(function(n){var i=!1;if(n.forEach(function(n){if(n.id===e)return i=!0,n.postMessage(t)}),!i)return Promise.reject("Could not find service worker client with ID "+e+" to reply to.")})}var c=s(),l={on:e("on"),once:e("once"),off:e("off"),broadcast:n,emit:u};return self.addEventListener("message",t),l}var o=n(26),r=n(45),s=n(43);e.exports=i},function(e,t,n){(function(t){var n,i="function"==typeof t;n=i?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(90).setImmediate)},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(86),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";function i(e){var t=arguments.length<=1||void 0===arguments[1]?"all":arguments[1];(0,r.default)(e);var n=s[t];return n&&n.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(92),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default},function(e,t,n){"use strict";function i(e){if("string"!=typeof e)throw new TypeError("This library (validator.js) validates strings only")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}]);
//# sourceMappingURL=OneSignalSDK.js.map