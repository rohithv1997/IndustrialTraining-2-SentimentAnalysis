var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ba=function(){ba=function(){};k.Symbol||(k.Symbol=ca)},da=0,ca=function(a){return"jscomp_symbol_"+(a||"")+da++},fa=function(){ba();var a=k.Symbol.iterator;a||(a=k.Symbol.iterator=k.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,
a,{configurable:!0,writable:!0,value:function(){return ea(this)}});fa=function(){}},ea=function(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},ha=function(a){fa();a={next:a};a[k.Symbol.iterator]=function(){return this};return a},ia=function(a){fa();var b=a[Symbol.iterator];return b?b.call(a):ea(a)},ja=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==
c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ka=function(a,b){function c(){}c.prototype=b.prototype;a.Zb=b.prototype;
a.prototype=new c;a.prototype.constructor=a;a.Xb=function(a,c,g){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var l=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,l);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};ka(l,Error);l.prototype.name="CustomError";var la=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};var ma=function(a,b){b.unshift(a);l.call(this,la.apply(null,b));b.shift()};ka(ma,l);ma.prototype.name="AssertionError";var na=function(a,b){if(!a){var c="Assertion failed";if(b){c+=": "+b;var d=Array.prototype.slice.call(arguments,2)}throw new ma(""+c,d||[]);}};var oa=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}return b};var pa=null,qa=function(a){var b=ja(a);na("array"==b||"object"==b&&"number"==typeof a.length,"encodeByteArray takes an array as a parameter");if(!pa)for(pa={},b=0;65>b;b++)pa[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b);for(var b=pa,c=[],d=0;d<a.length;d+=3){var e=a[d],g=d+1<a.length,f=g?a[d+1]:0,n=d+2<a.length,m=n?a[d+2]:0,y=e>>2,e=(e&3)<<4|f>>4,f=(f&15)<<2|m>>6,m=m&63;n||(m=64,g||(f=64));c.push(b[y],b[e],b[f],b[m])}return c.join("")};var ra=function(){this.u=-1};var p=function(a,b,c){this.u=-1;this.C=a;this.u=c||a.u||16;this.Sa=Array(this.u);this.xa=Array(this.u);a=b;a.length>this.u&&(this.C.update(a),a=this.C.digest(),this.C.reset());for(c=0;c<this.u;c++)b=c<a.length?a[c]:0,this.Sa[c]=b^92,this.xa[c]=b^54;this.C.update(this.xa)};ka(p,ra);p.prototype.reset=function(){this.C.reset();this.C.update(this.xa)};p.prototype.update=function(a,b){this.C.update(a,b)};
p.prototype.digest=function(){var a=this.C.digest();this.C.reset();this.C.update(this.Sa);this.C.update(a);return this.C.digest()};var sa=function(a,b){a.reset();a.update(b);return a.digest()};var q=function(){this.u=64;this.l=Array(4);this.gb=Array(this.u);this.ka=this.Y=0;this.reset()};ka(q,ra);q.prototype.reset=function(){this.l[0]=1732584193;this.l[1]=4023233417;this.l[2]=2562383102;this.l[3]=271733878;this.ka=this.Y=0};
var ta=function(a,b,c){c||(c=0);var d=Array(16);if("string"==typeof b)for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.l[0];c=a.l[1];var e=a.l[2],g=a.l[3];var f=b+(g^c&(e^g))+d[0]+3614090360&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[1]+3905402710&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[2]+606105819&4294967295;e=g+(f<<17&4294967295|f>>>
15);f=c+(b^e&(g^b))+d[3]+3250441966&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[4]+4118548399&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[5]+1200080426&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[6]+2821735955&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[7]+4249261313&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[8]+1770035416&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[9]+2336552879&4294967295;g=b+(f<<12&4294967295|
f>>>20);f=e+(c^g&(b^c))+d[10]+4294925233&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[11]+2304563134&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[12]+1804603682&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[13]+4254626195&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[14]+2792965006&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[15]+1236535329&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(e^g&(c^e))+d[1]+4129170786&4294967295;b=c+(f<<
5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[6]+3225465664&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[11]+643717713&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[0]+3921069994&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[5]+3593408605&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[10]+38016083&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[15]+3634488961&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[4]+3889429448&4294967295;c=
e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[9]+568446438&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[14]+3275163606&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[3]+4107603335&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[8]+1163531501&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[13]+2850285829&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[2]+4243563512&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[7]+1735328473&4294967295;
e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[12]+2368359562&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(c^e^g)+d[5]+4294588738&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[8]+2272392833&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[11]+1839030562&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[14]+4259657740&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[1]+2763975236&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[4]+1272893353&4294967295;g=b+(f<<11&4294967295|
f>>>21);f=e+(g^b^c)+d[7]+4139469664&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[10]+3200236656&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[13]+681279174&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[0]+3936430074&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[3]+3572445317&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[6]+76029189&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[9]+3654602809&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[12]+
3873151461&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[15]+530742520&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[2]+3299628645&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(e^(c|~g))+d[0]+4096336452&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[7]+1126891415&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[14]+2878612391&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[5]+4237533241&4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[12]+1700485571&
4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[3]+2399980690&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[10]+4293915773&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[1]+2240044497&4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[8]+1873313359&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[15]+4264355552&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[6]+2734768916&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[13]+1309151649&
4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[4]+4149444226&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[11]+3174756917&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[2]+718787259&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[9]+3951481745&4294967295;a.l[0]=a.l[0]+b&4294967295;a.l[1]=a.l[1]+(e+(f<<21&4294967295|f>>>11))&4294967295;a.l[2]=a.l[2]+e&4294967295;a.l[3]=a.l[3]+g&4294967295};
q.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.u,d=this.gb,e=this.Y,g=0;g<b;){if(0==e)for(;g<=c;)ta(this,a,g),g+=this.u;if("string"==typeof a)for(;g<b;){if(d[e++]=a.charCodeAt(g++),e==this.u){ta(this,d);e=0;break}}else for(;g<b;)if(d[e++]=a[g++],e==this.u){ta(this,d);e=0;break}}this.Y=e;this.ka+=b};
q.prototype.digest=function(){var a=Array((56>this.Y?this.u:2*this.u)-this.Y);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;for(var c=8*this.ka,b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var d=0;32>d;d+=8)a[c++]=this.l[b]>>>d&255;return a};var r={Wb:{}},t,ua=!1,u=function(a){try{ua&&window.console&&window.console.log&&window.console.log(a)}catch(b){}},v=function(a,b){if(!a)return-1;if(a.indexOf)return a.indexOf(b,void 0);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},w=function(a,b){function c(){}if(!a)throw"Child class cannot be empty.";if(!b)throw"Parent class cannot be empty.";c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},va=function(a){return"[object Function]"===Object.prototype.toString.call(a)},
wa=function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(null===d||void 0===d)d="";b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},xa=function(a){a=(new RegExp("[&#]"+a+"=([^&]*)")).exec(window.location.hash);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},ya=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else throw"Add event handler for "+b+" failed.";},za=function(a,b){a=
(a||"").split(" ");b=(b||"").split(" ");for(var c=0;c<b.length;c++)if(b[c]&&0>v(a,b[c]))return!1;return!0},Aa=function(){if("undefined"!=typeof t)return t;var a=window.localStorage?window.localStorage:void 0;if(!a)return t=!1;try{a.setItem("test","test"),a.removeItem("test"),t=!0}catch(b){t=!1}return t},Ba=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&8==parseInt(a.split("msie")[1],10)},x=function(){return Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject},
Ca=function(){var a=navigator.userAgent;return!!a&&/Edge\/\d+/.test(a)},Da=function(){var a=navigator.userAgent,b;if(b=!!a&&-1!=a.indexOf("CriOS"))b=-1,(a=a.match(/CriOS\/(\d+)/))&&a[1]&&(b=parseInt(a[1],10)||-1),b=48>b;return b},Ea=function(){var a=navigator.userAgent.toLowerCase();return-1<a.indexOf("safari/")&&0>a.indexOf("chrome/")&&0>a.indexOf("crios/")&&0>a.indexOf("android")},z=function(a){this.Ca=a||[];this.D={}};
z.prototype.addEventListener=function(a,b){if(!(0<=v(this.Ca,a)))throw"Unrecognized event type: "+a;if(!va(b))throw"The listener for event '"+a+"' is not a function.";this.D[a]||(this.D[a]=[]);0>v(this.D[a],b)&&this.D[a].push(b)};z.prototype.removeEventListener=function(a,b){if(!(0<=v(this.Ca,a)))throw"Unrecognized event type: "+a;va(b)&&this.D[a]&&this.D[a].length&&(b=v(this.D[a],b),0<=b&&this.D[a].splice(b,1))};
z.prototype.dispatchEvent=function(a){var b=a.type;if(!(b&&0<=v(this.Ca,b)))throw"Failed to dispatch unrecognized event type: "+b;if(this.D[b]&&this.D[b].length)for(var c=0,d=this.D[b].length;c<d;c++)this.D[b][c](a)};var A=A||{};A.K=function(a){a=encodeURIComponent(a);var b=A.Na();if(b&&(a=b.match("(^|;) ?"+a+"=([^;]*)(;|$)"))&&2<a.length&&(a=a[2]))return decodeURIComponent(a)};A.sb=function(a){var b;(a=A.K(a))&&(b=String(Fa(a)));return b};A.Na=function(){return document.cookie};
A.Qb=function(a){document.cookie=a};r=r||{};
r.zb=function(a,b){if(!0===r.ta)a();else{var c=2;var d=function(){c--;0==c&&(r.ta=!0,a())};var e=function(a){b(a)};switch(Ga()){case "sessionStorage":r.ja=new Ha;r.ja.J(d,e);break;case "inMemoryStorage":r.ja=new Ia;r.ja.J(d,e);break;default:d=Error("Unsupported storage type: "+Ga());b(d);return}switch(Ja()){case "localStorage":r.S=new Ka;r.S.J(d,e);break;case "indexedDb":r.S=new La;r.S.J(d,e);break;case "cookieStorage":r.S=new Ma;r.S.J(d,e);break;default:d=Error("Unsupported storage type: "+Ja()),
b(d)}}};r.Pa=function(){if(!r.ta)throw Error("Storages are not initialized yet!");return r.S};r.xb=function(){if(!r.ta)throw Error("Storages are not initialized yet!");return r.ja};var Ka=function(){};h=Ka.prototype;h.J=function(a,b){Aa()?(this.$=window.localStorage,a()):b&&b(Error("localStorage is not available in the current environment."))};h.getItem=function(a,b){b(this.$.getItem(a))};h.setItem=function(a,b,c){void 0===b||null===b?this.$.removeItem(a):this.$.setItem(a,b);c&&c()};
h.removeItem=function(a,b){this.$.removeItem(a);b&&b()};h.clear=function(a){this.$.clear();a&&a()};var La=function(){};h=La.prototype;h.J=function(a,b){var c=this,d=window.indexedDB.open("oauth");d.onsuccess=function(b){c.ga=b.target.result;a()};d.onupgradeneeded=function(a){a.target.result.createObjectStore("oauth")};d.onerror=function(a){a=a.target.errorCode;b&&b(Error("IndexedDb initialization failed: "+a))}};
h.getItem=function(a,b){var c=this.ga.transaction("oauth","readwrite").objectStore("oauth").get(a);c.onsuccess=function(){b(c.result)}};h.setItem=function(a,b,c){var d=this.ga.transaction("oauth","readwrite").objectStore("oauth");if(void 0===b||null===b)d["delete"](a);else d.put(b,a);d.transaction.oncomplete=function(){c&&c()}};h.removeItem=function(a,b){var c=this.ga.transaction("oauth","readwrite").objectStore("oauth");c["delete"](a);c.transaction.oncomplete=function(){b&&b()}};
h.clear=function(a){var b=this.ga.transaction("oauth","readwrite").objectStore("oauth");b.clear();b.transaction.oncomplete=function(){a&&a()}};var Ia=function(){};h=Ia.prototype;h.J=function(a){this.ia={};a()};h.getItem=function(a,b){b(this.ia[a]||null)};h.setItem=function(a,b,c){this.ia[a]=b;c&&c()};h.removeItem=function(a,b){delete this.ia[a];b&&b()};h.clear=function(a){this.ia={};a&&a()};var Ha=function(){};h=Ha.prototype;h.J=function(a,b){Aa()?(this.da=window.sessionStorage,a()):b&&b(Error("sessionStorage is not available in the current environment."))};
h.getItem=function(a,b){b(this.da.getItem(a))};h.setItem=function(a,b,c){void 0===b||null===b?this.da.removeItem(a):this.da.setItem(a,b);c&&c()};h.removeItem=function(a,b){this.da.removeItem(a);b&&b()};h.clear=function(a){this.da.clear();a&&a()};var Ma=function(){this.Db=B.$a};h=Ma.prototype;h.J=function(a,b){navigator.cookieEnabled?a():b&&b(Error("Cookies are not enabled in current environment."))};h.getItem=function(a,b){for(var c=null,d=Na(a),e=0;e<d.length;e++)if(d[e].key==a){c=d[e].value;break}b(c)};
h.setItem=function(a,b,c){var d=B.qa(a.split(B.i)[0]);if(d){var e=Oa(d);b={key:a,value:b};for(var g=0;g<e.length;g++)if(e[g].key==a){e.splice(g,1);break}e.push(b);Pa(this,d,e)}c&&c()};h.removeItem=function(a,b){for(var c=Na(a),d=0;d<c.length;d++)if(c[d].key==a){c.splice(d,1);break}(a=B.qa(a.split(B.i)[0]))&&Pa(this,a,c);b&&b()};h.clear=function(a){r.hb();a&&a()};
var Na=function(a){return(a=B.qa(a.split(B.i)[0]))?Oa(a):[]},Oa=function(a){a=A.K(a);return r.jb(a||null)},Pa=function(a,b,c){var d=r.lb(c);d.length>a.Db?(c.splice(0,1),0<c.length?Pa(a,b,c):u("Failed to write Cookie based cache due to the big size.")):r.Xa(b,d)};r.ib=function(a){try{return atob(a)}catch(b){return a}};r.kb=function(a){try{return btoa(a)}catch(b){return a}};
r.jb=function(a){if(!a)return[];a=r.ib(a);try{return JSON.parse(a).items||[]}catch(b){return u("Error while parsing items from cookie:"+b.message),[]}};r.lb=function(a){return r.kb(JSON.stringify({items:a}))};r.Xa=function(a,b){var c=window.location.hostname,d=window.location.pathname;a=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; domain="+c+";";-1!=navigator.userAgent.toLowerCase().indexOf("msie")||x()||(a+=" path="+d+";");"https:"==window.location.protocol&&(a+=" secure;");A.Qb(a)};
r.hb=function(){var a=B.ma,b=A.Na();if(b)for(var b=b.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),c=0;c<b.length;c++){var d=decodeURIComponent(b[c]);0==d.indexOf(a)&&r.Xa(d,"")}};var C=function(a){this.Ta=a;z.call(this,["storageValueChanged"])};w(C,z);var Qa=function(a,b){r.Pa().getItem(a.Ta,b)};C.prototype.addListener=function(a){this.addEventListener("storageValueChanged",a)};
C.prototype.start=function(){var a=this;Qa(this,function(b){a.Hb=b;a.Ua=0;a.ua=window.setInterval(Ra(a),200)})};C.prototype.stop=function(){void 0!==this.ua&&(clearInterval(this.ua),this.ua=void 0)};
var Ra=function(a){return function(){a.Ua++;Qa(a,function(b){b!=a.Hb?(a.dispatchEvent({type:"storageValueChanged",key:a.Ta,newValue:b}),a.stop()):1500<=a.Ua&&a.stop()})}},Fa=function(a){var b=0,c;if(a){var d=0;for(c=a.length;d<c;d++){var e=a.charCodeAt(d);b=(b<<5)-b+e;b|=0}}return b},D=function(a){return!!a&&0<=a.indexOf(B.i)},Sa=function(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;a=a.extraQueryParams;b=b.extraQueryParams;if(!a&&!b)return!0;if(!a||!b||Object.keys&&Object.keys(a).length!=Object.keys(b).length)return!1;
for(var c in a)if(a[c]!==b[c])return!1;if(!Object.keys)for(c in b)if(a[c]!==b[c])return!1;return!0},B=B||{};B.oa="SID";B.Ia="SSID";B.Za=100;B.Ka="/oauth2/sessionstate/action/updateState";B.Da="/oauth2/sessionstate/action/checkOrigin";B.Ha="/oauth2/permission/action/refresh";B.Ga="/oauth2/permission/action/code";B.ea="/oauth2/permission/action/listSessions";B.cb="/o/oauth2/revoke";B.i="::";B.na="_ss_";B.Fa="_tr_";B.X="oauth2_ss";B.Ea="oauth2_cs";B.Ja="oauth2_tr";B.ab="oauth2_is";B.W="oauth2_ar";
B.ma="oauth2c_";B.$a=1500;B.Vb=function(){var a={na:1,Fa:2,X:3,Ea:4,Ja:5,W:6},b;for(b in a)if(a=B[b],!a||0<=a.indexOf(B.i))throw"Invalid value for 'oauth2.spi."+b+"'.";};B.Vb();B.bb=512;B.eb=function(a){var b;(b=void 0===a.hint)||(b=a.hint,b=(""===b?!0:b?"string"==typeof b||"object"==typeof b&&b.constructor===String:!1)&&a.hint.length<=B.bb);return!a.id&&b};B.Qa=function(){return"https:"==window.location.protocol?B.Ia:B.oa};
B.qa=function(a){switch(a){case B.W:return B.ma+B.W;case B.X:return B.ma+B.X;default:return null}};var Ja=function(){return Ea()&&!Aa()||x()&&!window.indexedDB?"cookieStorage":x()||Ca()?"indexedDb":"localStorage"},Ga=function(){return Ea()&&!Aa()?"inMemoryStorage":"sessionStorage"},A=A||{};A.la="cookieValueChanged";var Ta=function(a,b){this.Ma=a;this.Ab=b;z.call(this,[A.la])};w(Ta,z);Ta.prototype.K=function(){return A.K(this.Ma)};var E=function(a){return A.sb(a.Ma)};
Ta.prototype.addListener=function(a){this.addEventListener(A.la,a)};
var Wa=function(a){Ua(a);a.ha=a.K();a.Aa=window.setInterval(Va(a),a.Ab);u("IDP Session Cookie monitor is started.")},Ua=function(a){void 0!==a.Aa&&(window.clearInterval(a.Aa),a.Aa=void 0,u("IDP Session Cookie monitor is stoped."))},Va=function(a){return function(){var b=a.K();if(a.ha!=b){var c={type:A.la,newHash:b&&Fa(b),oldHash:a.ha&&Fa(a.ha)};a.ha=b;a.dispatchEvent(c)}}},Xa=function(a,b){this.a=a;this.Ya=b},Ya=function(a,b,c){var d=B.cb,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==
e.readyState&&200==e.status){var a;e.responseText&&(a=window.JSON.parse(e.responseText));c(a)}};e.open("POST",d,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g="xsrfToken=";a.Ya&&(g+=a.Ya);if(b)for(var f in b)f&&b[f]&&(g+="&"+f+"="+encodeURIComponent(b[f]));u("Call "+d+" with postData: "+g);e.send(g)},F=function(a,b,c,d,e){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){var a;g.responseText&&(a=window.JSON.parse(g.responseText));
d(a)}};if(b=wa(b))a+=0>a.indexOf("?")?"?":"&",a+=b;g.open("GET",a,!0);e&&(g.withCredentials=!0);if(c)for(var f in c)if(c.hasOwnProperty(f)){e=c[f];if(null===e||void 0===e)e="";g.setRequestHeader(f,e)}u("Call "+a+" with Get method.");g.send()},Za=function(a,b,c){F(B.Da,{origin:a.a,client_id:b},null,c,!1)},$a=function(a,b,c){b&&b.length?F(B.Ka,{login_hint:b.join(" "),origin:a.a},null,c,!1):c({activeHints:{}})},ab=function(a,b,c){b.origin=a.a;delete b.redirect_uri;delete b.app_package_name;F(B.Ha,b,
null,c,!1)},bb=function(a,b,c){b.origin=a.a;delete b.redirect_uri;delete b.app_package_name;delete b.response_type;F(B.Ga,b,null,c,!1)},cb=function(a,b,c){b.origin=a.a;delete b.redirect_uri;delete b.response_type;delete b.app_package_name;delete b.login_hint;F(B.ea,b,null,c,!1)},db=function(a,b,c){Ya(a,{token:b},c)},r=r||{},eb=function(){};eb.prototype.B=function(){return!1};var fb={};
r.Jb=function(){var a=new G;if(!a)throw"policy cannot be empty.";if(r.Ra("DEFAULT"))throw"Duplicate policyName [DEFAULT].";fb.DEFAULT=a};r.Ra=function(a){for(var b in fb)if(a==b)return!0;return!1};r.Oa=function(a){return a&&r.Ra(a)?a:"DEFAULT"};r.tb=function(a){return fb[r.Oa(a)]};r.B=function(a,b,c,d){return r.tb(d).B(a,b,c)};r.Yb=function(a,b,c,d){if(!r.B(a,b,c,d))throw"permission_error";};var gb=function(){};w(gb,eb);gb.prototype.B=function(a,b,c){a=c?this.ra(a):this.sa(a);return 0<=v(a,b)};
gb.prototype.sa=function(a){var b=[];if(a&&(b.push(a),"http://"==a.substring(0,7)||"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;a!=c.protocol+"//"+c.hostname&&b.push(c.protocol+"//"+c.hostname);"https:"==c.protocol&&b.push("http://"+c.hostname)}return b};
gb.prototype.ra=function(a){var b=[];if(a){b.push(a);var c=document.createElement("a");c.href=a;if("http:"==c.protocol||"https:"==c.protocol)for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift()}return b};var G=function(){};w(G,eb);G.prototype.B=function(a,b,c){a=c?this.ra(a):this.sa(a);return 0<=v(a,b)};
G.prototype.sa=function(a){var b=[];if(a&&(b.push(a),"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;""!=c.port&&0!=c.port&&443!=c.port||b.push("http://"+c.hostname)}return b};
G.prototype.ra=function(a){var b=[];if(a){var c=document.createElement("a");c.href=a;if("https:"==c.protocol&&(""==c.port||0==c.port||443==c.port)||"http:"==c.protocol&&(""==c.port||0==c.port||80==c.port))for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift();else b.push(a)}return b};r.Jb();var H=function(){};H.prototype.wa=function(){return!0};var I=function(a){return a.wa()?r.xb():r.Pa()};
H.prototype.f=function(){throw Error("unimplemented abstract method");};H.prototype.L=function(){throw Error("unimplemented abstract method");};H.prototype.j=function(){throw Error("unimplemented abstract method");};H.prototype.g=function(){throw Error("unimplemented abstract method");};var J=function(){};w(J,H);
J.prototype.j=function(a,b,c){var d=this,e=this.f(a);I(this).getItem(e,function(a){if(a)try{var f=window.JSON.parse(a);if(f.cookieHash!=b){I(d).removeItem(e,function(){c(void 0)});return}var g=f&&f.cachedValue}catch(m){}c(g)})};J.prototype.g=function(a,b,c,d){a=this.f(a);void 0===b||null===b?I(this).removeItem(a,d):(b=JSON.stringify({cookieHash:c,cachedValue:b}),I(this).setItem(a,b,d))};var K=function(){};w(K,H);
K.prototype.j=function(a,b,c){I(this).getItem(this.f(a),function(a){if(a)try{var b=window.JSON.parse(a);var d=b&&b.cachedValue}catch(f){}c(d)})};K.prototype.g=function(a,b,c,d){a=this.f(a);void 0===b||null===b?I(this).removeItem(a,d):(b=JSON.stringify({cachedValue:b}),I(this).setItem(a,b,d))};var L=function(){};w(L,K);L.prototype.wa=function(){return!1};L.prototype.f=function(a){return[B.W,a.origin,a.clientId,a.id].join(B.i)};
L.prototype.L=function(a){var b={};a&&(a=a.split(B.i),4==a.length&&(b.origin=a[1],b.clientId=a[2],b.id=a[3]));return b};var hb=function(){};w(hb,J);hb.prototype.f=function(a){return[B.Ea,a.origin,a.clientId].join(B.i)};hb.prototype.L=function(a){a=a.split(B.i);var b={};3==a.length&&(b.origin=a[1],b.clientId=a[2]);return b};var M=function(){};w(M,J);M.prototype.f=function(a){return[B.ab,a.origin,a.clientId].join(B.i)};
M.prototype.j=function(a,b,c){var d=this;J.prototype.j.call(this,a,b,function(b){b&&b.expires_at?6E4>b.expires_at-(new Date).getTime()?I(d).removeItem(d.f(a),c):za(b.scope,a.scope)&&za(a.scope,b.scope)?(b.expires_in=Math.floor((b.expires_at-(new Date).getTime())/1E3),c&&c(b)):I(d).removeItem(d.f(a),c):c&&c(void 0)})};M.prototype.g=function(a,b,c,d){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e=b);J.prototype.g.call(this,a,e,c,d)};var N=function(){};w(N,K);N.prototype.wa=function(){return!1};
N.prototype.f=function(a){return[B.X,a.domain,a.Z?"1":"0",r.Oa(a.M),a.id||B.na].join(B.i)};N.prototype.L=function(a){a=a.split(B.i);var b={};5==a.length&&(b.domain=a[1],b.Z="1"==a[2],b.M=a[3],b.id=a[4]);"DEFAULT"==b.M&&delete b.M;b.id==B.na&&delete b.id;return b};var O=function(a){this.Gb=a||B.Ja};w(O,J);O.prototype.f=function(a){return[this.Gb,a.origin,a.clientId,a.id||B.Fa].join(B.i)};
O.prototype.j=function(a,b,c){var d=this;J.prototype.j.call(this,a,b,function(b){b&&b.U&&b.U.expires_at?a.loginHint!=b.U.login_hint?I(d).removeItem(d.f(a),c):6E4>b.U.expires_at-(new Date).getTime()?I(d).removeItem(d.f(a),c):za(b.U.scope,a.scope)?za(b.responseType,a.responseType)?(b=b.U,b.expires_in=Math.floor((b.expires_at-(new Date).getTime())/1E3),c&&c(b)):I(d).removeItem(d.f(a),c):I(d).removeItem(d.f(a),c):c&&c(void 0)})};
O.prototype.g=function(a,b,c,d){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e={U:b,responseType:a.responseType});J.prototype.g.call(this,a,e,c,d)};var ib=function(a,b){this.a=a;this.ya=b;this.ca={};this.ba={}},jb=function(a,b){if(!b)throw"message object cannot be null.";b.rpcToken=a.ya;b=JSON.stringify(b);u("IDP IFrame sends message: "+b);window.parent.postMessage(b,a.a)},P=function(a,b,c){b&&jb(a,{id:b,result:c})};
ib.prototype.Ib=function(a){if(a.source==window.parent&&a.origin==this.a){u("IDP Session State IFrame receive message:"+a.data);try{var b=window.JSON.parse(a.data)}catch(c){return}(b.rpcToken||this.ya)&&b.rpcToken!=this.ya?u("RPC token mismatch."):b&&b.method&&this.ca[b.method]?(a=this.ca[b.method],a.F&&!b.id?u("Bad request."):a.w&&!a.w(b)?(u("Bad request."),jb(this,{id:b.id,error:"bad_request"})):a.v(b)):u("Bad request.")}};
var Q=function(a,b){if(b&&b.type&&a.ba[b.type]){var c=a.ba[b.type].filter;c&&!c(b)||jb(a,{method:"fireIdpEvent",params:b})}else u("Invalid event type.")},kb=function(a,b){a.ca={};a.ba={};if(b){if(b.s)for(var c=0;c<b.s.length;c++){var d=b.s[c];if(!d.method||!d.v)throw"Error in RPC policy: method or handler is empty.";if(a.ca[d.method])throw"Error in RPC policy: duplicate entry for RPC '"+d.method+"'.";var e=d.method;a.ca[e]={v:d.v,F:d.F,w:d.w,method:e}}if(b.H)for(c=0;c<b.H.length;c++){d=b.H[c];if(!d.type)throw"Error in Event policy: type is empty.";
if(a.ba[d.type])throw"Error in Event policy: duplicate entry for type '"+d.type+"'.";e=d.type;a.ba[e]={filter:d.filter,type:e}}}},lb=function(a,b,c,d){Q(a,{type:"sessionStateChanged",clientId:b,user:c,sessionState:d})},mb=function(a){var b=new N,c=B.X+B.i;return function(d){if(d.key&&0===d.key.indexOf(c)){var e=b.L(d.key);if(r.B(a.a,e.domain,e.Z,e.M)){var g;if(d.newValue)try{var f=JSON.parse(d.newValue);f&&(g=f.cachedValue)}catch(n){return}Q(a,{type:"sessionSelectorChanged",newValue:g,crossSubDomains:e.Z,
domain:e.domain,policy:e.M,id:e.id})}}}},nb=function(a){var b=new L,c=[B.W,a.a].join(B.i)+B.i;return function(d){if(!d.key&&Ba()){var e=null,g=[];for(d=0;d<window.localStorage.length;d++){var f=window.localStorage.key(d);if(0===f.indexOf(c))if(e)g.push(f);else{var n=window.localStorage.getItem(f);g.push(f);if(n){try{var m=window.JSON.parse(n)}catch(y){continue}m&&m.cachedValue&&(e=b.L(f),e={type:"authResult",clientId:e.clientId,id:e.id,authResult:m.cachedValue})}}}for(d=0;d<g.length;d++)window.localStorage.removeItem(g[d]);
(m=e)&&Q(a,m)}else if(d.key&&0===d.key.indexOf(c)&&d.newValue){try{g=window.JSON.parse(d.newValue)}catch(y){return}g&&g.cachedValue&&(m=b.L(d.key),m={type:"authResult",clientId:m.clientId,id:m.id,authResult:g.cachedValue},Q(a,m))}}},ob=function(a,b){this.a=a;this.m=b;this.La=new hb;this.Va=new N;this.Ba=new O;this.R=new M},pb=function(a,b,c,d,e){a.La.g({origin:a.a,clientId:b},{user:c.G,session:c.G?c.N:void 0},d,e)},qb=function(a,b,c){a.La.j({origin:a.a,clientId:b},E(a.m),c)},rb=function(a,b,c,d,e,
g,f){a.Ba.j({loginHint:b,origin:a.a,clientId:c,responseType:d,scope:e,id:g},E(a.m),f)},sb=function(a,b,c,d,e,g,f){a.Ba.g({origin:a.a,clientId:c,responseType:d,id:g},e,b,f)},tb=function(a,b,c){var d=a.Ba;a={origin:a.a,clientId:b};I(d).removeItem(d.f(a),c)},ub=function(a,b,c,d,e,g){if(!a.B(b,c,e))throw"Permission denied for '"+a.a+"' to read session selector for domain '"+b+"'.";a.Va.j({domain:b,Z:c,M:e,id:d},void 0,function(a){g&&g(a)})},vb=function(a,b,c,d,e,g,f){if(!a.B(b,c,g))throw"Permission denied for '"+
a.a+"' to write session selector for domain '"+b+"'.";a.Va.g({domain:b,Z:c,M:g,id:e},d,void 0,f)};ob.prototype.B=function(a,b,c){return r.B(this.a,a,b,c)};
var wb=function(a,b,c,d){a.R.j({origin:a.a,clientId:b,scope:c},E(a.m),d)},xb=function(a,b,c,d,e){a.R.g({origin:a.a,clientId:c},d,b,e)},yb=function(a,b,c){this.P=a;this.b=b;this.h=c},zb=function(a,b,c){a.G?c&&void 0!==c[a.G]?(c=c[a.G],Sa(a.N,c)||(a.N=c,pb(a.h,a.P,a,b,function(){lb(a.b,a.P,a.G,a.N)}))):a.N&&(a.N=void 0,pb(a.h,a.P,a,b,function(){lb(a.b,a.P,a.G,void 0)})):b&&lb(a.b,a.P,a.G,void 0)},Bb=function(a,b,c,d){this.m=a;this.b=b;this.c=c;this.h=d;this.aa=void 0;this.A={};this.za=[];var e=this;
this.m.addListener(function(a){Ab(e,a)})},Cb=function(a){var b=[],c;for(c in a.A){var d=a.A[c].G;d&&b.push(d)}return b},Ab=function(a,b){if(b.newHash)$a(a.c,Cb(a),function(c){for(var d in a.A)zb(a.A[d],b.newHash,c&&c.activeHints)});else for(var c in a.A)zb(a.A[c],b.newHash,void 0)},Db=function(a,b,c,d,e){var g=a.A[b];g||(g=new yb(b,a.b,a.h),a.A[b]=g);a=g;b=c.login_hint;c=c.session_state;a.G!=b?(a.G=b,a.N=b?c:void 0,pb(a.h,a.P,a,d,e)):e&&e()},Eb=function(a,b,c){var d=a.A[b];d?c(!0):qb(a.h,b,function(e){e?
(d=new yb(b,a.b,a.h),a.A[b]=d,d.G=e.user,d.N=e.session,c(!0)):Za(a.c,b,function(d){d&&d.valid?(d=new yb(b,a.b,a.h),a.A[b]=d,pb(a.h,b,d,E(a.m),function(){c(!0)})):c(!1)})})},Fb=function(a,b){x()||Ca()||Da()?a.za.push(b):ya(Ba()?document:window,"storage",b)},R=function(a,b,c){this.a=a;this.b=new ib(a,b);this.m=new Ta(B.oa,B.Za);this.c=new Xa(a,c);this.h=new ob(a,this.m);this.I=new Bb(this.m,this.b,this.c,this.h)};h=R.prototype;
h.start=function(){var a=this,b=function(){a.b.Ib.apply(a.b,arguments)},c=function(){Q(a.b,{type:"idpReady"});u("Initialize IDP IFrame successfully.")},d=function(c){var d=window;if(d.removeEventListener)d.removeEventListener("message",b,!1);else if(d.detachEvent)d.detachEvent("onmessage",b);else throw"Remove event handler for message failed.";Ua(a.m);Q(a.b,{type:"idpError",error:c.message})};try{kb(this.b,this.pa()),ya(window,"message",b),Fb(this.I,mb(this.b)),Fb(this.I,nb(this.b)),Wa(this.m),r.zb(c,
d)}catch(e){d(e)}};h.Eb=function(a){var b=this;Eb(this.I,(a.params||{}).clientId,function(c){P(b.b,a.id,c)})};
h.pb=function(a){var b=a.params||{},c=this,d=function(b){P(c.b,a.id,b)},e=b.clientId,g=b.loginHint,f=b.request,n=b.sessionSelector;f.client_id=e;f.login_hint=g;f.ss_domain=n.domain;var m=E(this.m);if(m){var y=function(a){a&&!a.error&&a.login_hint?(a.first_issued_at=(new Date).getTime(),a.expires_at=a.first_issued_at+1E3*a.expires_in,a.session_state||(a.session_state={}),a.scope||(a.scope=f.scope),b.skipCache?Db(c.I,e,a,m,function(){d(a)}):sb(c.h,m,e,f.response_type,a,b.id,function(){Db(c.I,e,a,m,
function(){d(a)})})):(a=a||{},d(a))};b.forceRefresh?ab(this.c,f,y):rb(this.h,g,e,f.response_type,f.scope,b.id,function(a){a&&18E4<a.expires_at-(new Date).getTime()?Db(c.I,e,a,m,function(){d(a)}):ab(c.c,f,y)})}else P(c.b,a.id,{error:"user_logged_out"})};h.ub=function(a){var b=this,c=function(c){P(b.b,a.id,c)};if(E(this.m)){var d=a.params||{},e=d.request,g=d.sessionSelector;e.client_id=d.clientId;e.login_hint=d.loginHint;e.ss_domain=g.domain;bb(this.c,e,c)}else c({error:"user_logged_out"})};
h.Kb=function(a){var b=a.params||{},c=b.clientId,d=this;db(this.c,b.token,function(b){tb(d.h,c,function(){P(d.b,a.id,b)})})};h.Tb=function(a){if(x()||Ca()||Da()){var b=a.params||{},c=(new L).f({clientId:b.clientId,id:b.id,origin:b.origin}),b=this.I;if(x()||Ca()||Da()){b.aa&&b.aa.stop();b.aa=new C(c);for(c=0;c<b.za.length;c++)b.aa.addListener(b.za[c]);b.aa.start()}}P(this.b,a.id,!0)};
h.ob=function(a){var b=this,c=a.params||{};ub(this.h,c.domain,c.crossSubDomains,c.id,c.policy,function(c){P(b.b,a.id,c)})};h.Rb=function(a){var b=a.params||{},c=b.hint,d=!!b.disabled,e=b.domain,g=b.crossSubDomains,f=b.id,n=b.policy,m=this;if(c||d)var y={hint:c,disabled:d};vb(this.h,e,g,y,f,n,function(){Q(m.b,{type:"sessionSelectorChanged",newValue:y,domain:e,crossSubDomains:g,id:f,policy:n});P(m.b,a.id,!0)})};
h.Bb=function(a){var b=a.params||{},c=this,d=function(b){P(c.b,a.id,b)},e=b.clientId,g=b.request,f=b.sessionSelector;g.client_id=e;g.response_type="id_token";g.ss_domain=f.domain;var n=E(this.m);if(n){var m=function(a){a&&!a.error?(a.first_issued_at=(new Date).getTime(),a.expires_at=a.first_issued_at+1E3*a.expires_in,a.scope=g.scope,xb(c.h,n,e,a,function(){d(a)})):(a=a||{error:"No response returned from Server."},d(a))};b.forceRefresh?cb(this.c,g,m):wb(this.h,e,g.scope,function(a){a?d(a):cb(c.c,g,
m)})}else d({scope:g.scope,sessions:[]})};h.Fb=function(a){a=a&&a.params||{};return a.clientId&&!D(a.clientId)};h.yb=function(a){var b=a&&a.params||{};a=b.loginHint;var c=!D(b.id),d=b.clientId&&!D(b.clientId),e=!!b.request,g=e&&b.request.scope;(b=(e=e&&b.request.response_type)&&0<=b.request.response_type.indexOf("code"))&&u("Bad request: 'code' response_type is not supported.");return a&&c&&d&&g&&e&&!b};
h.vb=function(a){a=a&&a.params||{};var b=!D(a.id),c=a.clientId&&!D(a.clientId),d=!!a.request&&a.request.scope;return a.loginHint&&b&&c&&d};h.wb=function(a){a=a&&a.params||{};var b=a.domain&&!D(a.domain),c=!D(a.policy);return!D(a.id)&&b&&c&&this.h.B(a.domain,!!a.crossSubDomains,a.policy)};h.Sb=function(a){a=a&&a.params||{};var b=a.domain&&!D(a.domain),c=!D(a.policy);return!D(a.id)&&b&&c&&this.h.B(a.domain,!!a.crossSubDomains,a.policy)&&B.eb(a)};
h.Cb=function(a){a=a&&a.params||{};var b=a.clientId&&!D(a.clientId),c=!!a.request&&a.request.scope;return!D(a.id)&&b&&c};h.Nb=function(a){a=a&&a.params||{};var b=!!a.token,c=a.clientId&&!D(a.clientId);return!D(a.id)&&b&&c};h.Ub=function(a){a=a&&a.params||{};var b=a.origin&&!D(a.origin),c=a.id&&!D(a.id);return a.clientId&&!D(a.clientId)&&b&&c};h.Pb=function(a){var b;if(b=a.clientId)a=a.clientId,b=!(!a||!this.I.A[a]);return b};
h.fb=function(a){var b;if(b=a.clientId)b=a.clientId,b=!(!b||!this.I.A[b]);return b&&a.id&&a.authResult};h.Ob=function(a){return a.domain&&this.h.B(a.domain,a.crossSubDomains,a.policy)};var S=function(a,b){return function(){return b.apply(a,arguments)}};R.prototype.pa=function(){var a={s:[],H:[]};Gb(this,a);return a};
var Gb=function(a,b){b.s.push({method:"monitorClient",v:S(a,a.Eb),F:!1,w:S(a,a.Fb)});b.s.push({method:"getTokenResponse",v:S(a,a.pb),F:!0,w:S(a,a.yb)});b.s.push({method:"getOnlineCode",v:S(a,a.ub),F:!0,w:S(a,a.vb)});b.s.push({method:"getSessionSelector",v:S(a,a.ob),F:!0,w:S(a,a.wb)});b.s.push({method:"setSessionSelector",v:S(a,a.Rb),F:!1,w:S(a,a.Sb)});b.s.push({method:"listIdpSessions",v:S(a,a.Bb),F:!0,w:S(a,a.Cb)});b.s.push({method:"revoke",v:S(a,a.Kb),w:S(a,a.Nb)});b.s.push({method:"startPolling",
v:S(a,a.Tb),w:S(a,a.Ub)});b.H.push({type:"idpReady"});b.H.push({type:"idpError"});b.H.push({type:"sessionStateChanged",filter:S(a,a.Pb)});b.H.push({type:"sessionSelectorChanged",filter:S(a,a.Ob)});b.H.push({type:"authResult",filter:S(a,a.fb)})};var Ib=function(a,b,c){b.origin=a.a;b.privileged=!0;delete b.redirect_uri;delete b.response_type;F(B.ea,b,Hb(a.a),function(a){c(a)},!1)};function Hb(a){var b={},c=A.K(B.Qa());if(c){if(!c)throw Error("Session cookie value cannot be empty.");c=new p(new q,oa(c));a=qa(sa(c,oa(a)));b["X-Csrf-Token"]=a}return b};var T=function(){};w(T,J);T.prototype.f=function(a){a=void 0===a?{}:a;return["gsi_gs",void 0===a.origin?null:a.origin,void 0===a.clientId?null:a.clientId].join(B.i)};T.prototype.j=function(a,b,c){c=void 0===c?function(){}:c;var d=this;J.prototype.j.call(this,a,b,function(b){b?!b.expires_at||b.expires_at<=(new Date).getTime()?I(d).removeItem(d.f(a),function(){return c(null)}):(b.expires_at=void 0,c(b)):c(null)})};
T.prototype.g=function(a,b,c,d){b&&(b.expires_at=(new Date).getTime()+864E5);J.prototype.g.call(this,a,b,c,d)};R.prototype.mb=function(a){a=void 0===a?{}:a;var b=a.id,c=void 0===a.params?{}:a.params,d=this,e=function(a){a&&a.sessions?(a=Jb(g,a.sessions),P(d.b,b,a)):P(d.b,b,null)},g=c.loginHint;delete c.loginHint;var f=E(this.m);if(f){a=c.clientId;var n=c.request,c=c.sessionSelector;n.client_id=a;n.ss_domain=c.domain;var m=new T,y={clientId:a,origin:this.a};m.j(y,f,function(a){a?e(a):Ib(d.c,n,function(a){!a||a.error?e(null):m.g(y,a,f,function(){e(a)})})})}else e(null)};
function Jb(a,b){if(!b.length)return null;var c=a.toLowerCase();b=ia(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,d.login_hint){if(a===d.obfuscatedGaiaId)return d.login_hint;if(d.emails&&d.emails.length)for(var e=ia(d.emails),g=e.next();!g.done;g=e.next())if(c===g.value.toLowerCase())return d.login_hint}return null};R.prototype.nb=function(a){a=void 0===a?{}:a;a=void 0===a.params?{}:a.params;var b=!!a.clientId&&!D(a.clientId),c=!!a.request,d=!!a.sessionSelector;return!!a.loginHint&&b&&c&&d};var Kb=function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(a[c]&&b[d]&&a[c].toLowerCase()===b[d].toLowerCase())return!0;return!1};var Mb=function(a,b,c){b.origin=a.a;b.privileged=!0;b.redirect_uri=void 0;b.response_type=void 0;F(B.ea,b,Lb(a),c,!1)},Nb=function(a,b,c,d){F((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webauth",{origin:a.a,client_id:b,user_ids:c.join(";")},Lb(a),d,!0)},Ob=function(a,b,c){F("/o/oauth2/auth",{origin:a.a,client_id:b.client_id,login_hint:b.login_hint,response_type:"code",access_type:"offline",scope:"https://www.googleapis.com/auth/googlenow.publish",redirect_uri:"xhr",timestamp:b.timestamp,
signature:b.signature,signed_by:"google_now"},Lb(a),c,!1)},U=function(a,b,c){F((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webAuthApiAnalytics",{origin:a.a,client_id:b,status:c},Lb(a),function(){},!0)},Lb=function(a){var b={},c=A.K(B.Qa());if(c){a=a.a;if(!a||!c)throw Error("RP origin and session cookie value cannot be empty.");c=new p(new q,oa(c));c=qa(sa(c,oa(a)));b["X-Csrf-Token"]=c}return b};var V=function(){};w(V,K);V.prototype.f=function(a){return["now_as",a.V,a.clientId||"ALL_CLIENTS"].join(B.i)};V.prototype.L=function(a){var b={};if(a){a=a.split(B.i);if("now_as"!==a[0]||3!=a.length)throw Error("Invalid assertion cache key.");b.V=a[1];b.clientId="ALL_CLIENTS"==a[2]?void 0:a[2]}return b};V.prototype.j=function(a,b,c){var d=this;K.prototype.j.call(this,a,b,function(b){b&&b.e?b.e<(new Date).getTime()?I(d).removeItem(d.f(a),c):c&&c(b.o):c&&c(void 0)})};
V.prototype.g=function(a,b,c,d){if(void 0!==b){var e=!!b;if(e&&!a.clientId)throw Error("Cannot cache all clients enabled for a user.");b={};b.o=e;b.e=(new Date).getTime()+864E5}K.prototype.g.call(this,a,b,c,d)};var Pb=function(a,b,c,d){var e={V:b,clientId:c};a.j({V:b},void 0,function(b){!1===b?d(!1):a.j(e,void 0,d)})},Qb=function(a,b,c,d){a.g({V:b},void 0,void 0,function(){a.g({V:b,clientId:c},!0,void 0,d)})},Rb=function(a,b,c,d,e){a.g({V:b,clientId:d?void 0:c},!1,void 0,e)};var W=function(){};w(W,J);W.prototype.f=function(a){return["now_gs",a.origin,a.clientId].join(B.i)};W.prototype.j=function(a,b,c){var d=this;J.prototype.j.call(this,a,b,function(b){if(b&&b.expires_at)if(b.expires_at<=(new Date).getTime())I(d).removeItem(d.f(a),function(){c&&c(e)});else{b.expires_at=void 0;var e=b}c&&c(e)})};W.prototype.g=function(a,b,c,d){b&&(b.expires_at=(new Date).getTime()+864E5);J.prototype.g.call(this,a,b,c,d)};R.prototype.qb=function(a){var b=this;if(!Sb(this,"getCode",a.id)){var c=Tb(this,a);if(3<c.emails.length)X(c,"THROTTLED","At most 3 email addresses can be used."),U(this.c,c.clientId,1);else if(c.fa){var d=function(a){a.length?Ub(b,c,a,function(a){Vb(b,c,a.auth_request)}):(X(c,"DISABLED"),U(b.c,c.clientId,4))},e=function(a){"AUTH_EXISTS"==a.message&&(X(c,"AUTHORIZATION_EXISTS","Authorization already granted for the user."),U(b.c,c.clientId,3))};Wb(this,c,!1,function(a){Xb(b,c,a,void 0,d,e)})}else X(c,
"DISABLED"),U(this.c,c.clientId,2)}};R.prototype.Lb=function(a){var b=this;if(!Sb(this,"revokeNow",a.id)){var c=Tb(this,a);3<c.emails.length&&X(c,"THROTTLED","At most 3 email addresses can be used.");if(c.fa){var d=function(a){if(a.length)for(var d=a.length,e=0;e<a.length;e++)Yb(b,c.clientId,a[e],function(a){(a=a&&a.access_token)?db(b.c,a,function(){d--;d||c.T({})}):(d--,d||c.T({}))});else c.T({})},e=function(){};Wb(this,c,!0,function(a){Xb(b,c,a,!0,d,e)})}else c.T({})}};
var Sb=function(a,b,c){a.va=a.va||{};if(!a.va[b])return a.va[b]=!0,!1;P(a.b,c,{error:"THROTTLED",detail:"The "+b+"() method has already been invoked."});return!0},Tb=function(a,b){var c=b.params||{},d={clientId:c.clientId,emails:c.emails,T:function(c){P(a.b,b.id,c)}};d.fa=E(a.m);d.Wa={origin:a.a,clientId:c.clientId};return d},Wb=function(a,b,c,d){a.R||(a.R=new W);var e=function(c){c&&c.sessions?a.R.g(b.Wa,c,b.fa,function(){d(c)}):X(b,"OTHER","Failed to get Google session information.")},g={client_id:b.clientId,
scope:"https://www.googleapis.com/auth/googlenow.publish"};c?Mb(a.c,g,e):a.R.j(b.Wa,b.fa,function(b){b?d(b):Mb(a.c,g,e)})},Xb=function(a,b,c,d,e,g){a.O||(a.O=new V);var f=function(a){e&&e(a)},n=function(){var a=Error("AUTH_EXISTS");g&&g(a)};if(c.sessions&&c.sessions.length){var m=function(c,e){if(0==c.length)f(e);else{var g=c.shift();g.emails&&Kb(b.emails,g.emails)?d&&g.login_hint?(e.push(g.login_hint),m(c,e)):d?m(c,e):g.login_hint?n():g.obfuscatedGaiaId?Pb(a.O,g.obfuscatedGaiaId,b.clientId,function(a){a?
n():(void 0===a&&e.push(g.obfuscatedGaiaId),m(c,e))}):m(c,e):m(c,e)}};m(c.sessions.slice(0),[])}else f([])},Ub=function(a,b,c,d){a.O||(a.O=new V);Nb(a.c,b.clientId,c,function(e){if(e&&"DISABLED"!=e.status)"THROTTLED"==e.status?(X(b,"THROTTLED","Throttled by Google Now server."),U(a.c,b.clientId,7)):"OK"==e.status&&Zb(a,b,e,c)?Qb(a.O,e.auth_request.login_hint,b.clientId,function(){d(e)}):(X(b,"OTHER","Unexpected response from Google Now server."),U(a.c,b.clientId,8));else{var g=!1,f=!1;if(e.users&&
e.users.length){var n=function(c,d){if(0==c.length)d();else{var e=c.shift();e.user_id?Rb(a.O,e.user_id,b.clientId,e.disabled_for_all_clients,function(){e.disabled_for_all_clients?f=!0:g=!0;n(c,d)}):n(c,d)}};n(e.users.slice(0),function(){X(b,"DISABLED");U(a.c,b.clientId,f&&!g?5:6)})}else X(b,"DISABLED"),U(a.c,b.clientId,f&&!g?5:6)}})},Zb=function(a,b,c,d){c=c.auth_request;return!!c&&c.origin==a.a&&c.client_id==b.clientId&&0<c.timestamp&&!!c.signature&&"google_now"==c.signed_by&&0<=v(d,c.login_hint)},
Vb=function(a,b,c){Ob(a.c,c,function(c){c&&c.code?(b.T({code:c.code}),U(a.c,b.clientId,9)):c&&"immediate_failed"==c.error&&"policy_enforced"==c.error_subtype?(X(b,"AUTHORIZATION_EXISTS","Failed to issue code due to existing authorization."),U(a.c,b.clientId,10)):(X(b,"OTHER",c.error||"Failed to get code."),U(a.c,b.clientId,11))})},Yb=function(a,b,c,d){ab(a.c,{client_id:b,login_hint:c,response_type:"token",scope:"https://www.googleapis.com/auth/googlenow.publish"},d)},X=function(a,b,c){a.T({error:b,
detail:c})};R.prototype.rb=function(a){a=a&&a.params||{};var b=a.emails,b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!D(a.clientId)&&b};R.prototype.Mb=function(a){a=a&&a.params||{};var b=a.emails,b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!D(a.clientId)&&b};R.prototype.pa=function(){var a={s:[],H:[]};$b(this,a);return a};
var $b=function(a,b){b.s.push({method:"now:getCode",v:S(a,a.qb),F:!0,w:S(a,a.rb)});b.s.push({method:"now:revoke",v:S(a,a.Lb),F:!0,w:S(a,a.Mb)})};R.prototype.pa=function(){var a={s:[],H:[]};Gb(this,a);$b(this,a);a.s.push({method:"gsi:fetchLoginHint",v:S(this,this.mb),F:!0,w:S(this,this.nb)});return a};B.oa="APISID";B.Ia="SAPISID";B.Ka="/o/oauth2/iframerpc?action=sessionState";B.Da="/o/oauth2/iframerpc?action=checkOrigin";B.Ha="/o/oauth2/iframerpc?action=issueToken";B.Ga="/o/oauth2/iframerpc?action=issueOnlineCode";B.ea="/o/oauth2/iframerpc?action=listSessions";
var ac=function(){var a=xa("origin");if(!a)throw"Failed to get parent origin from URL hash!";var b=xa("rpcToken");if(!b)throw"Failed to get rpcToken from URL hash!";var c=xa("debug");ua="0"!=c&&!!c;(new R(a,b)).start()},bc=["lso","startIdpIFrame"],Y=this;bc[0]in Y||!Y.execScript||Y.execScript("var "+bc[0]);for(var Z;bc.length&&(Z=bc.shift());)bc.length||void 0===ac?Y=Y[Z]&&Y[Z]!==Object.prototype[Z]?Y[Z]:Y[Z]={}:Y[Z]=ac;
